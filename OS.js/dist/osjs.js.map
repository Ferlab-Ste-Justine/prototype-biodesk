{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/client/config.js","webpack:///./src/client/index.js","webpack:///./src/client/index.scss","webpack:///webpack://osjsClient/webpack/universalModuleDefinition","webpack:///webpack://osjsClient/webpack/bootstrap","webpack:///webpack://osjsClient/index.js","webpack:///webpack://osjsClient/index.scss","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/construct.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/createClass.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/get.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/inherits.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/helpers/typeof.js","webpack:///webpack://osjsClient/node_modules/@babel/runtime/regenerator/index.js","webpack:///webpack://osjsClient/webpack:/webpack/bootstrap","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///webpack://osjsClient/webpack:/webpack:/osjsEventEmitter/webpack/universalModuleDefinition","webpack:///webpack://osjsClient/webpack:/webpack:/osjsEventEmitter/webpack/bootstrap","webpack:///webpack://osjsClient/webpack:/webpack:/osjsEventEmitter/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///webpack://osjsClient/webpack:/webpack:/osjsEventEmitter/node_modules/@babel/runtime/helpers/createClass.js","webpack:///webpack://osjsClient/webpack:/webpack:/osjsEventEmitter/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/createClass.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///webpack://osjsClient/webpack:/src/library.ts","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/regenerator/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/isobject/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/get.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/inherits.js","webpack:///webpack://osjsClient/webpack:/node_modules/omit-deep/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/typeof.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///webpack://osjsClient/webpack:/node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///webpack://osjsClient/webpack:/src/graph.ts","webpack:///webpack://osjsClient/webpack:/src/mutex.ts","webpack:///webpack://osjsClient/webpack:/node_modules/is-plain-object/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/unset-value/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/has-value/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/has-value/node_modules/isobject/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/isarray/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/has-values/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/get-value/index.js","webpack:///webpack://osjsClient/webpack:/node_modules/regenerator-runtime/runtime-module.js","webpack:///webpack://osjsClient/webpack:/node_modules/regenerator-runtime/runtime.js","webpack:///webpack://osjsClient/webpack:/src/utils.js","webpack:///webpack://osjsClient/webpack:/node_modules/deepmerge/dist/es.js","webpack:///webpack://osjsClient/webpack:/src/core.js","webpack:///webpack://osjsClient/webpack:/src/service-provider.js","webpack:///webpack://osjsClient/webpack:/index.js","webpack:///webpack://osjsClient/webpack:/osjsEventEmitter/webpack/universalModuleDefinition","webpack:///webpack://osjsClient/webpack:/osjsEventEmitter/webpack/bootstrap","webpack:///webpack://osjsClient/webpack:/osjsEventEmitter/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///webpack://osjsClient/webpack:/osjsEventEmitter/node_modules/@babel/runtime/helpers/createClass.js","webpack:///webpack://osjsClient/webpack:/osjsEventEmitter/index.js","webpack:///webpack://osjsClient/node_modules/css-mediaquery/index.js","webpack:///webpack://osjsClient/node_modules/dateformat/lib/dateformat.js","webpack:///webpack://osjsClient/node_modules/deepmerge/dist/umd.js","webpack:///webpack://osjsClient/node_modules/hyperapp/src/index.js","webpack:///webpack://osjsClient/node_modules/regenerator-runtime/runtime-module.js","webpack:///webpack://osjsClient/node_modules/regenerator-runtime/runtime.js","webpack:///webpack://osjsClient/node_modules/simplejsonconf/dist/main.js","webpack:///webpack://osjsClient/(webpack)/buildin/global.js","webpack:///webpack://osjsClient/src/adapters/auth/localstorage.js","webpack:///webpack://osjsClient/src/adapters/auth/server.js","webpack:///webpack://osjsClient/src/adapters/vfs/apps.js","webpack:///webpack://osjsClient/src/adapters/vfs/null.js","webpack:///webpack://osjsClient/src/adapters/vfs/system.js","webpack:///webpack://osjsClient/src/application.js","webpack:///webpack://osjsClient/src/auth.js","webpack:///webpack://osjsClient/src/basic-application.js","webpack:///webpack://osjsClient/src/clipboard.js","webpack:///webpack://osjsClient/src/config.js","webpack:///webpack://osjsClient/src/core.js","webpack:///webpack://osjsClient/src/desktop.js","webpack:///webpack://osjsClient/src/filesystem.js","webpack:///webpack://osjsClient/src/locale/de_DE.js","webpack:///webpack://osjsClient/src/locale/en_EN.js","webpack:///webpack://osjsClient/src/locale/fr_FR.js","webpack:///webpack://osjsClient/src/locale/index.js","webpack:///webpack://osjsClient/src/locale/nb_NO.js","webpack:///webpack://osjsClient/src/locale/sl_SI.js","webpack:///webpack://osjsClient/src/locale/vi_VN.js","webpack:///webpack://osjsClient/src/locale/zh_CN.js","webpack:///webpack://osjsClient/src/login-ui.js","webpack:///webpack://osjsClient/src/login.js","webpack:///webpack://osjsClient/src/notification.js","webpack:///webpack://osjsClient/src/notifications.js","webpack:///webpack://osjsClient/src/packages.js","webpack:///webpack://osjsClient/src/providers/auth.js","webpack:///webpack://osjsClient/src/providers/core.js","webpack:///webpack://osjsClient/src/providers/desktop.js","webpack:///webpack://osjsClient/src/providers/notifications.js","webpack:///webpack://osjsClient/src/providers/settings.js","webpack:///webpack://osjsClient/src/providers/vfs.js","webpack:///webpack://osjsClient/src/search-ui.js","webpack:///webpack://osjsClient/src/search.js","webpack:///webpack://osjsClient/src/session.js","webpack:///webpack://osjsClient/src/settings.js","webpack:///webpack://osjsClient/src/splash.js","webpack:///webpack://osjsClient/src/styles/logo-blue-32x32.png","webpack:///webpack://osjsClient/src/styles/wallpaper.png","webpack:///webpack://osjsClient/src/tray.js","webpack:///webpack://osjsClient/src/utils/dnd.js","webpack:///webpack://osjsClient/src/utils/dom.js","webpack:///webpack://osjsClient/src/utils/fetch.js","webpack:///webpack://osjsClient/src/utils/locale.js","webpack:///webpack://osjsClient/src/utils/preloader.js","webpack:///webpack://osjsClient/src/utils/url.js","webpack:///webpack://osjsClient/src/utils/vfs.js","webpack:///webpack://osjsClient/src/vfs.js","webpack:///webpack://osjsClient/src/websocket.js","webpack:///webpack://osjsClient/src/window-behavior.js","webpack:///webpack://osjsClient/src/window.js"],"names":["module","exports","public","ws","connectInterval","disabled","auth","ui","title","stamp","languages","en_EN","fr_FR","desktop","lock","contextmenu","enabled","defaults","settings","font","theme","sounds","icons","animations","panels","position","items","name","widgets","keybindings","background","color","iconview","locale","format","shortDate","mediumDate","longDate","fullDate","shortTime","longTime","vfs","defaultPath","defaultAdapter","adapters","mountpoints","label","adapter","icon","attributes","visibility","searchable","readOnly","init","osjs","Core","config","omit","register","CoreServiceProvider","DesktopServiceProvider","VFSServiceProvider","NotificationServiceProvider","SettingsServiceProvider","before","AuthServiceProvider","PanelServiceProvider","DialogServiceProvider","GUIServiceProvider","WidgetServiceProvider","boot","window","addEventListener","i","l","modules","__webpack_require__","Object","enumerable","value","o","_getPrototypeOf","global","Constructor","instance","props","descriptor","configurable","writable","staticProps","protoProps","_defineProperties","getEventNames","String","EventEmitter","this","events","callback","options","_this","push","once","force","_this2","length","ev","args","_this3","apply","e","console","self","arrayWithoutHoles","require","iterableToArray","nonIterableSpread","arr","__export","val","Array","_typeof","assertThisInitialized","call","superPropBase","receiver","Reflect","_get","base","desc","setPrototypeOf","superClass","subClass","constructor","isObject","unset","keys","omitDeep","j","arg","info","gen","error","reject","resolve","Promise","fn","asyncGeneratorStep","err","_next","undefined","obj","_typeof2","Symbol","getPrototypeOf","property","object","p","_setPrototypeOf","arr2","iter","Graph","node","dependent","dependency","to","from","visit","dependencyName","dependentName","rootNodeNames","visitAndClear","promise","Node","_name","mutex_1","_data","locked","data","mutex","readyTest","Mutex","isObjectObject","ctor","prot","prototype","has","prop","segs","last","slice","hasValues","get","noZero","isArray","toString","c","a","b","len","key","g","Function","hadRuntime","oldRuntime","regeneratorRuntime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","toStringTagSymbol","inModule","runtime","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","GeneratorFunctionPrototype","Generator","GeneratorFunction","genFun","__await","defineIteratorMethods","AsyncIterator","tryLocsList","wrap","result","next","done","Context","reset","skipTempReset","resetTryEntry","isNaN","stop","rootRecord","dispatchException","exception","context","caught","record","entry","handle","hasCatch","hasFinally","catchLoc","finallyLoc","abrupt","finallyEntry","type","complete","afterLoc","finish","catch","tryLoc","thrown","delegateYield","nextLoc","iterator","resultName","method","protoGenerator","outerFn","generator","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","tryCatch","innerFn","callInvokeWithMethodAndArg","invoke","unwrapped","previousPromise","locs","iterable","iteratorMethod","providerHandler","core","instances","providers","registry","createGraph","graph","provides","list","wants","dependsOptions","dependsInstance","depends","dindex","provider","bind","singleton","make","found","destroy","isMergeableObject","stringValue","REACT_ELEMENT_TYPE","deepmerge","target","element","cloneUnlessOtherwiseSpecified","sourceIsArray","destination","source","array","deepmerge_1","CoreBase","merger","merge","omitted","booted","started","destroyed","assertThisInitialized_default","get_default","defaultValue","configuration","ref","_this$providers","ServiceProvider","localStorageAuth","login","serverAuth","request","params","body","JSON","logout","pkgs","readdir","path","isDirectory","isFile","filename","pkg","mime","size","stat","nullAdapter","readfile","writefile","copy","rename","mkdir","unlink","exists","url","mount","unmount","search","touch","getters","requester","response","contentType","methods","passthrough","formData","encodeURIComponent","root","pattern","download","json","applications","applicationCount","getSettingsKey","metadata","Application","defaultSettings","sessionable","windowAutoFocus","remove","worker","foundIndex","windows","w","setTimeout","forcePreload","restore","uri","socket","Websocket","pid","credentials","msg","Window","r","filter","win","session","s","defaultFilter","proc","filterFn","service","Auth","defaultUi","defaultAdapters","server","localStorage","Login","reload","cb","autologin","basename","pathname","split","BasicApplication","mimeTypes","loadMimeTypes","saveMimeTypes","defaultFilename","currentFile","parent","modal","translatableFlat","prefix","opts","btn","Clipboard","v","clear","location","href","defaultConfiguration","development","process","standalone","http","nb_NO","vi_VN","de_DE","sl_SI","zh_CN","packages","manifest","application","categories","science","games","graphics","network","multimedia","office","system","utilities","other","username","password","notifications","native","src","style","language","clientLocale","rtl","lofi","mobile","template","globalBlacklist","globalWhitelist","classNames","document","Splash","urlResolver","id","groups","protocol","host","clearInterval","connect","valid","pingTime","setInterval","wasConnected","interval","wid","message","endpoint","_","file","run","compatible","choices","apps","TEMPLATE","subtract","applyBackgroundStyles","$root","styles","backgroundRepeat","backgroundPosition","backgroundSize","backgroundColor","backgroundImage","createPanelSubtraction","subtraction","top","left","right","bottom","set","Desktop","Search","tray","isVisible","forwardKeyEvent","isWithinWindow","tagName","isInput","handleTabOnTextarea","moved","onmousemove","onmouseup","clearTimeout","resizeDebounce","history","rtls","checkRTL","isRtl","isMobile","entries","lockSettings","newSettings","userSettings","arrayMerge","applyOverlays","applyCss","el","elements","errors","k","storageItems","onclick","menu","extras","useDefaults","__","themes","defaultItems","t","provided","width","height","Filesystem","mounts","systemAdapter","appsAdapter","stopOnError","index","item","mountpoint","eventName","coreEventName","m","dest","srcMount","destMount","sameAdapter","VFS","mounted","local","_adapter","re","match","all","str","ERR_REQUEST_STANDALONE","ERR_REQUEST_NOT_OK","ERR_VFS_MOUNT_NOT_FOUND","ERR_VFS_MOUNT_NOT_FOUND_FOR","ERR_VFS_MOUNT_NOT_MOUNTED","ERR_VFS_MOUNT_ALREADY_MOUNTED","ERR_VFS_PATH_FORMAT_INVALID","ERR_PACKAGE_NOT_FOUND","ERR_PACKAGE_LOAD","ERR_PACKAGE_NO_RUNTIME","ERR_PACKAGE_NO_METADATA","ERR_PACKAGE_EXCEPTION","ERR_WINDOW_ID_EXISTS","ERR_INVALID_LOCALE","LBL_CONNECTION_LOST","LBL_CONNECTION_LOST_MESSAGE","LBL_CONNECTION_RESTORED","LBL_CONNECTION_RESTORED_MESSAGE","LBL_APP_CAT_DEVELOPMENT","LBL_APP_CAT_SCIENCE","LBL_APP_CAT_GAMES","LBL_APP_CAT_GRAPHICS","LBL_APP_CAT_NETWORK","LBL_APP_CAT_MULTIMEDIA","LBL_APP_CAT_OFFICE","LBL_APP_CAT_SYSTEM","LBL_APP_CAT_UTILITIES","LBL_APP_CAT_OTHER","LBL_LAUNCH_SELECT","LBL_LAUNCH_SELECT_MESSAGE","LBL_DESKTOP_SELECT_WALLPAPER","LBL_DESKTOP_SELECT_THEME","LBL_SEARCH_TOOLTOP","LBL_SEARCH_PLACEHOLDER","LBL_SEARCH_WAIT","LBL_SEARCH_RESULT","LBL_FS_B","LBL_FS_M","LBL_FS_G","LBL_FS_KIB","LBL_FS_MIB","LBL_FS_GIB","LBL_TOP","LBL_LEFT","LBL_RIGHT","LBL_BOTTOM","LBL_MENU","LBL_ERROR","LBL_INFO","LBL_MESSAGE","LBL_WARNINIG","LBL_SUCCESS","LBL_FAILURE","LBL_WINDOW","LBL_WINDOWS","LBL_NOTIFICATION","LBL_NOTIFICATIONS","LBL_TRAY","LBL_NAME","LBL_TYPE","LBL_SIZE","LBL_FILE","LBL_NEW","LBL_OPEN","LBL_SAVE","LBL_SAVEAS","LBL_OK","LBL_ABORT","LBL_CANCEL","LBL_CLOSE","LBL_QUIT","LBL_YES","LBL_NO","LBL_GO","LBL_MKDIR","LBL_MKFILE","LBL_COPY","LBL_PASTE","LBL_CUT","LBL_MOVE","LBL_RENAME","LBL_DELETE","LBL_DOWNLOAD","LBL_REFRESH","LBL_RELOAD","LBL_HOME","LBL_VIEW","LBL_HELP","LBL_ABOUT","LBL_APPLICATION","LBL_APPLICATIONS","LBL_KILL","LBL_KILL_ALL","LBL_CONNECTION_FAILED","LBL_CONNECTION_FAILED_MESSAGE","LBL_MINIMIZE","LBL_MAXIMIZE","LBL_RESTORE","LBL_RAISE","LBL_SHADE","LBL_UNSHADE","LBL_ONTOP","LBL_RESIZE","LBL_BACK","LBL_FORWARD","LBL_UPLOAD","LBL_IMAGE","createAttributes","field","autocapitalize","autocomplete","oncreate","createFields","children","f","h","current","class","createView","logo","fields","header","createSide","middle","formFields","display","loading","action","onsubmit","actions","submit","create","ee","view","app","hidden","startHidden","setLoading","setError","placeholder","createUI","Notification","defaultLabel","timeout","sound","renderCustom","createNativeNotification","Notifications","notification","Packages","Preloader","signaled","foundApp","n","preloads","dialog","alert","fail","append","files","user","filterGroups","filterBlacklist","mimeType","meta","show","getPublicApi","blacklisted","notWhitelisted","open","resourceResolver","media","supportedMedia","themeResource","defaultTheme","getSoundThemeName","soundResource","defaultExtension","checkExtensions","use","soundsEnabled","Session","Tray","createWindow","WindowBehavior","save","load","fresh","script","trayApi","localeApi","translate","translatable","getLocale","setLocale","getCompatiblePackages","getPackages","launch","preload","running","resource","play","absoluteSrc","playSound","map","addContextMenuEntries","applySettings","getRect","Settings","iconMap","utils","pathJoin","resultView","results","onupdate","fs","onblur","oninput","onkeydown","onkeypress","hyperapp","query","status","visible","resetIndex","setNextIndex","setPreviousIndex","setResults","setQuery","hide","toggle","$element","promises","serverSettings","localStorageSettings","timer","ns","tree","simplejsonconf","sjc","handler","defaultTitle","oncontextmenu","update","u","draggable","effect","ondragstart","ondragend","setDragImage","hasDragImage","transferData","dragstart","dragend","droppable","ondragenter","ondragover","ondragleave","ondrop","retval","dragenter","dragleave","dragover","inside","drop","transfer","supportsNativeNotification","escapeHtml","div","createCssText","input","selectionStart","selectionEnd","getActiveElement","ae","supportsPassive","volume","audio","videoFormats","mp4","ogv","audioFormats","mp3","oga","reduce","elem","video","Notif","permission","encodeQueryData","bodyTypes","createFetchOptions","fetchOptions","headers","hasBody","stringBody","fetch","createErrorRejection","FALLBACK_LOCALE","prefixMap","nb","sprintfRegex","sprintfMatcher","getDefaultLocale","getUserLocale","defaultLocale","userLocale","getFromList","localizedList","fmt","useFormat","dateformat","nav","browserLanguage","langs","lang","cached","success","successes","res","failed","parentDirectory","sortFn","d","sortMap","mtime","ctime","atime","createSpecials","specials","stripped","createFileReader","humanFileSize","si","bytes","thresh","units","transformReaddir","showHiddenFiles","sortBy","sortDir","filterHidden","sorter","modify","humanSize","sortedSpecial","sortedDirectories","sortedFiles","transformArrayBuffer","getFileIcon","find","regexp","createFileIter","parent_id","pathToObject","handleDirectoryList","binary","move","eventNames","reconnected","reconnect","CASCADE_DISTANCE","isPassive","touchArg","passive","actionMap","maximize","minimize","close","clamper","maxDimension","minDimension","dimension","maxPosition","clamp","min","Math","max","resizer","directions","going","xDir","yDir","diffX","diffY","mover","rect","getCascadePosition","startX","startY","distance","newX","newY","pos","Number","getEvent","clientX","clientY","getScreenOrientation","screen","getMediaQueryName","orientation","ontouchstart","onmousedown","ondblclick","onicondblclick","oniconclick","ontrasitionend","hitButton","hitTitle","attributeSet","moveable","resizable","checkMove","resize","mousemove","transformedEvent","posX","posY","actionCallback","mouseup","minimized","maximized","minimizable","maximizable","closeable","MINIMUM_WIDTH","MINIMUM_HEIGHT","ONTOP_ZINDEX","windowCount","nextZindex","lastWindow","ontop","gravity","focusable","controls","shadowDOM","mediaQueries","small","medium","big","createState","moving","resizing","focused","zIndex","attrs","createWindowId","checkNextZindex","windexes","clampPosition","maxLeft","maxTop","renderCallback","mode","shadow","addClassNames","transformVectors","transform","parseFloat","tpl","behavior","hideButton","activeElement","container","innerBox","outerBox","topHeight","preventDefault","setNext","hasVertical","hasHorizontal","oldValue","$title","$icon","cssText"],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA,0BAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAgB,uBAAuB;AACvC;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;;ACtJAA,MAAM,CAACC,OAAP,GAAiB;AAEfC,QAAM,EAAE,GAFO;AAIfC,IAAE,EAAE;AACFC,mBAAe,EAAE,IADf;AAEFC,YAAQ,EAAE;AAFR,GAJW;AASfC,MAAI,EAAE;AACJC,MAAE,EAAE;AACFC,WAAK,EAAE,EADL;AAEFC,WAAK,EAAE;AAFL;AADA,GATS;AAgBfC,WAAS,EAAE;AACTC,SAAK,EAAE,SADE;AAET;AACA;AACAC,SAAK,EAAE,QAJE,CAKT;AACA;AACA;;AAPS,GAhBI;AA0BfC,SAAO,EAAE;AACPC,QAAI,EAAE,KADC;AAEPC,eAAW,E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,CACA,KADA,CACA,KADA,CACA,KADA,CACA,KADA,CACA,KADA,CACA,KADA,CAEA,SAFA,CAEA,UAFA,CAEA,OAFA,CAEA,OAFA,CAEA,KAFA,CAEA,MAFA,CAEA,MAFA,CAEA,QAFA,CAEA,WAFA,CAEA,SAFA,CAEA,UAFA,CAEA,UAFA,CALA,CASA,WACA,GADA,CACA,GADA,CACA,IADA,CACA,IADA,CACA,GADA,CACA,GADA,CACA,IADA,CACA,IADA,CATA,EAcA,sBACA,gBACA,WACA,sBACA,YACA,CACA,WACA,CAEA;;;;;;;GAQA,uBACA;AACA,+EAEA;AACA,iFAEA;AACA,6DAEA;AACA,8EAEA;AACA,4EACA,sDAEA;AACA,yDACA,8BACA,CAEA;;;;;;GAOA,4BACA,sBACA,YACA,MACA,CACA,WACA,CAEA;;;;GAKA,qBACA,eACA,aACA,CAEA,oBACA,kBACA,CAEA,0BACA,kBACA,CAEA,uBACA,cACA,CAEA,SAAW,QAAX,CAAW,IAAX,CAAW,GAAX,EACA,KADA,CACA,CADA,CACA,EADA,EACA,WADA,GAEA,EAIA,GAAM,IAAN,CAAgD,CAC5C,gCAAO,WACX,kBACK,CAFD,CAEC,IAFD,CAEC,OAFD,CAEC,mBAFD,CAEC,OAFD,CAEC,MAFD,EAEC,yFAFD,EAGD,CAJH,IAIS,EAKR,CAtND,EAsNC,IAtND,E;;kICdA,0BACC,KAA4D,wBAA5D,CACA,SADA,CAGA,CAJD,EAIC,IAJD,CAIC,WAAqB,aAEtB,wDACA,+BACA,iBADA,CAEA,CAHA,CAKA,gCACA,uCACA,CAEA,0BACA,sDAEA,wCACA,6BADA,EAEA,qBAFA,CAGA,CAEA;AACA,wDACA,uEAEA,+BACA,2CACA,CAEA,0BACA,gCACA,CAEA,sDACA,+DACA,2CADA,CAEA,KAFA,CAGA,CAEA,kDACA,mDACA,sDACE,CAFF,EAGA,CAEA,uCACA,yBACA,iBACA,CACA,yCACA,6DACA,CAEA,4CACA,mBACA,sCACA,0CACA,oEACG,CAFH,EAGA,CACA,0CACA,0DACA,oEACG,CAFH,IAEG,CACH,gFACA,CACE,CANF,EAOA,mBACA,CAEA,0CACA,oBACA,yDACA,uEAEA,wCACA,wCACA,4DAEA,+BACA,qDACE,CAFF,IAEE,mBACF,iDACE,CAFA,IAEA,CACF,0CACA,CACA,CAEA,mDACA,0BACA,qDACA,CAEA,wCACA,oCACE,CAFF,CAEE,EAFF,EAGA,CARA,CAUA,0BAEA,mBAEC,CAxGD,E;;4JCAA,qPAAO,4BACP,YACA,gBACA,4BAEA,8CAEA,mBACA,oBACA,mBACA,uBAAgC,QAAhC,EAA0C,CAC1C,wBACA,CACK,CAJL,IAIK,2CACL,oBACA,CACA,CAEA,gCACA,oBAA2B,QAA3B,CADA,CAEA,CACA,aADA,CAEA,yBAFA,CAGA,iBAHA,CAIA,8BAJA,CAFA,CAQA,CAEO,2CACP,eACA,uDACA,qDACA,iBACA,eACA,qBACA,6BACA,mEAEA,iBAEA,oBAEA,iCACA,OACA,uCADA,CAEA,aAFA,CAGA,uDACA;AAAA,CACA,iBADA,CAEA,uBAFA,CAGO,CAJP,CAHA,EASA,CAEA,2BACA,gCACA,2CADA,CAEA,WACA,IADA,CAEA,EAJA,CAKA,CAEA,kBACA,uBAEA,2BAEA,2BACA,8DACA,CAEA,kBAEA,yCACA,CAEA,0BACA,gBACA,gBACA,mBACA,CACA,CAEA,8BACA,WAEA,qCACA,qCAEA,WACA,CAEA,4CACA,cACA,gBACA,gBACA,cACA,oDADA,CAEA,KAHA,CAIA,4BACA,CACA,aACA,CAEA,sCACA,QACA,qBACA,yBACA,CACA,cACA,CAEA,gDACA,wBACA,iCACA,qBACA,4BACA,wBAEA,+BACA,yDACA,CAEA,GACA,QACA,kDADA,EAEA;AAHA,CAIA,CACA,eACA,4BACA,IADA,CAEA,mBAFA,CAGA,WAHA,CADA,EAOA,CAEA,cACA,CAtBA,CAuBW,CAxBX,CAwBW,GAxBX,CAwBW,YAxBX,CADA,CA0BA,mBACA,gBADA,CAEA,4BAFA,CAGA,gCAHA,CA1BA,CA+BA,CAEA,eACA,CAEA,sBACA,0BACA,CAEA,8BACA,qDACA,CAEA,4DACA,iBACK,CADL,IACK,oBACL,4BACA,4BACO,CAFP,IAEO,CACP,gEACA,oCACA,kDACA,eACA,mCACW,CAFX,IAEW,CACX,uBACA,CACA,CACA,CACK,CAdA,IAcA,CACL,iCACA,mBAEA,mBACA,2CACS,CAFT,IAES,CACT,kBACA,CAEA,2BAEA,UACA,cACA,6CACA,CACS,CAJT,IAIS,CACT,gDACA,CACO,CAlBP,IAkBO,IACP,iBACA,aADA,EAEA,aAFA,EAGA,kBAHA,EAIA,mBAJA,EAKA,kBALA,EAMA,MAPO,CAQP,CACA,mCACO,CAVA,IAUA,gCACP,iCACA,CAEA,+BACA,8BACA,CACA,CACA,CAEA,mCACA,YACA,+CACA,6BADA,CAEA,qCACA,yBACA,4BADA,CAEA,aAFA,CADA,CAKA,qCARA,CAUA,+BACA,eACA,wBACA,0BACA,6BACS,CAFT,EAGA,CAEA,YAAqB,sBAArB,CAA+C,GAA/C,CAA+C,CAC/C,oBACA,cACA,8CADA,CAEA,KAFA,CADA,EAMA,CAEA,4BACA,0DACA,CACA,CAEA,eACA,CAEA,+DACA,iDACA,GACA,oBACA,iCACA,aADA,CAEA,mBAHA,CADA,CAKA,CACA,gBACA,OADA,CAEA,IAFA,CAGA,gBAHA,CAIA,mBAJA,CAKA,KALA,EAOA,CACA,CAEA,2DACA,OACA,0BACA,0BACO,CAFP,EAGA,CACA,CAEA,sCACA,+BACA,eACA,YAAqB,sBAArB,CAA+C,GAA/C,CAA+C,CAC/C,uDACA,CAEA,yBACA,8BACA,CACA,CACA,eACA,CAEA,4CACA,gBACA,iDACA,CAEA,iDACA,OACA,iBACK,CAFL,IAEK,CACL,OACA,CACA,CAEA,kDACA,mBACK,CADL,IACK,qDACL,yCACA,wCAEA,kBACA,sCACA,CAEA,mBACK,CATA,IASA,4BACL,uBACK,CAFA,IAEA,CACL,cACA,OADA,CAEA,kBAFA,CAGA,eAHA,CAIA,kCAJA,EAOA,gBACA,gBACA,mBACA,iCACA,2BAEA,YAAqB,oBAArB,CAA6C,GAA7C,CAA6C,CAC7C,qCAEA,kCACA,iBACA,iDACA,CACA,CAEA,QACA,QAEA,yBACA,kCACA,wDAEA,qBACA,IACA,SACA,CAEA,oDACA,iBACA,qDACA,CACA,IACA,SACA,CAEA,8BACA,iBACA,+DACA,IACA,CACA,IACS,CANT,IAMS,CACT,mCAEA,oBACA,2DACA,IACW,CAHX,IAGW,kBACX,MACA,OADA,CAEA,iDAFA,CAGA,YAHA,CAIA,WAJA,CAKA,KALA,EAOW,CARA,IAQA,CACX,qDACA,CAEA,6BACA,IACA,CACA,CAEA,4BACA,iCACA,qDACA,CACA,IACA,CAEA,uBACA,iBACA,qDACA,CACA,CACA,CACA,eACA,CACA,C;;kJClZA;;;;;IAOA;AACA;AACA,iBACA,0CACC,CAFD,IAEC,yBAFD,CAIA;AACA;AACA,qCACA,8DADA,CAGA;AACA,gDAEA;AACA,+BAEA,eAAiB,mBAAO,CAAC,+DAAD,CAAxB,CAEA,eACA;AACA,gCACC,CAHD,IAGC,CACD;AACA,IACA,4BACG,UACH,+BACA,CACA,C;;uHCpCA;;;;;GAOA,kBACA,aAEA,wBACA,6BACA,cAAgB;AAChB,iDACA,kDACA,iEACA,2DAEA,sCACA,sCACA,YACA,aACA;AACA;AACA,uBACA,CACA;AACA;AACA,OACA,CAEA;AACA;AACA,6DAEA,gDACA;AACA,qFACA,sDACA,yCAEA;AACA;AACA,yDAEA,iBACA,CACA,kBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BACA,IACA,OAAc,aAAd,CAAc,oBAAd,EACK,YACL,OAAc,YAAd,CAAc,OAAd,EACA,CACA,CAEA,4CACA,4CACA,kCACA,kCAEA;AACA;AACA,wBAEA;AACA;AACA;AACA;AACA,sBACA,8BACA,uCAEA;AACA;AACA,yBACA,6CACA,YACA,CAFA,CAIA,mCACA,qEACA,4BACA,4BADA,EAEA,mDAFA,CAEA,CACA;AACA;AACA,0CACA,CAEA,4CACA,oDADA,CAEA,sEACA,yDACA,8CACA,iDADA,CAGA;AACA;AACA,0CACA,mDACA,gCACA,gCACA,CAFA,CAGK,CAJL,EAKA,CAEA,6CACA,wDACA,YACA,0BACA;AACA;AACA,mDAJA,CAKA,KALA,CAMA,CARA,CAUA,8BACA,0BACA,yDACK,CAFL,IAEK,CACL,4CACA,mCACA,8CACA,CACA,CACA,mCACA,cACA,CAXA,CAaA;AACA;AACA;AACA;AACA,4BACA,OAAY,WAAZ,EACA,CAFA,CAIA,kCACA,2CACA,qDACA,0BACA,mBACO,CAFP,IAEO,CACP,sBACA,uBACA,UACA,uBADA,EAEA,4BAFA,CAEA,CACA,2DACA,oCACW,CAFX,CAEW,cACX,mCACW,CAJX,EAKA,CAEA,uDACA;AACA;AACA;AACA,uBACA,gBACS,CANT,CAMS,gBACT;AACA;AACA,4CACS,CAVT,EAWA,CACA,CAEA,oBAEA,6BACA,sCACA,4CACA,kCACS,CAFT,EAGA,CAEA,uBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCACA,0BADA,CAEA;AACA;AACA,0BAJA,EAKA,4BAlBA,CAmBA,CAEA;AACA;AACA,qBACA,CAEA,+CACA,wDACA,YACA,CAFA,CAGA,oCAEA;AACA;AACA;AACA,yDACA,2BACA,sCADA,EAIA,4CACA;AADA,CAEA,kCACA,4CACS,CAFT,CAFA,CAKA,CAVA,CAYA,gDACA,iCAEA,mCACA,8BACA,gDACA,CAEA,8BACA,qBACA,UACA,CAEA;AACA;AACA,oBACA,CAEA,sBACA,gBAEA,YACA,8BACA,aACA,yDACA,mBACA,8CACA,sBACA,CACA,CAEA,4BACA;AACA;AACA,uCAES,CALT,IAKS,8BACT,mCACA,wBACA,kBACA,CAEA,uCAES,CARA,IAQA,+BACT,qCACA,CAEA,wBAEA,0CACA,2BACA;AACA;AACA,mBACA,iBADA,CAEA,sBAFA,CAIA,kCACA,SACA,CAEA,OACA,gBADA,CAEA,iBAFA,EAKS,CAhBT,IAgBS,2BACT,wBACA;AACA;AACA,uBACA,uBACA,CACA,CACA,CAxEA,CAyEA,CAEA;AACA;AACA;AACA;AACA,+CACA,6CACA,uBACA;AACA;AACA,sBAEA,6BACA,6BACA;AACA;AACA,wBACA,sBACA,sCAEA,6BACA;AACA;AACA,wBACA,CACA,CAEA,uBACA,0BACA,gDADA,EAEA,CAEA,wBACA,CAEA,0DAEA,0BACA,uBACA,uBACA,sBACA,wBACA,CAEA,oBAEA,UACA,uBACA,8DACA,sBACA,wBACA,CAEA,cACA;AACA;AACA,wCAEA;AACA,8BAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BACA,sBACA,sBACA,CAEK,CAnBL,IAmBK,CACL;AACA,YACA,CAEA;AACA;AACA,sBACA,wBACA,CAEA;AACA;AACA,0BAEA,kCAEA;AACA;AACA;AACA;AACA;AACA,8BACA,YACA,CAFA,CAIA,uBACA,2BACA,CAFA,CAIA,4BACA,WAAiB,cAAjB,EAEA,cACA,uBACA,CAEA,cACA,yBACA,uBACA,CAEA,4BACA,CAEA,8BACA,gCACA,qBACA,kBACA,wBACA,CAEA,8BACA;AACA;AACA;AACA,kBAAwB,aAAxB,GACA,uCACA,iBACA,CAEA,8BACA,YACA,uBACA,eACA,CACA,eAEA;AACA;AACA,uBACA,mBACA,mBACA,kBACA,eACA,gBACA,YACA,CACA,CAEA;AACA;AACA;AACA,eACA,YACA,CAfA,CAgBA,CAzBA,CA2BA,0BACA,aACA,4CACA,mBACA,qCACA,CAEA,sCACA,gBACA,CAEA,4BACA,8BACA,2BACA,4BACA,uBACA,gBACA,YACA,CACA,CAEA,qBACA,eAEA,YACA,CAbA,CAeA,sBACA,CACA,CAEA;AACA,OAAY,eAAZ,EACA,CACA,sBAEA,sBACA,OAAY,eAAZ,CAAY,SAAZ,EACA,CAEA,mBACA,mBADA,CAGA,8BACA,YACA,YACA;AACA;AACA,+BACA,gBACA,mBAEA,mBACA,mBAEA,uCAEA,mBACA,sBACA;AACA,yBACA,sBADA,EAEA,sBAFA,CAEA,CACA,qBACA,CACA,CACA,CACK,CA3BL,CA6BA,gBACA,eAEA,iCACA,oCACA,8BACA,qBACA,CAEA,iBACK,CAvCL,CAyCA,sCACA,cACA,gBACA,CAEA,iBACA,4BACA,oBACA,qBACA,iBAEA,WACA;AACA;AACA,sBACA,sBACA,CAEA,eACA,CAEA,mCAA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","file":"osjs.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"osjs\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors~osjs\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = {\n\n  public: '/',\n\n  ws: {\n    connectInterval: 5000,\n    disabled: false\n  },\n\n  auth: {\n    ui: {\n      title: '',\n      stamp: '0.0.1-prototype'\n    }\n  },\n\n  languages: {\n    en_EN: 'English',\n    //nb_NO: 'Norwegian, Norsk (bokmål)',\n    //vi_VN: 'Vietnamese, Vietnamese',\n    fr_FR: 'French',\n    //de_DE: 'German',\n    //sl_SI: 'Slovenian, Slovenščina',\n    //zh_CN: 'Chinese (simplified)'\n  },\n\n  desktop: {\n    lock: false,\n    contextmenu: {\n      enabled: false,\n      defaults: true\n    },\n\n    settings: {\n      font: 'Roboto',\n      theme: 'StandardDarkTheme',\n      sounds: 'FreedesktopSounds',\n      icons: 'GnomeIcons',\n      animations: false,\n      panels: [{\n        position: 'top',\n        items: [\n          {name: 'menu'},\n          {name: 'windows'},\n          {name: 'tray'},\n          {name: 'clock'}\n        ]\n      }],\n      widgets: [{\n        name: 'digitalclock'\n      }],\n      keybindings: [],\n      background: {\n        color: '#ffffff'\n      },\n      iconview: {\n        enabled: true\n      }\n    }\n  },\n\n  locale: {\n    format: {\n      shortDate: 'yyyy-mm-dd',\n      mediumDate: 'dS mmm yyyy',\n      longDate: 'dS mmmm yyyy',\n      fullDate: 'dddd dS mmmm yyyy',\n      shortTime: 'HH:MM',\n      longTime: 'HH:MM:ss'\n    }\n  },\n\n  vfs: {\n    defaultPath: 'home:/',\n    defaultAdapter: 'system',\n    adapters: {},\n    mountpoints: [{\n      name: 'home',\n      label: 'Home',\n      adapter: 'system',\n      icon: {name: 'user-home'},\n      attributes: {\n        visibility: 'restricted',\n        searchable: true,\n        readOnly: false\n      }\n    },{\n      name: 'shared',\n      label: 'Shared',\n      adapter: 'system',\n      icon: {name: 'user-home'},\n      attributes: {\n        visibility: 'global',\n        searchable: true,\n        readOnly: true\n      }\n    },\n    ],\n    icons: {\n      '^application/zip': {name: 'package-x-generic'},\n      '^application/javascript': {name: 'text-x-script'},\n      '^application/json': {name: 'text-x-script'},\n      '^application/x-python': {name: 'text-x-script'},\n      '^application/php': {name: 'text-x-script'},\n      '^application/pdf': {name: 'x-office-document'},\n      '^application/rtf': {name: 'x-office-document'},\n      '^application/msword': {name: 'x-office-document'},\n      '^application/(xz|tar|gzip)': {name: 'package-x-generic'},\n      '^text/css': {name: 'text-x-script'},\n      '^text/html': {name: 'text-html'},\n      '^(application|text)/xml': {name: 'text-html'},\n      '^application': {name: 'application-x-executable'},\n      '^text': {name: 'text-x-generic'},\n      '^audio': {name: 'audio-x-generic'},\n      '^video': {name: 'video-x-generic'},\n      '^image': {name: 'image-x-generic'}\n    }\n  }\n\n};\n","import {\n  Core,\n  CoreServiceProvider,\n  DesktopServiceProvider,\n  VFSServiceProvider,\n  NotificationServiceProvider,\n  SettingsServiceProvider,\n  AuthServiceProvider,\n} from './../custom-client';\n\nimport {PanelServiceProvider} from '@osjs/panels';\nimport {GUIServiceProvider} from '@osjs/gui';\nimport {DialogServiceProvider} from '@osjs/dialogs';\nimport {GapiServiceProvider} from '@osjs/gapi-provider';\nimport {WidgetServiceProvider} from '@osjs/widgets';\nimport * as config from './config.js';\n\nconst init = () => {\n  const osjs = new Core(config, {\n    omit: ['auth', 'languages', 'vfs.mountpoints']\n  });\n\n  osjs.register(CoreServiceProvider);\n  osjs.register(DesktopServiceProvider);\n  osjs.register(VFSServiceProvider);\n  osjs.register(NotificationServiceProvider);\n  osjs.register(SettingsServiceProvider, {before: true});\n  osjs.register(AuthServiceProvider, {before: true});\n  osjs.register(PanelServiceProvider);\n  osjs.register(DialogServiceProvider);\n  osjs.register(GUIServiceProvider);\n  osjs.register(WidgetServiceProvider);\n\n  osjs.boot();\n};\n\nwindow.addEventListener('DOMContentLoaded', () => init());\n","// extracted by mini-css-extract-plugin","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"osjsClient\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsClient\"] = factory();\n\telse\n\t\troot[\"osjsClient\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n * @preserve\n */\nimport './index.scss';\n\nimport Core from './src/core';\nimport Window from './src/window';\nimport Desktop from './src/desktop';\nimport Application from './src/application';\nimport Notification from './src/notification';\nimport Notifications from './src/notifications';\nimport WindowBehavior from './src/window-behavior';\nimport Auth from './src/auth';\nimport Login from './src/login';\nimport Websocket from './src/websocket';\n\nimport CoreServiceProvider from './src/providers/core';\nimport DesktopServiceProvider from './src/providers/desktop';\nimport NotificationServiceProvider from './src/providers/notifications';\nimport VFSServiceProvider from './src/providers/vfs';\nimport AuthServiceProvider from './src/providers/auth';\nimport SettingsServiceProvider from './src/providers/settings';\n\nexport {\n  Core,\n  Window,\n  Desktop,\n  Application,\n  Notification,\n  Notifications,\n  WindowBehavior,\n  Login,\n  Auth,\n  Websocket,\n\n  CoreServiceProvider,\n  DesktopServiceProvider,\n  NotificationServiceProvider,\n  VFSServiceProvider,\n  AuthServiceProvider,\n  SettingsServiceProvider\n};\n","// extracted by mini-css-extract-plugin","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","module.exports = require(\"regenerator-runtime\");\n"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsEventEmitter\"] = factory();\n\telse\n\t\troot[\"osjsEventEmitter\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2018, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Gets an array of event names based in input,\n * be it array or a comma separated string.\n */\nconst getEventNames = name => (name instanceof Array)\n  ? name\n  : String(name).replace(/\\s+/g, '').split(',');\n\n/**\n * Event Emitter\n *\n * @desc A standards compatible event handler (observer) with some sugar.\n */\nexport class EventEmitter {\n\n  /**\n   * Create Event Handler\n   * @param {String} [name] A name for logging\n   */\n  constructor(name = 'undefined') {\n    /**\n     * The name of the handler\n     * @type {String}\n     */\n    this.name = name;\n\n    /**\n     * Registered events\n     * @type {Object}\n     */\n    this.events = {};\n  }\n\n  /**\n   * Destroys all events\n   */\n  destroy() {\n    this.events = {};\n  }\n\n  /**\n   * Add an event handler\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {String|String[]} name Event name\n   * @param {Function} callback Callback function\n   * @param {Object} [options] Options\n   * @param {boolean} [options.persist] This even handler cannot be removed unless forced\n   * @param {boolean} [options.once] Fire only once\n   * @return {EventHandler} Returns current instance\n   */\n  on(name, callback, options = {}) {\n    options = options || {};\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Invalid callback');\n    }\n\n    getEventNames(name).forEach(n => {\n      if (!this.events[n]) {\n        this.events[n] = [];\n      }\n\n      this.events[n].push({callback, options});\n    });\n\n    return this;\n  }\n\n  /**\n   * Same as on() except it fires only once\n   * @return {EventHandler} Returns current instance\n   */\n  once(name, callback) {\n    return this.on(name, callback, {once: true});\n  }\n\n  /**\n   * Removes an event handler\n   *\n   * If no callback is provided, all events bound to given name will be removed.\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {String|String[]} name Event name\n   * @param {Function} [callback] Callback function\n   * @param {boolean} [force=false] Forces removal even if set to persis\n   * @return {EventHandler} Returns current instance\n   */\n  off(name, callback = null, force = false) {\n    getEventNames(name)\n      .filter(n => !!this.events[n])\n      .forEach(n => {\n        if (callback) {\n          let i = this.events[n].length;\n          while (i--) {\n            const ev = this.events[n][i];\n            const removable = !ev.options.persist || force;\n            if (removable && ev.callback === callback) {\n              this.events[n].splice(i, 1);\n            }\n          }\n        } else {\n          this.events[n] = force\n            ? []\n            : this.events[n].filter(({options}) => options.persist !== true);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Emits an event\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {String|String[]} name Event name\n   * @param {*} [args] Arguments\n   * @return {EventHandler} Returns current instance\n   */\n  emit(name, ...args) {\n    getEventNames(name).forEach(n => {\n      if (this.events[n]) {\n        let i = this.events[n].length;\n        while (i--) {\n          const {options, callback} = this.events[n][i];\n\n          try {\n            callback(...args);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          if (options && options.once) {\n            this.events[n].splice(i, 1);\n          }\n        }\n      }\n    });\n\n    return this;\n  }\n\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./graph\"));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlicmFyeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9saWJyYXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNkJBQXdCIn0=","module.exports = require(\"regenerator-runtime\");\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","'use strict';\n\nvar isObject = require('is-plain-object');\nvar unset = require('unset-value');\n\nmodule.exports = function omitDeep(value, keys) {\n  if (typeof value === 'undefined') {\n    return {};\n  }\n\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) {\n      value[i] = omitDeep(value[i], keys);\n    }\n    return value;\n  }\n\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (typeof keys === 'string') {\n    keys = [keys];\n  }\n\n  if (!Array.isArray(keys)) {\n    return value;\n  }\n\n  for (var j = 0; j < keys.length; j++) {\n    unset(value, keys[j]);\n  }\n\n  for (var key in value) {\n    if (value.hasOwnProperty(key)) {\n      value[key] = omitDeep(value[key], keys);\n    }\n  }\n\n  return value;\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mutex_1 = require(\"./mutex\");\n/**\n * Base dependency graph class.\n */\nvar Graph = /** @class */ (function () {\n    function Graph() {\n        this.nodes = {};\n        this.outgoingEdges = {};\n        this.incomingEdges = {};\n    }\n    /**\n     * Add a node to the graph.\n     * @param node Node object.\n     */\n    Graph.prototype.addNode = function (node) {\n        if (this.hasNode(node.name))\n            throw new Error(\"A node with the name of \\\"\" + node.name + \"\\\" already exists in the graph!\");\n        this.nodes[node.name] = node;\n        this.outgoingEdges[node.name] = [];\n        this.incomingEdges[node.name] = [];\n    };\n    /**\n     * Remove a node by name from the graph.\n     * @param name Node name.\n     */\n    Graph.prototype.removeNode = function (name) {\n        if (!this.hasNode(name))\n            throw new Error(\"A node with the name of \\\"\" + name + \"\\\" does not exist in the graph!\");\n        delete this.nodes[name];\n        delete this.outgoingEdges[name];\n        delete this.incomingEdges[name];\n        for (var dependent in this.incomingEdges) {\n            if (this.incomingEdges[dependent].includes(name))\n                this.incomingEdges[dependent].splice(dependent.indexOf(name), 1);\n        }\n        for (var dependency in this.outgoingEdges) {\n            if (this.outgoingEdges[dependency].includes(name))\n                this.outgoingEdges[dependency].splice(dependency.indexOf(name), 1);\n        }\n    };\n    /**\n     * Checks to see if the graph contains a Node by name.\n     * @param name Node name.\n     */\n    Graph.prototype.hasNode = function (name) {\n        return this.nodes.hasOwnProperty(name);\n    };\n    Object.defineProperty(Graph.prototype, \"size\", {\n        /**\n         * Returns the number of nodes in a graph.\n         */\n        get: function () {\n            return Object.keys(this.nodes).length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns the Node instance given a node name.\n     * @param name Node name.\n     */\n    Graph.prototype.getNode = function (name) {\n        if (this.hasNode(name))\n            return this.nodes[name];\n        throw new Error(\"Node \\\"\" + name + \"\\\" not found!\");\n    };\n    /**\n     *  Adds a node dependence. \"from\" is dependent on \"to\"\n     *  @param from Node name.\n     *  @param to  Node name.\n     */\n    Graph.prototype.addDependency = function (from, to) {\n        if (!this.hasNode(from))\n            throw new Error(\"Node does not exist: \" + from);\n        if (!this.hasNode(to))\n            throw new Error(\"Node does not exist: \" + to);\n        if (from === to)\n            throw new Error(\"Cannot add self dependency: \" + to);\n        if (!this.outgoingEdges[from].includes(to)) {\n            this.outgoingEdges[from].push(to);\n        }\n        if (!this.incomingEdges[to].includes(from)) {\n            this.incomingEdges[to].push(from);\n        }\n    };\n    /**\n     * Removes a node dependence. \"from\" is no longer dependent on \"to\".\n     * @param from Node name.\n     * @param to  Node name.\n     * @todo Test this function.\n     */\n    Graph.prototype.removeDependency = function (from, to) {\n        console.warn('removeDependency() has not been tested.');\n        if (!this.hasNode(from))\n            throw new Error(\"Node does not exist: \" + from);\n        if (!this.hasNode(to))\n            throw new Error(\"Node does not exist: \" + to);\n        if (from === to)\n            throw new Error(\"Cannot remove self dependency: \" + to);\n        if (!this.outgoingEdges[from].includes(to)) {\n            this.outgoingEdges[from].splice(this.outgoingEdges[from].indexOf(to), 1);\n        }\n        if (!this.incomingEdges[to].includes(from)) {\n            this.incomingEdges[to].splice(this.incomingEdges[to].indexOf(to), 1);\n        }\n    };\n    /**\n     * Get dependency node names for a Node by name. (Required nodes for this node to execute).\n     * @param name Node name.\n     */\n    Graph.prototype.dependenciesOf = function (name) {\n        return this.outgoingEdges[name];\n    };\n    /**\n     * Get dependents node names for a Node by name. (Nodes that require this node to complete).\n     * @param name Node name.\n     */\n    Graph.prototype.dependentsOf = function (name) {\n        return this.incomingEdges[name];\n    };\n    /**\n     * Breadth first search.\n     */\n    Graph.prototype.traverse = function () {\n        var _this = this;\n        // Clear all complete node mutexes.\n        Object.keys(this.nodes).map(function (name) { return _this.getNode(name).clearMutex(); });\n        // Visiting a node recursively calls visit on each node's dependents.\n        var visit = function (node) {\n            // First await all dependencies\n            return Promise.all(_this.dependenciesOf(node.name).map(function (dependencyName) { return _this.nodes[dependencyName].awaitData(); }))\n                .then(function () {\n                node.signalDependenciesReady();\n                if (_this.dependentsOf(node.name).length > 0) {\n                    // Then recursively visit all dependents\n                    return Promise.all(_this.dependentsOf(node.name).map(function (dependentName) { return visit(_this.getNode(dependentName)); }));\n                }\n                else {\n                    // node has no dependents so await data\n                    return node.awaitData();\n                }\n            });\n        };\n        // Find nodes with no dependencies\n        var rootNodeNames = Object.keys(this.nodes).filter(function (name) { return _this.dependenciesOf(name).length === 0; });\n        if (rootNodeNames.length === 0 && Object.keys(this.nodes).length > 0)\n            return Promise.reject(new Error('The graph is circular. Cannot traverse graph due to no root node.'));\n        // Start recursive traversal from root nodes.\n        return Promise.all(rootNodeNames.map(function (name) { return visit(_this.nodes[name]); }));\n    };\n    /**\n     * Clears the value of a node and the values of dependent nodes\n     * @param name Node name.\n     */\n    Graph.prototype.clearNodeAndDependents = function (name) {\n        var _this = this;\n        var node = this.getNode(name);\n        var visitAndClear = function (node) {\n            if (node.hasData()) {\n                node.clearData();\n                return Promise.all(_this.dependentsOf(node.name).map(function (dependentName) { return visitAndClear(_this.getNode(dependentName)); }));\n            }\n            else {\n                return Promise.resolve();\n            }\n        };\n        return visitAndClear(node);\n    };\n    /**\n     * Resets the graph by resetting each node in the graph.\n     */\n    Graph.prototype.reset = function () {\n        for (var name in this.nodes) {\n            this.nodes[name].reset();\n        }\n    };\n    /**\n     * Prints graph nodes and node dependents.\n     */\n    Graph.prototype.ls = function () {\n        for (var name in this.nodes) {\n            console.log(name);\n            console.log(this.dependentsOf(name));\n        }\n    };\n    return Graph;\n}());\nexports.Graph = Graph;\nvar Node = /** @class */ (function () {\n    function Node(name, promise) {\n        this.locked = false;\n        this._name = name;\n        this._promise = promise;\n    }\n    Object.defineProperty(Node.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Await data.\n     * @returns A `Promise<T | null>` that resolves when the node's data is ready.\n     */\n    Node.prototype.awaitData = function () {\n        var _this = this;\n        if (!this.mutex) {\n            this.mutex = new mutex_1.Mutex(function () { return _this._data !== undefined; });\n        }\n        return new Promise(function (resolve, reject) {\n            _this.mutex.await(function (error) {\n                if (error)\n                    return reject(error);\n                resolve(_this._data);\n            });\n        });\n    };\n    Node.prototype.signalDependenciesReady = function () {\n        var _this = this;\n        if (!this.mutex) {\n            this.mutex = new mutex_1.Mutex(function () { return _this._data !== undefined; });\n        }\n        if (this._data === undefined) {\n            // Only allow to _promise once\n            if (this.locked === true)\n                return;\n            this.locked = true;\n            var promise = this._promise();\n            if (promise === undefined)\n                throw new Error(\"Node \\\"\" + this._name + \"\\\" has undefined promise.\");\n            promise.then(function (data) {\n                _this._data = data;\n                _this.locked = false;\n                _this.mutex.ready();\n            }).catch(function (error) {\n                _this._data = null;\n                _this.locked = false;\n                _this.mutex.ready(error);\n            });\n        }\n        else {\n            // Allow _data to be set externally from promise\n            this.mutex.ready();\n        }\n    };\n    Node.prototype.setData = function (data) {\n        this._data = data;\n        this.signalDependenciesReady();\n    };\n    /**\n     * Resets node. Clears all node data and resets its mutex.\n     */\n    Node.prototype.reset = function () {\n        this.clearData();\n        this.clearMutex();\n    };\n    Node.prototype.clearMutex = function () {\n        if (this.hasData())\n            this.mutex = undefined;\n    };\n    Node.prototype.hasData = function () {\n        return this._data !== undefined;\n    };\n    Node.prototype.clearData = function () {\n        this._data = undefined;\n    };\n    return Node;\n}());\nexports.Node = Node;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ3JhcGgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBZ0M7QUFFaEM7O0dBRUc7QUFDSDtJQUFBO1FBQ1ksVUFBSyxHQUE2QixFQUFFLENBQUM7UUFDckMsa0JBQWEsR0FBaUMsRUFBRSxDQUFDO1FBQ2pELGtCQUFhLEdBQWlDLEVBQUUsQ0FBQztJQWlMN0QsQ0FBQztJQS9LRzs7O09BR0c7SUFDSSx1QkFBTyxHQUFkLFVBQWUsSUFBVTtRQUNyQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQTRCLElBQUksQ0FBQyxJQUFJLG9DQUFnQyxDQUFDLENBQUM7UUFDcEgsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLDBCQUFVLEdBQWpCLFVBQWtCLElBQVk7UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBNEIsSUFBSSxvQ0FBZ0MsQ0FBQyxDQUFDO1FBQzNHLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLEtBQUssSUFBTSxTQUFTLElBQUksSUFBSSxDQUFDLGFBQWEsRUFB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","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Mutex = /** @class */ (function () {\n    function Mutex(readyTest) {\n        this.readyTest = readyTest;\n    }\n    Mutex.prototype.await = function (callback) {\n        if (this.readyTest() === true) {\n            callback();\n        }\n        else {\n            this.waiting = this.waiting || [];\n            this.waiting.push(callback);\n        }\n    };\n    // called when we know what we are waiting for is ready\n    Mutex.prototype.ready = function (error) {\n        if (this.waiting)\n            this.waiting.forEach(function (callback) { return callback(error); });\n        delete this.waiting;\n    };\n    return Mutex;\n}());\nexports.Mutex = Mutex;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbXV0ZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtJQUtJLGVBQW1CLFNBQXdCO1FBQ3ZDLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQy9CLENBQUM7SUFFTSxxQkFBSyxHQUFaLFVBQWEsUUFBZ0M7UUFDekMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzNCLFFBQVEsRUFBRSxDQUFDO1NBQ2Q7YUFBTTtZQUNILElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7WUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDL0I7SUFDTCxDQUFDO0lBRUQsdURBQXVEO0lBQ2hELHFCQUFLLEdBQVosVUFBYSxLQUFhO1FBQ3RCLElBQUksSUFBSSxDQUFDLE9BQU87WUFDWixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFDLFFBQVEsSUFBSyxPQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBZixDQUFlLENBQUMsQ0FBQztRQUN4RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUNMLFlBQUM7QUFBRCxDQUFDLEFBeEJELElBd0JDO0FBeEJZLHNCQUFLIn0=","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * unset-value <https://github.com/jonschlinkert/unset-value>\n *\n * Copyright (c) 2015, 2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\nvar has = require('has-value');\n\nmodule.exports = function unset(obj, prop) {\n  if (!isObject(obj)) {\n    throw new TypeError('expected an object.');\n  }\n  if (obj.hasOwnProperty(prop)) {\n    delete obj[prop];\n    return true;\n  }\n\n  if (has(obj, prop)) {\n    var segs = prop.split('.');\n    var last = segs.pop();\n    while (segs.length && segs[segs.length - 1].slice(-1) === '\\\\') {\n      last = segs.pop().slice(0, -1) + '.' + last;\n    }\n    while (segs.length) obj = obj[prop = segs.shift()];\n    return (delete obj[last]);\n  }\n  return true;\n};\n","/*!\n * has-value <https://github.com/jonschlinkert/has-value>\n *\n * Copyright (c) 2014-2016, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\nvar hasValues = require('has-values');\nvar get = require('get-value');\n\nmodule.exports = function(obj, prop, noZero) {\n  if (isObject(obj)) {\n    return hasValues(get(obj, prop), noZero);\n  }\n  return hasValues(obj, prop);\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isArray = require('isarray');\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && isArray(val) === false;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * has-values <https://github.com/jonschlinkert/has-values>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function hasValue(o, noZero) {\n  if (o === null || o === undefined) {\n    return false;\n  }\n\n  if (typeof o === 'boolean') {\n    return true;\n  }\n\n  if (typeof o === 'number') {\n    if (o === 0 && noZero === true) {\n      return false;\n    }\n    return true;\n  }\n\n  if (o.length !== undefined) {\n    return o.length !== 0;\n  }\n\n  for (var key in o) {\n    if (o.hasOwnProperty(key)) {\n      return true;\n    }\n  }\n  return false;\n};\n","/*!\n * get-value <https://github.com/jonschlinkert/get-value>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nmodule.exports = function(obj, prop, a, b, c) {\n  if (!isObject(obj) || !prop) {\n    return obj;\n  }\n\n  prop = toString(prop);\n\n  // allowing for multiple properties to be passed as\n  // a string or array, but much faster (3-4x) than doing\n  // `[].slice.call(arguments)`\n  if (a) prop += '.' + toString(a);\n  if (b) prop += '.' + toString(b);\n  if (c) prop += '.' + toString(c);\n\n  if (prop in obj) {\n    return obj[prop];\n  }\n\n  var segs = prop.split('.');\n  var len = segs.length;\n  var i = -1;\n\n  while (obj && (++i < len)) {\n    var key = segs[i];\n    while (key[key.length - 1] === '\\\\') {\n      key = key.slice(0, -1) + '.' + segs[++i];\n    }\n    obj = obj[key];\n  }\n  return obj;\n};\n\nfunction isObject(val) {\n  return val !== null && (typeof val === 'object' || typeof val === 'function');\n}\n\nfunction toString(val) {\n  if (!val) return '';\n  if (Array.isArray(val)) {\n    return val.join('.');\n  }\n  return val;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {Graph, Node} from 'async-dependency-graph';\n\nexport const resolveTreeByKey = (tree, key, defaultValue) => {\n  let result;\n\n  try {\n    result = key\n      .split(/\\./g)\n      .reduce((result, key) => result[key], Object.assign({}, tree));\n  } catch (e) { /* noop */ }\n\n  return typeof result === 'undefined' ? defaultValue : result;\n};\n\nconst each = (list, method) => Promise.all(list.map(p => {\n  try {\n    return p.provider[method]();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}))\n  .catch(err => console.warn(err));\n\nexport const providerHandler = (core) => {\n  let instances = {};\n  let providers = [];\n  let registry = [];\n\n  const createGraph = (list, method) => {\n    const graph = new Graph();\n    const provides = list.map(p => typeof p.provider.provides === 'function' ? p.provider.provides() : []);\n    const dependsOnIndex = wants => provides.findIndex(arr => arr.some(a => wants.indexOf(a) !== -1));\n\n    list.forEach((p, i) => {\n      graph.addNode(new Node(String(i), () => {\n        try {\n          return Promise.resolve(p.provider[method]());\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }));\n    });\n\n    list.forEach((p, i) => {\n      const dependsOptions = p.options.depends instanceof Array\n        ? p.options.depends\n        : [];\n\n      const dependsInstance = typeof p.provider.depends === 'function'\n        ? p.provider.depends()\n        : [];\n\n      const depends = [...dependsOptions, ...dependsInstance];\n      if (depends.length > 0) {\n        const dindex = dependsOnIndex(depends);\n        if (dindex !== -1) {\n          graph.addDependency(String(i), String(dindex));\n        }\n      }\n    });\n\n    return graph.traverse()\n      .catch(e => console.warn(e));\n  };\n\n  const handle = list => createGraph(list, 'init')\n    .then(() => createGraph(list, 'start'));\n\n\n  const has = name => registry.findIndex(p => p.name === name) !== -1;\n\n  const destroy = () => {\n    each(providers, 'destroy');\n\n    instances = {};\n    registry = [];\n  };\n\n  const init = (before) =>\n    handle(before\n      ? providers.filter(p => p.options.before)\n      : providers.filter(p => !p.options.before));\n\n  const register = (ref, options) => {\n    try {\n      providers.push({\n        provider: new ref(core, options.args),\n        options\n      });\n    } catch (e) {\n      console.error('Provider register error', e);\n    }\n  };\n\n  const bind = (name, singleton, callback) => {\n    core.logger.info('Provider binding', name);\n\n    registry.push({\n      singleton,\n      name,\n      make(...args) {\n        return callback(...args);\n      }\n    });\n  };\n\n  const make = (name, ...args) => {\n    const found = registry.find(p => p.name === name);\n    if (!found) {\n      throw new Error(`Provider '${name}' not found`);\n    }\n\n    if (!found.singleton) {\n      return found.make(...args);\n    }\n\n    if (!instances[name]) {\n      if (found) {\n        instances[name] = found.make(...args);\n      }\n    }\n\n    return instances[name];\n  };\n\n  return {register, init, bind, has, make, destroy};\n};\n","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {resolveTreeByKey, providerHandler} from './utils.js';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport merge from 'deepmerge';\nimport omitDeep from 'omit-deep';\n\n/**\n * Core\n *\n * @desc Main class for OS.js service providers and bootstrapping.\n */\nexport class CoreBase extends EventEmitter {\n\n  /**\n   * Create core instance\n   * @param {Object} defaultConfiguration Default configuration\n   * @param {Object} configuration Configuration given\n   * @param {Object} options Options\n   */\n  constructor(defaultConfiguration, configuration, options) {\n    super('Core');\n\n    // https://github.com/KyleAMathews/deepmerge#webpack-bug\n    const merger = merge.default ? merge.default : merge;\n    const omitted = omitDeep(defaultConfiguration, options.omit || []);\n\n    this.logger = console;\n    this.configuration = merger(omitted, configuration);\n    this.options = options;\n    this.booted = false;\n    this.started = false;\n    this.destroyed = false;\n    this.providers = providerHandler(this);\n  }\n\n  /**\n   * Destroy core instance\n   */\n  destroy() {\n    if (this.destroyed) {\n      return false;\n    }\n\n    this.booted = false;\n    this.destroyed = true;\n    this.started = false;\n    this.providers.destroy();\n\n    super.destroy();\n\n    return true;\n  }\n\n  /**\n   * Boots up OS.js\n   */\n  boot() {\n    if (this.booted) {\n      return Promise.resolve(true);\n    }\n\n    this.started = false;\n    this.destroyed = false;\n    this.booted = true;\n\n    return this.providers.init(true)\n      .then(() => true);\n  }\n\n  /**\n   * Starts all core services\n   */\n  start() {\n    if (this.started) {\n      return Promise.resolve(true);\n    }\n\n    this.started = true;\n\n    return this.providers.init(false)\n      .then(() => true);\n  }\n\n  /**\n   * Gets a configuration entry by key\n   *\n   * @param {String} key The key to get the value from\n   * @param {*} [defaultValue] If result is undefined, return this instead\n   * @see {resolveTreeByKey}\n   * @return {*}\n   */\n  config(key, defaultValue) {\n    return key\n      ? resolveTreeByKey(this.configuration, key, defaultValue)\n      : Object.assign({}, this.configuration);\n  }\n\n  /**\n   * Register a service provider\n   *\n   * @param {Class} ref A class reference\n   * @param {Object} [options] Options for handling of provider\n   * @param {Boolean} [options.before] Load this provider early\n   * @param {Object} [options.args] Arguments to send to the constructor\n   */\n  register(ref, options = {}) {\n    this.providers.register(ref, options);\n  }\n\n  /**\n   * Register a instanciator provider\n   *\n   * @param {String} name Provider name\n   * @param {Function} callback Callback that returns an instance\n   */\n  instance(name, callback) {\n    this.providers.bind(name, false, callback);\n  }\n\n  /**\n   * Register a singleton provider\n   *\n   * @param {String} name Provider name\n   * @param {Function} callback Callback that returns an instance\n   */\n  singleton(name, callback) {\n    this.providers.bind(name, true, callback);\n  }\n\n  /**\n   * Create an instance of a provided service\n   *\n   * @param {String} name Service name\n   * @param {*} args Constructor arguments\n   * @return {*} An instance of a service\n   */\n  make(name, ...args) {\n    return this.providers.make(name, ...args);\n  }\n\n  /**\n   * Check if a service exists\n   * @param {String} name Provider name\n   * @return {Boolean}\n   */\n  has(name) {\n    return this.providers.has(name);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Service Provider Interface\n *\n * @desc Provides a basic Service Provider interface for OS.js\n *\n * @interface\n */\nexport class ServiceProvider {\n\n  /**\n   * Constructor\n   * @param {Core} core Core reference\n   */\n  constructor(core, options = {}) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n    this.options = options;\n  }\n\n  /**\n   * A list of services this provider can create\n   * @return {string[]}\n   */\n  provides() {\n    return [];\n  }\n\n  /**\n   * A list of services this provider depends on\n   * @return {string[]}\n   */\n  depends() {\n    return [];\n  }\n\n  /**\n   * Initializes provider\n   */\n  async init() {\n  }\n\n  /**\n   * Starts provider\n   */\n  start() {\n  }\n\n  /**\n   * Destroys provider\n   */\n  destroy() {\n  }\n\n}\n","/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport * from './src/core.js';\nexport * from './src/service-provider.js';\nexport {EventHandler as EventEmitter} from '@osjs/event-emitter';\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsEventEmitter\"] = factory();\n\telse\n\t\troot[\"osjsEventEmitter\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Gets an array of event names based in input,\n * be it array or a comma separated string.\n */\nconst getEventNames = name => (name instanceof Array)\n  ? name\n  : String(name).replace(/\\s+/g, '').split(',');\n\n/**\n * Event Emitter\n *\n * @desc A standards compatible event handler (observer) with some sugar.\n */\nexport class EventEmitter {\n\n  /**\n   * Create Event Handler\n   * @param {String} [name] A name for logging\n   */\n  constructor(name = 'undefined') {\n    /**\n     * The name of the handler\n     * @type {String}\n     */\n    this.name = name;\n\n    /**\n     * Registered events\n     * @type {Object}\n     */\n    this.events = {};\n  }\n\n  /**\n   * Destroys all events\n   */\n  destroy() {\n    this.events = {};\n  }\n\n  /**\n   * Add an event handler\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {String|String[]} name Event name\n   * @param {Function} callback Callback function\n   * @param {Object} [options] Options\n   * @param {boolean} [options.persist] This even handler cannot be removed unless forced\n   * @param {boolean} [options.once] Fire only once\n   * @return {EventHandler} Returns current instance\n   */\n  on(name, callback, options = {}) {\n    options = options || {};\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Invalid callback');\n    }\n\n    getEventNames(name).forEach(n => {\n      if (!this.events[n]) {\n        this.events[n] = [];\n      }\n\n      this.events[n].push({callback, options});\n    });\n\n    return this;\n  }\n\n  /**\n   * Same as on() except it fires only once\n   * @return {EventHandler} Returns current instance\n   */\n  once(name, callback) {\n    return this.on(name, callback, {once: true});\n  }\n\n  /**\n   * Removes an event handler\n   *\n   * If no callback is provided, all events bound to given name will be removed.\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {String|String[]} name Event name\n   * @param {Function} [callback] Callback function\n   * @param {boolean} [force=false] Forces removal even if set to persis\n   * @return {EventHandler} Returns current instance\n   */\n  off(name, callback = null, force = false) {\n    getEventNames(name)\n      .filter(n => !!this.events[n])\n      .forEach(n => {\n        if (callback) {\n          let i = this.events[n].length;\n          while (i--) {\n            const ev = this.events[n][i];\n            const removable = !ev.options.persist || force;\n            if (removable && ev.callback === callback) {\n              this.events[n].splice(i, 1);\n            }\n          }\n        } else {\n          this.events[n] = force\n            ? []\n            : this.events[n].filter(({options}) => options.persist === true);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Emits an event\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {String|String[]} name Event name\n   * @param {*} [args] Arguments\n   * @return {EventHandler} Returns current instance\n   */\n  emit(name, ...args) {\n    getEventNames(name).forEach(n => {\n      if (this.events[n]) {\n        let i = this.events[n].length;\n        while (i--) {\n          const {options, callback} = this.events[n][i];\n\n          try {\n            callback(...args);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          if (options && options.once) {\n            this.events[n].splice(i, 1);\n          }\n        }\n      }\n    });\n\n    return this;\n  }\n\n}\n","/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n'use strict';\n\nexports.match = matchQuery;\nexports.parse = parseQuery;\n\n// -----------------------------------------------------------------------------\n\nvar RE_MEDIA_QUERY     = /(?:(only|not)?\\s*([^\\s\\(\\)]+)(?:\\s*and)?\\s*)?(.+)?/i,\n    RE_MQ_EXPRESSION   = /\\(\\s*([^\\s\\:\\)]+)\\s*(?:\\:\\s*([^\\s\\)]+))?\\s*\\)/,\n    RE_MQ_FEATURE      = /^(?:(min|max)-)?(.+)/,\n    RE_LENGTH_UNIT     = /(em|rem|px|cm|mm|in|pt|pc)?$/,\n    RE_RESOLUTION_UNIT = /(dpi|dpcm|dppx)?$/;\n\nfunction matchQuery(mediaQuery, values) {\n    return parseQuery(mediaQuery).some(function (query) {\n        var inverse = query.inverse;\n\n        // Either the parsed or specified `type` is \"all\", or the types must be\n        // equal for a match.\n        var typeMatch = query.type === 'all' || values.type === query.type;\n\n        // Quit early when `type` doesn't match, but take \"not\" into account.\n        if ((typeMatch && inverse) || !(typeMatch || inverse)) {\n            return false;\n        }\n\n        var expressionsMatch = query.expressions.every(function (expression) {\n            var feature  = expression.feature,\n                modifier = expression.modifier,\n                expValue = expression.value,\n                value    = values[feature];\n\n            // Missing or falsy values don't match.\n            if (!value) { return false; }\n\n            switch (feature) {\n                case 'orientation':\n                case 'scan':\n                    return value.toLowerCase() === expValue.toLowerCase();\n\n                case 'width':\n                case 'height':\n                case 'device-width':\n                case 'device-height':\n                    expValue = toPx(expValue);\n                    value    = toPx(value);\n                    break;\n\n                case 'resolution':\n                    expValue = toDpi(expValue);\n                    value    = toDpi(value);\n                    break;\n\n                case 'aspect-ratio':\n                case 'device-aspect-ratio':\n                case /* Deprecated */ 'device-pixel-ratio':\n                    expValue = toDecimal(expValue);\n                    value    = toDecimal(value);\n                    break;\n\n                case 'grid':\n                case 'color':\n                case 'color-index':\n                case 'monochrome':\n                    expValue = parseInt(expValue, 10) || 1;\n                    value    = parseInt(value, 10) || 0;\n                    break;\n            }\n\n            switch (modifier) {\n                case 'min': return value >= expValue;\n                case 'max': return value <= expValue;\n                default   : return value === expValue;\n            }\n        });\n\n        return (expressionsMatch && !inverse) || (!expressionsMatch && inverse);\n    });\n}\n\nfunction parseQuery(mediaQuery) {\n    return mediaQuery.split(',').map(function (query) {\n        query = query.trim();\n\n        var captures    = query.match(RE_MEDIA_QUERY),\n            modifier    = captures[1],\n            type        = captures[2],\n            expressions = captures[3] || '',\n            parsed      = {};\n\n        parsed.inverse = !!modifier && modifier.toLowerCase() === 'not';\n        parsed.type    = type ? type.toLowerCase() : 'all';\n\n        // Split expressions into a list.\n        expressions = expressions.match(/\\([^\\)]+\\)/g) || [];\n\n        parsed.expressions = expressions.map(function (expression) {\n            var captures = expression.match(RE_MQ_EXPRESSION),\n                feature  = captures[1].toLowerCase().match(RE_MQ_FEATURE);\n\n            return {\n                modifier: feature[1],\n                feature : feature[2],\n                value   : captures[2]\n            };\n        });\n\n        return parsed;\n    });\n}\n\n// -- Utilities ----------------------------------------------------------------\n\nfunction toDecimal(ratio) {\n    var decimal = Number(ratio),\n        numbers;\n\n    if (!decimal) {\n        numbers = ratio.match(/^(\\d+)\\s*\\/\\s*(\\d+)$/);\n        decimal = numbers[1] / numbers[2];\n    }\n\n    return decimal;\n}\n\nfunction toDpi(resolution) {\n    var value = parseFloat(resolution),\n        units = String(resolution).match(RE_RESOLUTION_UNIT)[1];\n\n    switch (units) {\n        case 'dpcm': return value / 2.54;\n        case 'dppx': return value * 96;\n        default    : return value;\n    }\n}\n\nfunction toPx(length) {\n    var value = parseFloat(length),\n        units = String(length).match(RE_LENGTH_UNIT)[1];\n\n    switch (units) {\n        case 'em' : return value * 16;\n        case 'rem': return value * 16;\n        case 'cm' : return value * 96 / 2.54;\n        case 'mm' : return value * 96 / 2.54 / 10;\n        case 'in' : return value * 96;\n        case 'pt' : return value * 72;\n        case 'pc' : return value * 72 / 12;\n        default   : return value;\n    }\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.deepmerge = factory());\n}(this, (function () { 'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nreturn deepmerge_1;\n\n})));\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","!function(n,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.simplejsonconf=t():n.simplejsonconf=t()}(window,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&\"object\"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,\"default\",{enumerable:!0,value:n}),2&t&&\"string\"!=typeof n)for(var o in n)r.d(e,o,function(t){return n[t]}.bind(null,o));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,\"a\",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p=\"\",r(r.s=3)}([function(n,t){function r(n){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":typeof n})(n)}function e(t){return\"function\"==typeof Symbol&&\"symbol\"===r(Symbol.iterator)?n.exports=e=function(n){return r(n)}:n.exports=e=function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":r(n)},e(t)}n.exports=e},function(n,t,r){var e=r(5),o=r(6),u=r(7);n.exports=function(n,t){return e(n)||o(n,t)||u()}},function(n,t){n.exports=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}},function(n,t,r){n.exports=r(4)},function(n,t,r){\"use strict\";r.r(t);var e=r(1),o=r.n(e),u=r(2),i=r.n(u),f=r(0),c=r.n(f),a=function(n){return void 0===n?n:JSON.parse(JSON.stringify(n))},l=function(n){return n.split(/\\./g)},s=function(n){return void 0===n||null===n},p=function(n){return!!n&&\"object\"===c()(n)&&!Array.isArray(n)},y=function n(t,r){if(p(t)&&p(r)){for(var e in r)p(r[e])?(t[e]&&c()(t[e])===c()(r[e])||Object.assign(t,i()({},e,{})),n(t[e],r[e])):Object.assign(t,i()({},e,r[e]));return t}return r},b=function(n,t,r){if(s(t))return n;var e;try{e=l(t).reduce(function(n,t){return n[t]},Object.assign({},n))}catch(n){}return void 0===e?r:e},d=function(n,t,r){var e=l(t),o=e.length;if(r)for(var u=n,i=0;i<o;i++){var f=e[i];void 0===u[f]&&(u[f]={}),u=u[f]}var c=1===o?e[0]:e.pop();return[1===o?n:b(n,e.join(\".\")),c]};t.default=function(n){var t,r=function(n){return t=a(n)};return r(n),{get:function(n,r){return a(b(t,n,r))},set:function(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(function(n,t,r,e){if(!1!==e.parse)try{r=void 0===r?r:JSON.parse(r)}catch(n){}if(s(t)){var u=!1!==e.merge?y(n,r):r;return Object.assign(n,u)}var i=d(n,t,!0),f=o()(i,2),c=f[0],a=f[1];s(c[a])&&(c[a]={});var l=!1!==e.merge?y(c[a],r):r;return c[a]=l,l}(t,n,r,e))},push:function(n,r){return a(function(n,t,r){var e=b(n,t);if(!Array.isArray(e))throw new Error(\"The key '\".concat(t,\"' is not an array\"));return e.push(r),e}(t,n,r))},remove:function(n){return a(function(n,t){var r=d(n,t),e=o()(r,2),u=e[0],i=e[1];return void 0!==u[i]&&(u instanceof Array?u.splice(u.indexOf(u[i]),1):delete u[i]),u}(t,n))},reset:function(t){return a(r(t||n))},toString:function(){return JSON.stringify(t)}}}},function(n,t){n.exports=function(n){if(Array.isArray(n))return n}},function(n,t){n.exports=function(n,t){var r=[],e=!0,o=!1,u=void 0;try{for(var i,f=n[Symbol.iterator]();!(e=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==f.return||f.return()}finally{if(o)throw u}}return r}},function(n,t){n.exports=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}])});\n//# sourceMappingURL=main.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst localStorageAuth = (core, options) => ({\n  login: (values) => Promise.resolve(values)\n});\n\nexport default localStorageAuth;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst serverAuth = (core, options) => {\n  const request = (endpoint, params = {}) => core.request(endpoint, {\n    method: 'POST',\n    body: JSON.stringify(params)\n  }, 'json');\n\n  return {\n    login: (values) => request('/login', values),\n    logout: () =>  request('/logout')\n  };\n};\n\nexport default serverAuth;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst adapter = (core) => {\n  const pkgs = core.make('osjs/packages');\n\n  return {\n    readdir: ({path}, options) => {\n      return Promise.resolve(pkgs.getPackages())\n        .then(pkgs => pkgs.map(pkg => ({\n          isDirectory: false,\n          isFile: true,\n          filename: pkg.name,\n          mime: 'osjs/application',\n          path: `${path.replace(/(\\/+)?$/, '/')}${pkg.name}`,\n          size: 0,\n          stat: {},\n          icon: pkg.icon ? core.url(pkg.icon, {}, pkg) : null\n        })));\n    }\n  };\n};\n\nexport default adapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst nullAdapter = ({\n  readdir: (path, options) => Promise.resolve([]),\n  readfile: (path, type, options) => Promise.resolve({body: new ArrayBuffer(), mime: 'application/octet-stream'}),\n  writefile: (path, data, options) => Promise.resolve(-1),\n  copy: (from, to, options) => Promise.resolve(false),\n  rename: (from, to, options) => Promise.resolve(false),\n  mkdir: (path, options) => Promise.resolve(false),\n  unlink: (path, options) => Promise.resolve(false),\n  exists: (path, options) => Promise.resolve(false),\n  stat: (path, options) => Promise.resolve({}),\n  url: (path, options) => Promise.resolve(null),\n  mount: options => Promise.resolve(true),\n  unmount: options => Promise.resolve(true),\n  search: (root, pattern, options) => Promise.resolve([]),\n  touch: (path, options) => Promise.resolve(false)\n});\n\nexport default nullAdapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst getters = ['exists', 'stat', 'readdir', 'readfile'];\n\nconst requester = core => (fn, body, type) =>\n  core.request(`/vfs/${fn}`, {\n    body,\n    method: getters.indexOf(fn) !== -1 ? 'get' : 'post'\n  }, type)\n    .then(response => {\n      if (type === 'json') {\n        return {mime: 'application/json', body: response};\n      }\n\n      const contentType = response.headers.get('content-type') || 'application/octet-stream';\n\n      return response.arrayBuffer().then(result => ({\n        mime: contentType,\n        body: result\n      }));\n    });\n\nconst methods = (core, request) => {\n  const passthrough = (name) => ({path}, options) =>\n    request(name, {path, options}, 'json')\n      .then(({body}) => body);\n\n  return {\n    readdir: ({path}, options) => request('readdir', {\n      path,\n      options: {}\n    }, 'json').then(({body}) => body),\n\n    readfile: ({path}, type, options) =>\n      request('readfile', {path, options}),\n\n    writefile: ({path}, data, options) => {\n      const formData = new FormData();\n      formData.append('upload', data);\n      formData.append('path', path);\n      formData.append('options', options);\n\n      return request('writefile', formData).then(({body}) => body);\n    },\n\n    copy: (from, to, options) =>\n      request('copy', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\n\n    rename: (from, to, options) =>\n      request('rename', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\n\n    mkdir: passthrough('mkdir'),\n    unlink: passthrough('unlink'),\n    exists: passthrough('exists'),\n    stat: passthrough('stat'),\n\n    url: ({path}, options) => Promise.resolve(\n      core.url(`/vfs/readfile?path=${encodeURIComponent(path)}`)\n    ),\n\n    search: ({path}, pattern, options) =>\n      request('search', {root: path, pattern, options}, 'json')\n        .then(({body}) => body),\n\n    touch: ({path}, options) =>\n      request('touch', {path, options}, 'json').then(({body}) => body),\n\n    download: ({path}, options = {}) => {\n      const json = encodeURIComponent(JSON.stringify({download: true}));\n\n      return Promise.resolve(`/vfs/readfile?options=${json}&path=` + encodeURIComponent(path))\n        .then(url => {\n          return (options.target || window).open(url);\n        });\n    }\n  };\n};\n\nconst adapter = (core) => {\n  const request = requester(core);\n\n  return methods(core, request);\n};\n\nexport default adapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport Websocket from './websocket';\nimport Window from './window';\n\nconst applications = [];\nlet applicationCount = 0;\n\nconst getSettingsKey = metadata =>\n  'osjs/application/' + metadata.name;\n\n/**\n * Application\n *\n * @desc Base class for an Application\n */\nexport default class Application extends EventEmitter {\n\n  /**\n   * Create application\n   *\n   * @param {Core} core Core reference\n   * @param {Object} data Application data\n   * @param {Map<String, *>} data.args Launch arguments\n   * @param {Object} [data.options] Options\n   * @param {Object} [data.options.settings] Initial settings\n   * @param {Object} [data.options.restore] Restore data\n   * @param {Boolean} [data.options.windowAutoFocus=true] Auto-focus first created window\n   * @param {Boolean} [data.options.sessionable=true] Allow session storage\n   * @param {PackageMetadata} [data.metadata] Package Metadata\n   */\n  constructor(core, data) {\n    data = Object.assign({}, {\n      args: {},\n      options: {},\n      metadata: {}\n    }, data);\n\n    console.debug('Application::constructor()', data);\n\n    const defaultSettings = data.options.settings\n      ? Object.assign({}, data.options.settings)\n      : {};\n\n    const name = data.metadata && data.metadata.name\n      ? 'Application@' + data.metadata.name\n      : 'Application' + String(applicationCount);\n\n    super(name);\n\n    /**\n     * The Application ID\n     * @type {Number}\n     */\n    this.pid = applicationCount;\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * Application arguments\n     * @type {Map<String, *>}\n     */\n    this.args = data.args;\n\n    /**\n     * Application options\n     * @type {Object}\n     */\n    this.options = Object.assign({\n      sessionable: true,\n      windowAutoFocus: true\n    }, data.options);\n\n    /**\n     * Application metadata\n     * @type {PackageMetadata}\n     */\n    this.metadata = data.metadata;\n\n    /**\n     * Window list\n     * @type {Window[]}\n     */\n    this.windows = [];\n\n    /**\n     * Worker instances\n     * @type {Worker[]}\n     */\n    this.workers = [];\n\n    /**\n     * Options for internal fetch/requests\n     * @type {Object}\n     */\n    this.requestOptions = {};\n\n    /**\n     * The application destruction state\n     * @type {Boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Application settings\n     * @type {Object}\n     */\n    this.settings = core.make('osjs/settings')\n      .get(getSettingsKey(this.metadata), null, defaultSettings);\n\n    /**\n     * Application started time\n     * @type {Date}\n     */\n    this.started = new Date();\n\n    /**\n     * Application WebSockets\n     * @type {Websocket[]}\n     */\n    this.sockets = [];\n\n    applications.push(this);\n    applicationCount++;\n\n    this.core.emit('osjs/application:create', this);\n  }\n\n  /**\n   * Destroy application\n   */\n  destroy(remove = true) {\n    if (this.destroyed) {\n      return;\n    }\n    this.destroyed = true;\n\n    this.emit('destroy');\n    this.core.emit('osjs/application:destroy', this);\n\n    const destroy = (list, fn) => {\n      try {\n        list.forEach(fn);\n      } catch (e) {\n        console.warn('Exception on application destruction', e);\n      }\n\n      return [];\n    };\n\n    this.windows = destroy(this.windows, window => window.destroy());\n    this.sockets = destroy(this.sockets, ws => ws.close());\n    this.workers = destroy(this.workers, worker => worker.terminate());\n\n    if (remove) {\n      const foundIndex = applications.findIndex(a => a === this);\n      if (foundIndex !== -1) {\n        applications.splice(foundIndex, 1);\n      }\n    }\n  }\n\n  /**\n   * Re-launch this application\n   */\n  relaunch() {\n    const windows = this.windows.map(w => w.getSession());\n\n    this.destroy();\n\n    setTimeout(() => {\n      this.core.run(this.metadata.name, Object.assign({}, this.args), Object.assign({}, this.options, {\n        forcePreload: this.core.config('development'),\n        restore: {windows}\n      }));\n    }, 1);\n  }\n\n  /**\n   * Gets a URI to a resource for this application\n   *\n   * @desc If given path is an URI it will just return itself.\n   *\n   * @param {String} path The path\n   * @param {Object} [options] Options for url() in core\n   * @return {String} A complete URI\n   */\n  resource(path = '/', options = {}) {\n    return this.core.url(path, options, this.metadata);\n  }\n\n  /**\n   * Performs a request to the OS.js server with the application\n   * as the endpoint.\n   * @param {String} [path=/] Append this to endpoint\n   * @param {Options} [options] fetch options\n   * @param {String} [type='json'] Request / Response type\n   * @return {Promise<*, Error>} ArrayBuffer or JSON\n   */\n  request(path = '/', options = {}, type = 'json') {\n    const uri = this.resource(path);\n\n    return this.core.request(uri, options, type);\n  }\n\n  /**\n   * Creates a new Websocket\n   * @param {String} [path=/socket] Append this to endpoint\n   * @param {Object} [options] Connection options\n   * @return {Websocket}\n   */\n  socket(path = '/socket', options = {}) {\n    options = Object.assign({}, {\n      socket: {}\n    }, options);\n\n    const uri = this.resource(path, {type: 'websocket'});\n    const ws = new Websocket(this.metadata.name, uri, options.socket);\n\n    this.sockets.push(ws);\n\n    return ws;\n  }\n\n  /**\n   * Sends a message over websocket via the core connection.\n   * @desc This does not create a new connection, but rather uses the core connection.\n   * For subscribing to messages from the server use the 'ws:message' event\n   */\n  send(...args) {\n    this.core.ws.send(JSON.stringify({\n      name: 'osjs/application:socket:message',\n      params: [{\n        pid: this.pid,\n        name: this.metadata.name,\n        args\n      }]\n    }));\n  }\n\n  /**\n   * Creates a new Worker\n   * @param {String} filename Worker filename\n   * @param {Object} [options] Worker options\n   * @return {Worker}\n   */\n  worker(filename, options = {}) {\n    const uri = this.resource(filename);\n    const worker =  new Worker(uri, Object.assign({\n      credentials: 'same-origin'\n    }, options));\n\n    this.workers.push(worker);\n\n    return worker;\n  }\n\n  /**\n   * Create a new window belonging to this application\n   * @param {Object} options Window options\n   * @see {Window}\n   * @return {Window}\n   */\n  createWindow(options = {}) {\n    const found = this.windows.find(w => w.id === options.id);\n    if (found) {\n      const msg = this.core.make('osjs/locale')\n        .translate('ERR_WINDOW_ID_EXISTS', options.id);\n\n      throw new Error(msg);\n    }\n\n    const instance = new Window(this.core, options);\n\n    if (this.options.restore) {\n      const windows = this.options.restore.windows || [];\n      const found = windows.findIndex(r => r.id === instance.id);\n\n      if (found !== -1) {\n        const restore = windows[found];\n        instance.setPosition(restore.position, true);\n        instance.setDimension(restore.dimension);\n\n        this.options.restore.windows.splice(found, 1);\n      }\n    }\n\n    instance.init();\n\n    this.windows.push(instance);\n\n    this.emit('create-window', instance);\n    instance.on('destroy', () => {\n      if (!this.destroyed) {\n        const foundIndex = this.windows.findIndex(w => w === instance);\n        if (foundIndex !== -1) {\n          this.windows.splice(foundIndex, 1);\n        }\n      }\n\n      this.emit('destroy-window', instance);\n    });\n\n    if (this.options.windowAutoFocus) {\n      instance.focus();\n    }\n\n    return instance;\n  }\n\n  /**\n   * Removes window(s) based on given filter\n   * @param {Function} filter Filter function\n   */\n  removeWindow(filter) {\n    const found = this.windows.filter(filter);\n    found.forEach(win => win.destroy());\n  }\n\n  /**\n   * Gets a snapshot of the application session\n   * @return {Object}\n   */\n  getSession() {\n    const session = {\n      args: Object.assign({}, this.args),\n      name: this.metadata.name,\n      windows: this.windows\n        .map(w => w.getSession())\n        .filter(s => s !== null)\n    };\n\n    return session;\n  }\n\n  /**\n   * Emits an event across all (or filtered) applications\n   *\n   * @deprecated\n   * @param {Function} [filter] A method to filter what applications to send to\n   * @return {Function} Function with 'emit()' signature\n   */\n  emitAll(filter) {\n    console.warn('Application#emitAll is deprecated. Use Core#broadcast instead');\n\n    const defaultFilter = proc => proc.pid !== this.pid;\n    const filterFn = typeof filter === 'function'\n      ? filter\n      : typeof filter === 'string'\n        ? proc => defaultFilter(proc) && proc.metadata.name === filter\n        : defaultFilter;\n\n    return (name, ...args) => applications.filter(filterFn)\n      .map(proc => proc.emit(name, ...args));\n  }\n\n  /**\n   * Saves settings\n   * @return {Promise<Boolean, Error>}\n   */\n  saveSettings() {\n    const service = this.core.make('osjs/settings');\n    const name = getSettingsKey(this.metadata);\n\n    service.set(name, null, this.settings);\n\n    return service.save();\n  }\n\n  /**\n   * Get a list of all running applications\n   *\n   * @return {Application[]}\n   */\n  static getApplications() {\n    return applications;\n  }\n\n  /**\n   * Kills all running applications\n   */\n  static destroyAll() {\n    applications.forEach(proc => {\n      try {\n        proc.destroy(false);\n      } catch (e) {\n        console.warn('Exception on destroyAll', e);\n      }\n    });\n\n    applications.splice(0, applications.length);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport Login from './login';\nimport serverAuth  from './adapters/auth/server';\nimport localStorageAuth from './adapters/auth/localstorage';\n\n/**\n * Handles Authentication\n */\nexport default class Auth {\n\n  /**\n   * @param {Core} core OS.js Core instance reference\n   * @param {Object} [args.ui] Options for default login UI adapter\n   * @param {Function} [args.adapter] Custom login adapter\n   * @param {Function} [args.login] Custom UI\n   * @param {Object} [args.config] Configuration object to be passed on\n   */\n  constructor(core, args = {}) {\n    const defaultUi = core.config('auth.ui', {});\n\n    const defaultAdapters = {\n      server: serverAuth,\n      localStorage: localStorageAuth\n    };\n\n    const adapter = core.config('standalone')\n      ? localStorageAuth\n      : typeof args.adapter === 'function'\n        ? args.adapter\n        : defaultAdapters[args.adapter || 'server'];\n\n    this.ui = args.login\n      ? args.login(core, args.config || {})\n      : new Login(core, args.ui || defaultUi);\n\n    this.adapter = Object.assign({\n      login: () => Promise.reject(new Error('Not implemented')),\n      logout: () => Promise.reject(new Error('Not implemented')),\n      init: () => Promise.resolve(true),\n      destroy: () => {}\n    }, adapter(core, args.config || {}));\n\n    this.callback = function() {};\n    this.core = core;\n  }\n\n  /**\n   * Initializes authentication handler\n   */\n  init() {\n    this.ui.on('login:post', values => this.login(values));\n\n    return this.adapter.init();\n  }\n\n  /**\n   * Destroy authentication handler\n   */\n  destroy() {\n    this.ui.destroy();\n  }\n\n  /**\n   * Run the shutdown procedure\n   */\n  shutdown(reload) {\n    try {\n      this.core.destroy();\n    } catch (e) {\n      console.warn('Exception on destruction', e);\n    }\n\n    this.core.emit('osjs/core:logged-out');\n\n    if (reload) {\n      setTimeout(() => {\n        window.location.reload();\n        // FIXME Reload, not refresh\n        // this.core.boot();\n      }, 1);\n    }\n  }\n\n  /**\n   * Shows Login UI\n   * @return {Promise<boolean, Error>}\n   */\n  show(cb) {\n    const login = this.core.config('auth.login', {});\n    const autologin = login.username && login.password;\n\n    this.callback = cb;\n    this.ui.init(autologin);\n\n    if (autologin) {\n      return this.login(login);\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Performs a login\n   * @param {Object} values Form values as JSON\n   */\n  async login(values) {\n    this.ui.emit('login:start');\n\n    return this.adapter\n      .login(values)\n      .then(response => {\n        if (response) {\n          this.ui.destroy();\n          this.callback(response);\n\n          this.core.emit('osjs/core:logged-in');\n          this.ui.emit('login:stop');\n\n          return true;\n        }\n\n        return false;\n      })\n      .catch(e => {\n        if (this.core.config('development')) {\n          console.warn('Exception on login', e);\n        }\n\n        this.ui.emit('login:error', 'Login failed');\n        this.ui.emit('login:stop');\n\n        return false;\n      });\n  }\n\n  /**\n   * Performs a logout\n   * @param {boolean} [reload=true] Reload client afterwards\n   */\n  logout(reload = true) {\n    return this.adapter.logout(reload)\n      .then(response => {\n        if (!response) {\n          return false;\n        }\n\n        this.shutdown(reload);\n\n        return true;\n      });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\n\n/*\n * Get basename of a file\n */\nconst basename = path => path.split('/').reverse()[0];\n\n/*\n * Get path of a file\n */\nconst pathname = path => {\n  const split = path.split('/');\n  split.splice(split.length - 1, 1);\n  return split.join('/');\n};\n\n/**\n * Basic Application Helper\n *\n * @desc A class for helping creating basic applications with open/load/create functionality.\n * Also sets the internal proc args for sessions.\n */\nexport class BasicApplication extends EventEmitter {\n\n  /**\n   * Basic Application Constructor\n   * @param {Core} core OS.js Core API\n   * @param {Application} proc The application process\n   * @param {Window} win The main application window\n   * @param {Object} options Basic application options\n   * @param {string[]} [options.mimeTypes] What MIME types to support (all/fallback)\n   * @param {string[]} [options.loadMimeTypes] What MIME types to support on load\n   * @param {string[]} [options.saveMimeTypes] What MIME types to support on save\n   * @param {string} [options.defaultFilename] Default filename of a new file\n   */\n  constructor(core, proc, win, options) {\n    super('BasicApplication<' + proc.name + '>');\n\n    this.core = core;\n    this.proc = proc;\n    this.win = win;\n\n    this.options = Object.assign({\n      mimeTypes: proc.metadata.mimes || [],\n      loadMimeTypes: [],\n      saveMimeTypes: [],\n      defaultFilename: 'New File'\n    }, options);\n  }\n\n  /**\n   * Destroys all Basic Application internals\n   */\n  destroy() {\n    this.off();\n  }\n\n  /**\n   * Initializes the application\n   */\n  init() {\n    if (this.proc.args.file) {\n      this.open(this.proc.args.file);\n    } else {\n      this.create();\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Gets options for a dialog\n   * @param {string} type Dialog type\n   * @return {Object}\n   */\n  getDialogOptions(type, options = {}) {\n    const {\n      defaultFilename,\n      mimeTypes,\n      loadMimeTypes,\n      saveMimeTypes\n    } = this.options;\n\n    const currentFile = options.file ? options.file : this.proc.args.file;\n    const defaultPath = this.core.config('vfs.defaultPath');\n    const path = currentFile ? currentFile.path : null;\n\n    let mime = type === 'open' ? loadMimeTypes : saveMimeTypes;\n    if (!mime.length) {\n      mime = mimeTypes;\n    }\n\n    return [{\n      type,\n      mime,\n      filename: path ? basename(path) : defaultFilename,\n      path: path ? pathname(path) : defaultPath\n    }, {\n      parent: this.win,\n      attributes: {\n        modal: true\n      }\n    }];\n  }\n\n  /**\n   * Updates the window title to match open file\n   */\n  updateWindowTitle() {\n    if (this.win) {\n      const {translatableFlat} = this.core.make('osjs/locale');\n      const prefix = translatableFlat(this.proc.metadata.title);\n      const title = this.proc.args.file\n        ? basename(this.proc.args.file.path)\n        : this.options.defaultFilename;\n\n      if (title) {\n        this.win.setTitle(`${prefix} - ${title}`);\n      } else {\n        this.win.setTitle(prefix);\n      }\n    }\n  }\n\n  /**\n   * Creates a new dialog of a type\n   * @param {string} type Dialog type\n   * @param {Function} cb Callback\n   * @param {Object} [options] Override options\n   */\n  createDialog(type, cb, options = {}) {\n    const [args, opts] = this.getDialogOptions(type, options);\n\n    this.core.make('osjs/dialog', 'file', args, opts, (btn, item) => {\n      if (btn === 'ok') {\n        cb(item);\n      }\n    });\n  }\n\n  /**\n   * Opens given file\n   * @desc Does not do any actual VFS operation\n   * @param {Object} file A file object\n   */\n  open(item) {\n    this.proc.args.file = Object.assign({}, item);\n\n    this.emit('open-file', item);\n\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Saves given file\n   * @desc Does not do any actual VFS operation\n   * @param {Object} file A file object\n   */\n  save(item) {\n    this.proc.args.file = Object.assign({}, item);\n\n    this.emit('save-file', item);\n\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Create new file\n   * @desc Does not do any actual VFS operation\n   */\n  create() {\n    this.proc.args.file = null;\n\n    this.emit('new-file');\n\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Create new file\n   * @see BasicApplication#create\n   */\n  createNew() {\n    this.create();\n  }\n\n  /**\n   * Creates a new save dialog\n   */\n  createSaveDialog(options = {}) {\n    this.createDialog('save', item => this.save(item), options);\n  }\n\n  /**\n   * Creates a new load dialog\n   */\n  createOpenDialog(options = {}) {\n    this.createDialog('open', item => this.open(item), options);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport default class Clipboard {\n\n  constructor() {\n    this.value = undefined;\n    this.clear();\n  }\n\n  destroy() {\n    this.clear();\n  }\n\n  clear() {\n    this.value = Promise.resolve();\n  }\n\n  set(v) {\n    this.value = v;\n  }\n\n  get(clear) {\n    const v = typeof this.value === 'function'\n      ? this.value()\n      : this.value;\n\n    const done = ret => {\n      if (clear) {\n        this.clear();\n      }\n\n      return ret;\n    };\n\n    return Promise.resolve(v)\n      .then(done)\n      .catch(done);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {clientLocale} from './utils/locale.js';\n\nconst {pathname, href} = window.location;\nconst path = pathname.substr(-1) !== '/' ? pathname + '/' : pathname;\nconst uri = href.replace(/[^/]*$/, '');\n\nexport const defaultConfiguration = {\n  development: !(process.env.NODE_ENV || '').match(/^prod/i),\n  standalone: false,\n\n  http: {\n    public: path,\n    uri\n  },\n\n  ws: {\n    connectInterval: 5000,\n    uri: uri.replace(/^http/, 'ws'),\n    disabled: false\n  },\n\n  languages: {\n    en_EN: 'English',\n    nb_NO: 'Norwegian, Norsk (bokmål)',\n    vi_VN: 'Vietnamese, Vietnamese',\n    fr_FR: 'French',\n    de_DE: 'German',\n    sl_SI: 'Slovenian, Slovenščina',\n    zh_CN: 'Chinese (simplified)'\n  },\n\n  packages: {\n    manifest: '/metadata.json'\n  },\n\n  // FIXME: Move into packages above ?!\n  application: {\n    categories: {\n      development: {\n        label: 'LBL_APP_CAT_DEVELOPMENT',\n        icon: 'applications-development'\n      },\n      science: {\n        label: 'LBL_APP_CAT_SCIENCE',\n        icon: 'applications-science'\n      },\n      games: {\n        label: 'LBL_APP_CAT_GAMES',\n        icon: 'applications-games'\n      },\n      graphics: {\n        label: 'LBL_APP_CAT_GRAPHICS',\n        icon: 'applications-graphics'\n      },\n      network: {\n        label: 'LBL_APP_CAT_NETWORK',\n        icon: 'applications-internet'\n      },\n      multimedia: {\n        label: 'LBL_APP_CAT_MULTIMEDIA',\n        icon: 'applications-multimedia'\n      },\n      office: {\n        label: 'LBL_APP_CAT_OFFICE',\n        icon: 'applications-office'\n      },\n      system: {\n        label: 'LBL_APP_CAT_SYSTEM',\n        icon: 'applications-system'\n      },\n      utilities: {\n        label: 'LBL_APP_CAT_UTILITIES',\n        icon: 'applications-utilities'\n      },\n      other: {\n        label: 'LBL_APP_CAT_OTHER',\n        icon: 'applications-other'\n      }\n    }\n  },\n\n  auth: {\n    ui: {},\n    login: {\n      username: null,\n      password: null\n    },\n  },\n\n  settings: {\n    lock: [],\n\n    defaults: {\n      'osjs/session': [],\n      'osjs/desktop': {},\n      'osjs/locale': {}\n    }\n  },\n\n  search: {\n    enabled: true\n  },\n\n  notifications: {\n    native: false\n  },\n\n  desktop: {\n    lock: false,\n    contextmenu: {\n      enabled: true,\n      defaults: true\n    },\n\n    settings: {\n      font: 'Roboto',\n      theme: 'StandardTheme',\n      sounds: 'FreedesktopSounds',\n      icons: 'GnomeIcons',\n      animations: false,\n      panels: [{\n        position: 'top',\n        items: [\n          {name: 'menu'},\n          {name: 'windows'},\n          {name: 'tray'},\n          {name: 'clock'}\n        ]\n      }],\n      widgets: [],\n      keybindings: [],\n      background: {\n        src: require('./styles/wallpaper.png'),\n        color: '#572a79',\n        style: 'cover'\n      },\n      iconview: {\n        enabled: false\n      }\n    }\n  },\n\n  locale: {\n    language: clientLocale('en_EN'),\n    rtl: ['az', 'fa', 'he', 'uz', 'ar'],\n    format: {\n      shortDate: 'yyyy-mm-dd',\n      mediumDate: 'dS mmm yyyy',\n      longDate: 'dS mmmm yyyy',\n      fullDate: 'dddd dS mmmm yyyy',\n      shortTime: 'HH:MM',\n      longTime: 'HH:MM:ss'\n    }\n  },\n\n  windows: {\n    lofi: false,\n    mobile: false, // Trigger for setting mobile UI\n    template: null // A string. See 'window.js' for example\n  },\n\n  vfs: {\n    defaultPath: 'home:/',\n    defaultAdapter: 'system',\n    adapters: {},\n    mountpoints: [{\n      name: 'apps',\n      label: 'Applications',\n      adapter: 'apps',\n      icon: require('./styles/logo-blue-32x32.png'),\n      attributes: {\n        visibility: 'restricted',\n        readOnly: true\n      }\n    }, {\n      name: 'osjs',\n      label: 'OS.js',\n      adapter: 'system',\n      icon: {name: 'folder-publicshare'},\n    }, {\n      name: 'home',\n      label: 'Home',\n      adapter: 'system',\n      icon: {name: 'user-home'}\n    }],\n    icons: {\n      '^application/zip': {name: 'package-x-generic'},\n      '^application/javascript': {name: 'text-x-script'},\n      '^application/json': {name: 'text-x-script'},\n      '^application/x-python': {name: 'text-x-script'},\n      '^application/php': {name: 'text-x-script'},\n      '^application/pdf': {name: 'x-office-document'},\n      '^application/rtf': {name: 'x-office-document'},\n      '^application/msword': {name: 'x-office-document'},\n      '^application/(xz|tar|gzip)': {name: 'package-x-generic'},\n      '^text/css': {name: 'text-x-script'},\n      '^text/html': {name: 'text-html'},\n      '^(application|text)/xml': {name: 'text-html'},\n      '^application': {name: 'application-x-executable'},\n      '^text': {name: 'text-x-generic'},\n      '^audio': {name: 'audio-x-generic'},\n      '^video': {name: 'video-x-generic'},\n      '^image': {name: 'image-x-generic'}\n    }\n  },\n\n  providers: {\n    globalBlacklist: [\n      'osjs/websocket',\n      'osjs/clipboard',\n      'osjs/gapi'\n    ],\n    globalWhitelist: []\n  }\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from './application';\nimport Websocket from './websocket';\nimport Splash from './splash';\nimport {CoreBase} from '@osjs/common';\nimport {defaultConfiguration} from './config';\nimport {fetch} from './utils/fetch';\nimport {urlResolver} from './utils/url';\n\n/**\n * Core\n *\n * @desc Main class for OS.js service providers and bootstrapping.\n */\nexport default class Core extends CoreBase {\n\n  /**\n   * Create core instance\n   * @param {Object} config Configuration tree\n   * @param {Object} [options] Options\n   * @param {Element} [options.root] The root DOM element for elements\n   * @param {Element} [options.resourceRoot] The root DOM element for resources\n   * @param {String[]} [options.classNames] List of class names to apply to root dom element\n   */\n  constructor(config = {}, options = {}) {\n    options = Object.assign({}, {\n      classNames: ['osjs-root'],\n      root: document.body\n    }, options || {});\n\n    super(defaultConfiguration, config, options);\n\n    this.ws = null;\n    this.ping = null;\n    this.splash = new Splash(this);\n    this.$root = options.root;\n    this.$resourceRoot = options.resourceRoot || document.querySelector('head');\n    this.requestOptions = {};\n    this.urlResolver = urlResolver(this.configuration);\n    this.user = {\n      id: null,\n      username: 'osjs',\n      groups: []\n    };\n\n    this.options.classNames.forEach(n => this.$root.classList.add(n));\n\n    const {uri} = this.configuration.ws;\n    if (!uri.match(/^wss?:/)) {\n      const {protocol, host} = window.location;\n\n      this.configuration.ws.uri = protocol.replace(/^http/, 'ws') + '//' + host + uri.replace(/^\\/+/, '/');\n    }\n  }\n\n  /**\n   * Destroy core instance\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.emit('osjs/core:destroy');\n\n    this.ping = clearInterval(this.ping);\n\n    Application.destroyAll();\n\n    if (this.ws) {\n      this.ws.close();\n    }\n\n    this.user = null;\n    this.ws = null;\n    this.connecting = false;\n    this.connectfailed = false;\n    this.ping = null;\n\n    super.destroy();\n  }\n\n  /**\n   * Boots up OS.js\n   */\n  boot() {\n    const done = e => {\n      if (e) {\n        console.error('Error while booting', e);\n      }\n\n      console.groupEnd();\n\n      return this.start();\n    };\n\n    if (this.booted) {\n      return Promise.resolve(false);\n    }\n\n    console.group('Core::boot()');\n\n    this._attachEvents();\n    this.emit('osjs/core:boot');\n\n    return super.boot()\n      .then(() => {\n        this.emit('osjs/core:booted');\n\n        if (this.has('osjs/auth')) {\n          return this.make('osjs/auth').show(user => {\n            this.user = user;\n\n            if (this.has('osjs/settings')) {\n              this.make('osjs/settings').load()\n                .then(() => done())\n                .catch(() => done());\n            } else {\n              done();\n            }\n          });\n        } else {\n          console.debug('OS.js STARTED WITHOUT ANY AUTHENTICATION');\n        }\n\n        return done();\n      }).catch(done);\n  }\n\n  /**\n   * Starts all core services\n   */\n  start() {\n    const connect = () => new Promise((resolve, reject) => {\n      try {\n        const valid = this._createConnection(error => error ? reject(error) : resolve());\n        if (valid === false) {\n          // We can skip the connection\n          resolve();\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n\n    const done = (err) => {\n      this.emit('osjs/core:started');\n\n      if (err) {\n        console.warn('Error while starting', err);\n      }\n\n      console.groupEnd();\n\n      return !!err;\n    };\n\n    if (this.started) {\n      return Promise.resolve();\n    }\n\n    console.group('Core::start()');\n\n    this.emit('osjs/core:start');\n\n    this._createListeners();\n\n    return super.start()\n      .then(result => {\n        console.groupEnd();\n\n        if (result) {\n          return connect()\n            .then(() => done())\n            .catch(err => done(err));\n        }\n\n        return false;\n      }).catch(done);\n  }\n\n  /**\n   * Attaches some internal events\n   */\n  _attachEvents() {\n    // Attaches sounds for certain events\n    this.on('osjs/core:started', () => {\n      if (this.has('osjs/sounds')) {\n        this.make('osjs/sounds').play('service-login');\n      }\n    });\n\n    this.on('osjs/core:destroy', () => {\n      if (this.has('osjs/sounds')) {\n        this.make('osjs/sounds').play('service-logout');\n      }\n    });\n\n    // Forwards messages to an application from internal websocket\n    this.on('osjs/application:socket:message', ({pid, args}) => {\n      const found = Application.getApplications()\n        .find(proc => proc && proc.pid === pid);\n\n      if (found) {\n        found.emit('ws:message', ...args);\n      }\n    });\n\n    // Sets up a server ping\n    this.on('osjs/core:connected', config => {\n      const pingTime = config.cookie.maxAge / 2;\n\n      this.ping = setInterval(() => {\n        if (this.ws) {\n          if (this.ws.connected && !this.ws.reconnecting) {\n            this.request('/ping').catch(e => console.warn('Error on ping', e));\n          }\n        }\n      }, pingTime);\n    });\n\n  }\n\n  /**\n   * Creates the main connection to server\n   */\n  _createConnection(cb) {\n    if (this.configuration.standalone || this.configuration.ws.disabled) {\n      return false;\n    }\n\n    const {uri} = this.config('ws');\n    let wasConnected = false;\n\n    console.debug('Creating websocket connection on', uri);\n\n    this.ws = new Websocket('CoreSocket', uri, {\n      interval: this.config('ws.connectInterval', 1000)\n    });\n\n    this.ws.once('connected', () => {\n      // Allow for some grace-time in case we close prematurely\n      setTimeout(() => {\n        wasConnected = true;\n        cb();\n      }, 100);\n    });\n\n    this.ws.on('connected', (ev, reconnected) => {\n      this.emit('osjs/core:connect', ev, reconnected);\n    });\n\n    this.ws.once('failed', ev => {\n      if (!wasConnected) {\n        cb(new Error('Connection closed'));\n        this.emit('osjs/core:connection-failed', ev);\n      }\n    });\n\n    this.ws.on('disconnected', ev => {\n      this.emit('osjs/core:disconnect', ev);\n    });\n\n    this.ws.on('message', ev => {\n      try {\n        const data = JSON.parse(ev.data);\n        const params = data.params || [];\n        this.emit(data.name, ...params);\n      } catch (e) {\n        console.warn('Exception on websocket message', e);\n      }\n    });\n\n    return true;\n  }\n\n  /**\n   * Creates event listeners*\n   */\n  _createListeners() {\n    const handle = data => {\n      const {pid, wid, args} = data;\n\n      const proc = Application.getApplications()\n        .find(p => p.pid === pid);\n\n      const win = proc\n        ? proc.windows.find(w => w.wid === wid)\n        : null;\n\n      if (win) {\n        win.emit('iframe:get', ...(args || []));\n      }\n    };\n\n    window.addEventListener('message', ev => {\n      const message = ev.data || {};\n      if (message && message.name === 'osjs/iframe:message') {\n        handle(...(message.params || []));\n      }\n    });\n  }\n\n  /**\n   * Creates an URL based on configured public path\n   *\n   * @desc If you give a options.type, the URL will be resolved\n   * to the correct resource.\n   *\n   * @param {String} [endpoint=/] Endpoint\n   * @param {Object} [options] Additional options for resolving url\n   * @param {Boolean} [options.prefix=false] Returns a full URL complete with scheme, etc. (will always be true on websocket)\n   * @param {string} [options.type] Optional URL type (websocket)\n   * @param {PackageMetadata} [metadata] A package metadata\n   * @return {String}\n   */\n  url(endpoint = '/', options = {}, metadata = {}) {\n    return this.urlResolver(endpoint, options, metadata);\n  }\n\n\n  /**\n   * Make a HTTP request\n   *\n   * @desc This is a wrapper for making a 'fetch' request with some helpers\n   * and integration with OS.js\n   * @param {String} url The endpoint\n   * @param {Options} [options] fetch options\n   * @param {String} [type] Request / Response type\n   * @return {*}\n   */\n  request(url, options = {}, type = null) {\n    const _ = this.has('osjs/locale')\n      ? this.make('osjs/locale').translate\n      : t => t;\n\n    if (this.config('standalone')) {\n      return Promise.reject(new Error(_('ERR_REQUEST_STANDALONE')));\n    }\n\n    if (!url.match(/^((http|ws|ftp)s?:)/i)) {\n      url = this.url(url);\n      // FIXME: Deep merge\n      options = Object.assign({}, options || {}, this.requestOptions || {});\n    }\n\n    return fetch(url, options, type)\n      .catch(error => {\n        console.warn(error);\n\n        throw new Error(_('ERR_REQUEST_NOT_OK', error));\n      });\n  }\n\n  /**\n   * Create an application from a package\n   *\n   * @param {String} name Package name\n   * @param {Object} [args] Launch arguments\n   * @param {Object} [options] Launch options\n   * @see {Packages}\n   * @return {Application}\n   */\n  run(name, args = {}, options = {}) {\n    console.debug('Core::run()', name, args, options);\n\n    return this.make('osjs/packages').launch(name, args, options);\n  }\n\n  /**\n   * Spawns an application based on the file given\n   * @param {Object} file A file object\n   * @param {Object} [options] Options\n   * @return {Boolean|Application}\n   */\n  open(file, options = {}) {\n    const _ = this.make('osjs/locale').translate;\n\n    const run = app => this.run(app, {file}, options);\n\n    if (file.mime === 'osjs/application') {\n      return this.run(file.path.split('/').pop());\n    }\n\n    const compatible = this.make('osjs/packages')\n      .getCompatiblePackages(file.mime);\n\n    if (compatible.length > 0) {\n      if (compatible.length > 1) {\n        try {\n          this.make('osjs/dialog', 'choice', {\n            title: _('LBL_LAUNCH_SELECT'),\n            message: _('LBL_LAUNCH_SELECT_MESSAGE', file.path),\n            choices: compatible.reduce((o, i) => Object.assign(o, {[i.name]: i.name}), {})\n          }, (btn, value) => {\n            if (btn === 'ok' && value) {\n              run(value);\n            }\n          });\n\n          return true;\n        } catch (e) {\n          console.warn('Exception on compability check', e);\n        }\n      }\n\n      run(compatible[0].name);\n\n      return Promise.resolve(true);\n    }\n\n    return Promise.resolve(false);\n  }\n\n  /**\n   * Removes an event handler\n   * @see EventHandler#off\n   */\n  off(name, callback = null, force = false) {\n    if (name.match(/^osjs\\//) && typeof callback !== 'function') {\n      throw new TypeError('The callback must be a function');\n    }\n\n    return super.off(name, callback, force);\n  }\n\n  /**\n   * Sends a 'broadcast' event with given arguments\n   * to all applications matching given filter\n   *\n   * @param {string|Function} pkg The filter\n   * @param {string} name The event name\n   * @param {*} ...args Arguments to pass to emit\n   * @return {string[]} List of application names emitted to\n   */\n  broadcast(pkg, name, ...args) {\n    const filter = typeof pkg === 'function'\n      ? pkg\n      : p => p.metadata.name === pkg;\n\n\n    const apps = Application\n      .getApplications()\n      .filter(filter);\n\n    return apps.map(proc => {\n      proc.emit(name, ...args);\n\n      return proc.name;\n    });\n  }\n\n  /**\n   * Set the internal fetch/request options\n   * @param {Object} options Request options\n   */\n  setRequestOptions(options) {\n    this.requestOptions = Object.assign({}, options);\n  }\n\n  /**\n   * Gets the current user\n   * @return {Map<string,*>} User object\n   */\n  getUser() {\n    return Object.assign({}, this.user);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport Application from './application';\nimport {handleTabOnTextarea} from './utils/dom';\nimport Window from './window';\nimport Search from './search';\nimport merge from 'deepmerge';\n\nconst TEMPLATE = subtract => `\n  .osjs-root[data-mobile=true] .osjs-window,\n  .osjs-window[data-maximized=true] {\n    top: ${subtract.top}px !important;\n    left: ${subtract.left}px !important;\n    right: ${subtract.right}px !important;\n    bottom: ${subtract.bottom}px !important;\n    width: calc(100% -  ${subtract.left + subtract.right}px) !important;\n    height: calc(100% - ${subtract.top + subtract.bottom}px) !important;\n  }\n`;\n\n/*\n * Creates a set of styles based on background settings\n */\nconst applyBackgroundStyles = (core, background) => {\n  const {$root} = core;\n\n  const styles = {\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: '50% 50%',\n    backgroundSize: 'auto',\n    backgroundColor: background.color,\n    backgroundImage: 'none'\n  };\n\n  if (background.style === 'cover' || background.style === 'contain') {\n    styles.backgroundSize = background.style;\n  } else if (background.style === 'repeat') {\n    styles.backgroundRepeat = 'repeat';\n  }\n\n  if (background.style !== 'color') {\n    if (background.src === undefined) {\n      styles.backgroundImage = undefined;\n    } else if (typeof background.src === 'string') {\n      styles.backgroundImage = `url(${background.src})`;\n    } else if (background.src) {\n      core.make('osjs/vfs')\n        .url(background.src)\n        .then(src => {\n          setTimeout(() => ($root.style.backgroundImage = `url(${src})`), 1);\n        })\n        .catch(error => console.warn('Error while setting wallpaper from VFS', error));\n    }\n  }\n\n  Object.keys(styles).forEach(k => ($root.style[k] = styles[k]));\n};\n\n/*\n * Creates a rectangle with the realestate panels takes up\n */\nconst createPanelSubtraction = (panel, panels) => {\n  const subtraction = {top: 0, left: 0, right: 0, bottom: 0};\n  const set = p => (subtraction[p.options.position] = p.$element.offsetHeight);\n\n  if (panels.length > 0) {\n    panels.forEach(set);\n  } else {\n    // Backward compability\n    set(panel);\n  }\n\n  return subtraction;\n};\n\n/**\n * Desktop Class\n *\n * @desc Handles the Desktop\n */\nexport default class Desktop extends EventEmitter {\n\n  /**\n   * Create Desktop\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core, options) {\n    super('Desktop');\n\n    this.core = core;\n    this.options = Object.assign({\n      contextmenu: []\n    }, options);\n    this.$theme = [];\n    this.$icons = [];\n    this.$styles = document.createElement('style');\n    this.$styles.setAttribute('type', 'text/css');\n    this.contextmenuEntries = [];\n    this.search = core.config('search.enabled') ? new Search(core) : null;\n    this.subtract = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n  }\n\n  /**\n   * Destroy Desktop\n   */\n  destroy() {\n    if (this.search) {\n      this.search = this.search.destroy();\n    }\n\n    if (this.$styles && this.$styles.parentNode) {\n      this.$styles.remove();\n    }\n    this.$styles = null;\n\n    this._removeIcons();\n    this._removeTheme();\n  }\n\n  /**\n   * Initializes Desktop\n   */\n  init() {\n    this.initConnectionEvents();\n    this.initUIEvents();\n    this.initDragEvents();\n    this.initKeyboardEvents();\n    this.initMouseEvents();\n    this.initBaseEvents();\n    this.initLocales();\n    this.initDeveloperTray();\n\n    this.core.$resourceRoot.appendChild(this.$styles);\n  }\n\n  initConnectionEvents() {\n    this.core.on('osjs/core:disconnect', ev => {\n      console.warn('Connection closed', ev);\n\n      const _ = this.core.make('osjs/locale').translate;\n      this.core.make('osjs/notification', {\n        title: _('LBL_CONNECTION_LOST'),\n        message: _('LBL_CONNECTION_LOST_MESSAGE')\n      });\n    });\n\n    this.core.on('osjs/core:connect', (ev, reconnected) => {\n      console.debug('Connection opened');\n\n      if (reconnected) {\n        const _ = this.core.make('osjs/locale').translate;\n        this.core.make('osjs/notification', {\n          title: _('LBL_CONNECTION_RESTORED'),\n          message: _('LBL_CONNECTION_RESTORED_MESSAGE')\n        });\n      }\n    });\n\n    this.core.on('osjs/core:connection-failed', (ev) => {\n      console.warn('Connection failed');\n\n      const _ = this.core.make('osjs/locale').translate;\n      this.core.make('osjs/notification', {\n        title: _('LBL_CONNECTION_FAILED'),\n        message: _('LBL_CONNECTION_FAILED_MESSAGE')\n      });\n    });\n  }\n\n  initUIEvents() {\n    this.core.on(['osjs/panel:create', 'osjs/panel:destroy'], (panel, panels = []) => {\n      this.subtract = createPanelSubtraction(panel, panels);\n\n      try {\n        this._updateCSS();\n        Window.getWindows().forEach(w => w.clampToViewport());\n      } catch (e) {\n        console.warn('Panel event error', e);\n      }\n      this.core.emit('osjs/desktop:transform', this.getRect());\n    });\n\n    this.core.on('osjs/window:transitionend', (...args) => {\n      this.emit('theme:window:transitionend', ...args);\n    });\n\n    this.core.on('osjs/window:change', (...args) => {\n      this.emit('theme:window:change', ...args);\n    });\n  }\n\n  initDeveloperTray() {\n    if (!this.core.config('development')) {\n      return;\n    }\n\n    // Creates tray\n    const tray = this.core.make('osjs/tray').create({\n      title: 'OS.js developer tools'\n    }, (ev) => this.onDeveloperMenu(ev));\n\n    this.core.on('destroy', () => tray.destroy());\n  }\n\n  initDragEvents() {\n    // Handles dnd\n    this.core.$root.addEventListener('dragover', e => {\n      e.preventDefault();\n    });\n\n    this.core.$root.addEventListener('drop', e => {\n      e.preventDefault();\n    });\n  }\n\n  initKeyboardEvents() {\n    // Forward keypress events\n    const isVisible = w => w &&\n      !w.getState('minimized') &&\n      w.getState('focused');\n\n    const forwardKeyEvent = (n, e) => {\n      const w = Window.lastWindow();\n      if (isVisible(w)) {\n        w.emit(n, e, w);\n      }\n    };\n\n    const isWithinWindow = (w, target) => {\n      return w && w.$element.contains(target);\n    };\n\n    ['keydown', 'keyup', 'keypress'].forEach(n => {\n      this.core.$root.addEventListener(n, e => forwardKeyEvent(n, e));\n    });\n\n    this.core.$root.addEventListener('keydown', e => {\n      if (!e.target) {\n        return;\n      }\n\n      if (e.keyCode === 114) { // F3\n        e.preventDefault();\n\n        if (this.search) {\n          this.search.show();\n        }\n      } else if (e.keyCode === 9) { // Tab\n        const {tagName} = e.target;\n        const isInput = ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'].indexOf(tagName) !== -1;\n        const w = Window.lastWindow();\n\n        if (isWithinWindow(w, e.target)) {\n          if (isInput) {\n            if (tagName === 'TEXTAREA') {\n              handleTabOnTextarea(e);\n            }\n          } else {\n            e.preventDefault();\n          }\n        } else {\n          e.preventDefault();\n        }\n      }\n    });\n  }\n\n  initMouseEvents() {\n    // Custom context menu\n    this.core.$root.addEventListener('contextmenu', ev => {\n      if (ev.target === this.core.$root) {\n        this.onContextMenu(ev);\n      }\n    });\n\n    // A hook to prevent iframe events when dragging mouse\n    window.addEventListener('mousedown', () => {\n      let moved = false;\n\n      const onmousemove = () => {\n        if (!moved) {\n          moved = true;\n\n          this.core.$root.setAttribute('data-mousemove', String(true));\n        }\n      };\n\n      const onmouseup = () => {\n        moved = false;\n\n        this.core.$root.setAttribute('data-mousemove', String(false));\n        window.removeEventListener('mousemove', onmousemove);\n        window.removeEventListener('mouseup', onmouseup);\n      };\n\n      window.addEventListener('mousemove', onmousemove);\n      window.addEventListener('mouseup', onmouseup);\n    });\n  }\n\n  initBaseEvents() {\n    // Resize hook\n    let resizeDebounce;\n    window.addEventListener('resize', () => {\n      clearTimeout(resizeDebounce);\n      resizeDebounce = setTimeout(() => this._updateCSS(), 200);\n    });\n\n    // Prevent navigation\n    history.pushState(null, null, document.URL);\n    window.addEventListener('popstate', () => {\n      history.pushState(null, null, document.URL);\n    });\n\n    // Prevents background scrolling on iOS\n    this.core.$root.addEventListener('touchmove', e => e.preventDefault());\n  }\n\n  initLocales() {\n    // Right-to-left support triggers\n    const rtls = this.core.config('locale.rtl');\n    const checkRTL = () => {\n      const locale = this.core.make('osjs/locale')\n        .getLocale()\n        .split('_')[0]\n        .toLowerCase();\n\n      const isRtl = rtls.indexOf(locale) !== -1;\n      this.core.$root.setAttribute('data-dir', isRtl ? 'rtl' : 'ltr');\n    };\n    this.core.on('osjs/settings:load', checkRTL);\n    this.core.on('osjs/settings:save', checkRTL);\n    this.core.on('osjs/core:started', checkRTL);\n\n  }\n\n  start() {\n    if (this.search) {\n      this.search.init();\n    }\n\n    this._updateCSS();\n  }\n\n  /**\n   * Update CSS\n   */\n  _updateCSS() {\n    if (!this.$styles) {\n      return;\n    }\n\n    const mobile = this.core.config('windows.mobile');\n    const isMobile = !mobile ? false : this.core.$root.offsetWidth <= mobile;\n    this.core.$root.setAttribute('data-mobile', isMobile);\n\n    this.$styles.innerHTML = TEMPLATE(this.subtract);\n  }\n\n  addContextMenu(entries) {\n    this.contextmenuEntries = this.contextmenuEntries.concat(entries);\n  }\n\n  /**\n   * Applies settings and updates desktop\n   * @param {Object} [settings] Use this set instead of loading from settings\n   */\n  applySettings(settings) {\n    const lockSettings = this.core.config('desktop.lock');\n    const defaultSettings = this.core.config('desktop.settings');\n    let newSettings;\n\n    if (lockSettings) {\n      newSettings = defaultSettings;\n    } else {\n      const userSettings = settings\n        ? settings\n        : this.core.make('osjs/settings').get('osjs/desktop');\n\n      newSettings = merge(defaultSettings, userSettings, {\n        arrayMerge: (dest, source) => source\n      });\n    }\n\n    const applyOverlays = (test, list) => {\n      if (this.core.has(test)) {\n        const instance = this.core.make(test);\n        instance.removeAll();\n        list.forEach(item => instance.create(item));\n      }\n    };\n\n    const applyCss = ({font, background}) => {\n      this.core.$root.style.fontFamily = `${font}, sans-serif`;\n\n      applyBackgroundStyles(this.core, background);\n    };\n\n    applyCss(newSettings);\n    applyOverlays('osjs/panels', newSettings.panels);\n    applyOverlays('osjs/widgets', newSettings.widgets);\n\n    this.applyTheme(newSettings.theme);\n    this.applyIcons(newSettings.icons);\n\n    return Object.assign({}, newSettings);\n  }\n\n  /**\n   * Removes current style theme from DOM\n   */\n  _removeTheme() {\n    this.emit('theme:destroy');\n\n    this.off([\n      'theme:init',\n      'theme:destroy',\n      'theme:window:change',\n      'theme:window:transitionend'\n    ]);\n\n    this.$theme.forEach(el => {\n      if (el && el.parentNode) {\n        el.remove();\n      }\n    });\n\n    this.$theme = [];\n  }\n\n  /**\n   * Removes current icon theme from DOM\n   */\n  _removeIcons() {\n    this.$icons.forEach(el => {\n      if (el && el.parentNode) {\n        el.remove();\n      }\n    });\n\n    this.$icons = [];\n  }\n\n  /**\n   * Sets the current icon theme from settings\n   */\n  applyIcons(name) {\n    name = name || this.core.config('desktop.icons');\n\n    return this._applyTheme(name)\n      .then(({elements, errors, callback, metadata}) => {\n        this._removeIcons();\n\n        this.$icons = Object.values(elements);\n\n        this.emit('icons:init');\n      });\n  }\n\n  /**\n   * Sets the current style theme from settings\n   */\n  applyTheme(name) {\n    name = name || this.core.config('desktop.theme');\n\n    return this._applyTheme(name)\n      .then(({elements, errors, callback, metadata}) => {\n        this._removeTheme();\n\n        if (callback && metadata) {\n          try {\n            callback(this.core, this, {}, metadata);\n          } catch (e) {\n            console.warn('Exception while calling theme callback', e);\n          }\n        }\n\n        this.$theme = Object.values(elements);\n\n        this.emit('theme:init');\n      });\n  }\n\n  _applyTheme(name, cb) {\n    return this.core.make('osjs/packages')\n      .launch(name)\n      .then(result => {\n        if (result.errors.length) {\n          console.error(result.errors);\n        }\n\n        return result;\n      });\n  }\n\n  _applySettingsByKey(k, v) {\n    return this.core.make('osjs/settings')\n      .set('osjs/desktop', k, v)\n      .save()\n      .then(() => this.applySettings());\n  }\n\n  onDeveloperMenu(ev) {\n    const _ = this.core.make('osjs/locale').translate;\n    const s = this.core.make('osjs/settings').get();\n\n    const storageItems = Object.keys(s)\n      .map(k => ({\n        label: k,\n        onclick: () => {\n          this.core.make('osjs/settings')\n            .clear(k)\n            .then(() => this.applySettings());\n        }\n      }));\n\n    this.core.make('osjs/contextmenu').show({\n      position: ev,\n      menu: [\n        {\n          label: _('LBL_KILL_ALL'),\n          onclick: () => Application.destroyAll()\n        },\n        {\n          label: _('LBL_APPLICATIONS'),\n          items: Application.getApplications().map(proc => ({\n            label: `${proc.metadata.name} (${proc.pid})`,\n            items: [\n              {\n                label: _('LBL_KILL'),\n                onclick: () => proc.destroy()\n              },\n              {\n                label: _('LBL_RELOAD'),\n                onclick: () => proc.relaunch()\n              }\n            ]\n          }))\n        },\n        {\n          label: 'Clear Storage',\n          items: storageItems\n        }\n      ]\n    });\n  }\n\n  onContextMenu(ev) {\n    const lockSettings = this.core.config('desktop.lock');\n    const extras = [].concat(...this.contextmenuEntries.map(e => typeof e === 'function' ? e() : e));\n    const config = this.core.config('desktop.contextmenu');\n\n    if (config === false || config.enabled === false) {\n      return;\n    }\n\n    const useDefaults = config === true || config.defaults; // NOTE: Backward compability\n\n    const _ = this.core.make('osjs/locale').translate;\n    const __ = this.core.make('osjs/locale').translatableFlat;\n\n    const themes = this.core.make('osjs/packages')\n      .getPackages(p => p.type === 'theme');\n\n    const defaultItems = lockSettings ? [] : [{\n      label: _('LBL_DESKTOP_SELECT_WALLPAPER'),\n      onclick: () => {\n        this.core.make('osjs/dialog', 'file', {\n          mime: ['^image']\n        }, (btn, file) => {\n          if (btn === 'ok') {\n            this._applySettingsByKey('background.src', file);\n          }\n        });\n      }\n    }, {\n      label: _('LBL_DESKTOP_SELECT_THEME'),\n      items: themes.map(t => ({\n        label: __(t.title, t.name),\n        onclick: () => {\n          this._applySettingsByKey('theme', t.name);\n        }\n      }))\n    }];\n\n    const base = useDefaults === 'function'\n      ? config.defaults(this, defaultItems)\n      : (useDefaults ? defaultItems : []);\n\n    const provided = typeof this.options.contextmenu === 'function'\n      ? this.options.contextmenu(this, defaultItems)\n      : this.options.contextmenu || [];\n\n    const menu = [\n      ...base,\n      ...provided,\n      ...extras\n    ];\n\n    if (menu.length) {\n      this.core.make('osjs/contextmenu').show({\n        menu,\n        position: ev\n      });\n    }\n  }\n\n  /**\n   * Gets the rectangle of available space\n   *\n   * @desc This is based on any panels etc taking up space\n   * @return {Object}\n   */\n  getRect() {\n    const root = this.core.$root;\n    const {left, top, right, bottom} = this.subtract;\n    const width = root.offsetWidth - left - right;\n    const height = root.offsetHeight - top - bottom;\n\n    return {width, height, top, bottom, left, right};\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport * as VFS from './vfs';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport defaultAdapter from './adapters/vfs/null';\nimport systemAdapter from './adapters/vfs/system';\nimport appsAdapter from './adapters/vfs/apps';\nimport merge from 'deepmerge';\n\n/**\n * VFS Mountpoint\n * @param {String} name Name\n * @param {String} label Label\n * @param {String} adapter Adater name\n * @param {Boolean} [enabled=true] Enabled state\n * @param {Object} [attributes] Attributes\n * @param {String} [attributes.visibility='global'] Visibility in UI\n * @param {Boolean} [attributes.local=true] Local filesystem ?\n * @param {Boolean} [attributes.searchable=true] If can be searched\n * @param {Boolean} [attributes.readOnly=false] Readonly\n * @typedef Mountpoint\n */\n\n/**\n * Filesystem Manager\n *\n * @desc Class that manages filesystems\n */\nexport default class Filesystem extends EventEmitter {\n\n  /**\n   * Create filesystem manager\n   *\n   * @param {Core} core Core reference\n   * @param {Object} [options] Options\n   * @param {Map<String,Adapter>} [options.adapters] Adapter registry\n   * @param {Mountpoint[]} [options.mounts] Mountpoints\n   */\n  constructor(core, options = {}) {\n    options = Object.assign({}, {\n      adapters: {},\n      mounts: []\n    }, options);\n\n    super('Filesystem');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * Adapter registry\n     * @type {Map<String, Adapter>}\n     */\n    this.adapters = Object.assign({}, {\n      system: systemAdapter,\n      apps: appsAdapter\n    }, this.core.config('vfs.adapters', {}), options.adapters);\n\n    /**\n     * Mountpoints\n     * @type {Mountpoint[]}\n     */\n    this.mounts = [];\n\n    /**\n     * Options\n     * @type {Object}\n     */\n    this.options = {};\n    /**\n     * A wrapper for VFS method requests\n     * @type {Map<String, Function>}\n     */\n    this.proxy = Object.keys(VFS).reduce((result, method) => {\n      return Object.assign({\n        [method]: (...args) => this._request(method, ...args)\n      }, result);\n    }, {});\n  }\n\n  /**\n   * Mounts all configured mountpoints\n   */\n  mountAll(stopOnError = true) {\n    this.mounts = this.core.config('vfs.mountpoints')\n      .concat(this.options.mounts || [])\n      .map(mount => {\n        try {\n          return this.createMountpoint(mount);\n        } catch (e) {\n          console.warn('Error while creating mountpoint', e);\n        }\n\n        return null;\n      })\n      .filter((mount, pos, arr) => {\n        const index = arr.findIndex(item => item.label === mount.label || item.root === mount.label);\n        if (index === pos) {\n          return true;\n        }\n\n        console.warn('Removed duplicate mountpoint', mount);\n        return false;\n      })\n      .filter(mount => mount !== null);\n\n    const fn = m => stopOnError\n      ? this._mountpointAction(m)\n      : this._mountpointAction(m).catch(err => console.warn('Error while mounting', m, err));\n\n    return Promise.all(this.mounts.map(fn));\n  }\n\n  /**\n   * Mount given filesystem\n   * @param {String} name Filesystem name\n   * @throws {Error} On invalid name or if already mounted\n   */\n  mount(name) {\n    return this._mountAction(name, false);\n  }\n\n  /**\n   * Unmount given filesystem\n   * @param {String} name Filesystem name\n   * @throws {Error} On invalid name or if already unmounted\n   */\n  unmount(name) {\n    return this._mountAction(name, true);\n  }\n\n  /**\n   * Internal wrapper for mounting/unmounting\n   *\n   * @param {Mountpoint} mountpoint The mountpoint\n   * @param {boolean} [unmount=false] If action is unmounting\n   * @return {Promise<Boolean, Error>}\n   */\n  _mountpointAction(mountpoint, unmount = false) {\n    const eventName = unmount ? 'unmounted' : 'mounted';\n    const coreEventName = unmount ? 'unmount' : 'mount';\n\n    return mountpoint._adapter[coreEventName]({}, mountpoint)\n      .then(result => {\n        if (result) {\n          mountpoint.mounted = !unmount;\n\n          this.emit(eventName, mountpoint);\n          this.core.emit('osjs/fs:' + coreEventName);\n        }\n\n        return result;\n      });\n  }\n\n  /**\n   * Internal wrapper for mounting/unmounting by name\n   *\n   * @param {string} name Mountpoint name\n   * @param {boolean} [unmount=false] If action is unmounting\n   * @return {Promise<Boolean, Error>}\n   */\n  _mountAction(name, unmount) {\n    return Promise.resolve(this.mounts.find(m => m.name === name))\n      .then(found => {\n        const _ = this.core.make('osjs/locale').translate;\n\n        // FIXME: Add already mounting state\n        if (!found) {\n          throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND', name));\n        } else if (unmount && !found.mounted) {\n          throw new Error(_('ERR_VFS_MOUNT_NOT_MOUNTED', name));\n        } else if (!unmount && found.mounted) {\n          throw new Error(_('ERR_VFS_MOUNT_ALREADY_MOUNTED', name));\n        }\n\n        return this._mountpointAction(found, unmount);\n      });\n  }\n\n  /**\n   * Gets the proxy for VFS methods\n   * @return {Map<String, Function>} A map of VFS functions\n   */\n  request() {\n    return this.proxy;\n  }\n\n  /**\n   * Perform a VFS method request\n   * @param {String} method VFS method name\n   * @param {*} ...args Arguments\n   * @return {*}\n   */\n  _request(method, ...args) {\n    if (['rename', 'move', 'copy'].indexOf(method) !== -1) {\n      const [src, dest] = args;\n      const srcMount = this.getMountpointFromPath(src);\n      const destMount = this.getMountpointFromPath(dest);\n      const sameAdapter = srcMount.adapter === destMount.adapter;\n\n      if (!sameAdapter) {\n        return VFS.readfile(srcMount._adapter, srcMount)(src)\n          .then(ab => VFS.writefile(destMount._adapter, destMount)(dest, ab))\n          .then(result => {\n            return method === 'rename'\n              ? VFS.unlink(srcMount._adapter, srcMount)(src).then(() => result)\n              : result;\n          });\n      }\n    }\n\n    const [file] = args;\n    const mount = this.getMountpointFromPath(file);\n\n    this.core.emit(`osjs/vfs:${method}`, ...args);\n\n    return VFS[method](mount._adapter, mount)(...args);\n  }\n\n  /**\n   * Creates a new mountpoint based on given properties\n   * @param {object} props Properties (see Mountpoint)\n   * @return {Mountpoint}\n   */\n  createMountpoint(props) {\n    const name = props.adapter || this.core.config('vfs.defaultAdapter');\n    const adapter = Object.assign({}, defaultAdapter, this.adapters[name](this.core));\n\n    const result = merge({\n      enabled: true,\n      mounted: false,\n      adapter: name,\n      attributes: {\n        visibility: 'global',\n        local: true,\n        searchable: true,\n        readOnly: false\n      }\n    }, props);\n\n    return Object.assign({\n      _adapter: adapter,\n      label: name,\n      root: `${result.name || name}:/`\n    }, result);\n  }\n\n  /**\n   * Gets mountpoint from given path\n   * @param {string|object} file The file object\n   * @return {Mountpoint|null}\n   */\n  getMountpointFromPath(file) {\n    const path = typeof file === 'string' ? file : file.path;\n    const re = /^(\\w+):(.*)/;\n    const match = String(path).replace(/\\+/g, '/').match(re);\n    const [prefix] = Array.from(match || []).slice(1);\n    const _ = this.core.make('osjs/locale').translate;\n\n    if (!prefix) {\n      throw new Error(_('ERR_VFS_PATH_FORMAT_INVALID', path));\n    }\n\n    const found = this.mounts.find(m => m.name === prefix);\n\n    if (!found) {\n      throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND_FOR', `${prefix}:`));\n    }\n\n    return found;\n  }\n\n  /**\n   * Gets all mountpoints\n   * @return {Object[]}\n   */\n  getMounts(all = false) {\n    const theme = this.core.make('osjs/theme');\n    const icon = str => str\n      ? (typeof str === 'string' ? str : theme.icon(str.name))\n      : theme.icon('drive-harddisk');\n\n    return this.mounts\n      .filter(m => all || m.mounted)\n      .filter(m => m.enabled !== false)\n      .map(m => ({\n        attributes: Object.assign({}, m.attributes),\n        icon: icon(m.icon),\n        name: m.name,\n        label: m.label,\n        root: m.root\n      }));\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Julien Gomes Dias <abld@abld.info\n * @licence Simplified BSD License\n */\n\nexport const de_DE = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Cannot make requests in standalone mode.',\n  ERR_REQUEST_NOT_OK: 'An error occured while performing a request: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' nicht gefunden',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem für \\'{0}\\' nicht gefunden',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' nicht gemountet',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' schon gemountet',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Given path \\'{0}\\' does not match \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Paket-Metadaten  \\'{0}\\' nicht gefunden',\n  ERR_PACKAGE_LOAD: 'Paket Laden \\'{0}\\' ist fehlgeschlagen: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Paketlaufzeit \\'{0}\\' nicht gefunden',\n  ERR_PACKAGE_NO_METADATA: 'Metadaten für \\'{0}\\' nicht gefunden. Ist es in der Manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Eine Ausnahme trat in \\'{0}\\' auf.',\n  ERR_WINDOW_ID_EXISTS: 'Fenster mit der ID \\'{0}\\' existiert schon',\n  ERR_INVALID_LOCALE: 'Invalid locale \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Verbindung unterbrochen',\n  LBL_CONNECTION_LOST_MESSAGE: 'Die Verbindung zu OS.js wurde unterbrochen. Wiederverbinden... ',\n  LBL_CONNECTION_RESTORED: 'Verbindung wiederhergestellt',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Die Verbindung OS.js server was restored.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'IT-Entwicklung',\n  LBL_APP_CAT_SCIENCE: 'Wissenschaft',\n  LBL_APP_CAT_GAMES: 'Spiels',\n  LBL_APP_CAT_GRAPHICS: 'Grafiken',\n  LBL_APP_CAT_NETWORK: 'Netzwerk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Office',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Dienstprogramme',\n  LBL_APP_CAT_OTHER: 'Andere',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Applikation auswählen',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Applikation für \\'{0}\\' auswählen',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Wallpaper auswählen',\n  LBL_DESKTOP_SELECT_THEME: 'Theme auswählen',\n  LBL_SEARCH_TOOLTOP: 'Dateisysteme ({0}) finden',\n  LBL_SEARCH_PLACEHOLDER: 'Dateisysteme finden...',\n  LBL_SEARCH_WAIT: 'Suche...',\n  LBL_SEARCH_RESULT: 'Anzeige von {0} Ergebnissen',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Oben',\n  LBL_LEFT: 'Links',\n  LBL_RIGHT: 'Rechts',\n  LBL_BOTTOM: 'Unten',\n  LBL_MENU: 'Menü',\n  LBL_ERROR: 'Error',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Warnung',\n  LBL_SUCCESS: 'Success',\n  LBL_FAILURE: 'Failure',\n  LBL_WINDOW: 'Fenster',\n  LBL_WINDOWS: 'Fenster',\n  LBL_NOTIFICATION: 'Benachrichtigung',\n  LBL_NOTIFICATIONS: 'Benachrichtigungen',\n  LBL_TRAY: 'Infobereich-Eintrag',\n  LBL_NAME: 'Name',\n  LBL_TYPE: 'Typ',\n  LBL_SIZE: 'Größe',\n  LBL_FILE: 'Datei',\n  LBL_NEW: 'Neue',\n  LBL_OPEN: 'Öffnen',\n  LBL_SAVE: 'Speichern',\n  LBL_SAVEAS: 'Speichern als',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abbrechen',\n  LBL_CANCEL: 'Beenden',\n  LBL_CLOSE: 'Schließen',\n  LBL_QUIT: 'Verlassen',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nein',\n  LBL_GO: 'Los',\n  LBL_MKDIR: 'Neues Verzeichnis erstellen',\n  LBL_MKFILE: 'Neue Datei erstellen',\n  LBL_COPY: 'Kopieren',\n  LBL_PASTE: 'Einfügen',\n  LBL_CUT: 'Ausschneiden',\n  LBL_MOVE: 'Verschieben',\n  LBL_RENAME: 'Umbenennen',\n  LBL_DELETE: 'Löschen',\n  LBL_DOWNLOAD: 'Herunterladen',\n  LBL_REFRESH: 'Aktualisieren',\n  LBL_RELOAD: 'Neu laden',\n  LBL_HOME: 'Startseite',\n  LBL_VIEW: 'Ansicht',\n  LBL_HELP: 'Hilfe',\n  LBL_ABOUT: 'Über',\n  LBL_APPLICATION: 'Anwendungsprogramme',\n  LBL_APPLICATIONS: 'Anwendungsprogrammen',\n  LBL_KILL: 'Beenden',\n  LBL_KILL_ALL: 'Beenden alle'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const en_EN = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Cannot make requests in standalone mode.',\n  ERR_REQUEST_NOT_OK: 'An error occured while performing a request: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' not found',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem not found for \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' not mounted',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' already mounted',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Given path \\'{0}\\' does not match \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Package Metadata \\'{0}\\' not found',\n  ERR_PACKAGE_LOAD: 'Package Loading \\'{0}\\' failed: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Package Runtime \\'{0}\\' not found',\n  ERR_PACKAGE_NO_METADATA: 'Metadata not found for \\'{0}\\'. Is it in the manifest?',\n  ERR_PACKAGE_EXCEPTION: 'An exception occured in \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Window with ID \\'{0}\\' already exists',\n  ERR_INVALID_LOCALE: 'Invalid locale \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Connection Lost',\n  LBL_CONNECTION_LOST_MESSAGE: 'The connection was lost. Reconnecting....',\n  LBL_CONNECTION_RESTORED: 'Connection Restored',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'The connection to the server was restored.',\n  LBL_CONNECTION_FAILED: 'Connection Failed',\n  LBL_CONNECTION_FAILED_MESSAGE: 'The connection could not be established. Some features might not work properly.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Development',\n  LBL_APP_CAT_SCIENCE: 'Science',\n  LBL_APP_CAT_GAMES: 'Games',\n  LBL_APP_CAT_GRAPHICS: 'Graphics',\n  LBL_APP_CAT_NETWORK: 'Network',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Office',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Utilities',\n  LBL_APP_CAT_OTHER: 'Other',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Select application',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Select application for \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Select wallpaper',\n  LBL_DESKTOP_SELECT_THEME: 'Select theme',\n  LBL_SEARCH_TOOLTOP: 'Search Filesystem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Search filesystems...',\n  LBL_SEARCH_WAIT: 'Searching...',\n  LBL_SEARCH_RESULT: 'Showing {0} results',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Top',\n  LBL_LEFT: 'Left',\n  LBL_RIGHT: 'Right',\n  LBL_BOTTOM: 'Bottom',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Error',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Warning',\n  LBL_SUCCESS: 'Success',\n  LBL_FAILURE: 'Failure',\n  LBL_WINDOW: 'Window',\n  LBL_WINDOWS: 'Windows',\n  LBL_NOTIFICATION: 'Notification',\n  LBL_NOTIFICATIONS: 'Notifications',\n  LBL_TRAY: 'Tray Entry',\n  LBL_NAME: 'Name',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Size',\n  LBL_FILE: 'File',\n  LBL_NEW: 'New',\n  LBL_OPEN: 'Open',\n  LBL_SAVE: 'Save',\n  LBL_SAVEAS: 'Save As',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abort',\n  LBL_CANCEL: 'Cancel',\n  LBL_CLOSE: 'Close',\n  LBL_QUIT: 'Quit',\n  LBL_YES: 'Yes',\n  LBL_NO: 'No',\n  LBL_GO: 'Go',\n  LBL_MKDIR: 'Create new directory',\n  LBL_MKFILE: 'Create new file',\n  LBL_COPY: 'Copy',\n  LBL_PASTE: 'Paste',\n  LBL_CUT: 'Cut',\n  LBL_MOVE: 'Move',\n  LBL_RENAME: 'Rename',\n  LBL_DELETE: 'Delete',\n  LBL_DOWNLOAD: 'Download',\n  LBL_REFRESH: 'Refresh',\n  LBL_RELOAD: 'Reload',\n  LBL_HOME: 'Home',\n  LBL_VIEW: 'View',\n  LBL_HELP: 'Help',\n  LBL_ABOUT: 'About',\n  LBL_APPLICATION: 'Application',\n  LBL_APPLICATIONS: 'Applications',\n  LBL_KILL: 'Kill',\n  LBL_KILL_ALL: 'Kill all',\n  LBL_MINIMIZE: 'Minimize',\n  LBL_MAXIMIZE: 'Maximize',\n  LBL_RESTORE: 'Restore',\n  LBL_RAISE: 'Raise',\n  LBL_SHADE: 'Shade',\n  LBL_UNSHADE: 'Unshade',\n  LBL_ONTOP: 'On top',\n  LBL_RESIZE: 'Resize',\n  LBL_BACK: 'Back',\n  LBL_FORWARD: 'Forward',\n  LBL_UPLOAD: 'Upload',\n  LBL_IMAGE: 'Image'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Julien Gomes Dias <abld@abld.info>\n * @licence Simplified BSD License\n */\n\nexport const fr_FR = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Impossible d\\'effectuer des requêtes en mode autonome.',\n  ERR_REQUEST_NOT_OK: 'Une erreur s\\'est produite en exécutant une requête : {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Système de fichier \\'{0}\\' absent',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Système de fichier pour \\'{0}\\' absent',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Le système de fichier \\'{0}\\' n\\'est pas encore monté',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Le système de fichier \\'{0}\\' est déjà monté',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Le dossier \\'{0}\\' ne correspond pas \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Les métadonnées du paquet \\'{0}\\' n\\'ont pas été touvées',\n  ERR_PACKAGE_LOAD: 'Le chargement du paquet \\'{0}\\' a échoué: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Durée d\\'exécution du paquet \\'{0}\\' absente',\n  ERR_PACKAGE_NO_METADATA: 'Métadonnée absentes pour \\'{0}\\'. Sont-elles dans le manifeste ?',\n  ERR_PACKAGE_EXCEPTION: 'Une exception s\\'est produite dans \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'La fénêtre avec l\\'identifiant \\'{0}\\' existe déjà',\n  ERR_INVALID_LOCALE: 'Paramètre de langue invalide \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Connexion perdue',\n  LBL_CONNECTION_LOST_MESSAGE: 'La connexion a été perdue. Reconnexion...',\n  LBL_CONNECTION_RESTORED: 'Connexion Restaurée',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'La connexion a été restaurée.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Développement',\n  LBL_APP_CAT_SCIENCE: 'Science',\n  LBL_APP_CAT_GAMES: 'Jeux',\n  LBL_APP_CAT_GRAPHICS: 'Graphisme',\n  LBL_APP_CAT_NETWORK: 'Réseau',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimédia',\n  LBL_APP_CAT_OFFICE: 'Bureautique',\n  LBL_APP_CAT_SYSTEM: 'Système',\n  LBL_APP_CAT_UTILITIES: 'Utilitaires',\n  LBL_APP_CAT_OTHER: 'Autre',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Sélectionner l\\'application',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Sélectionner l\\'application pour \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Sélectionner le fond d\\'écran',\n  LBL_DESKTOP_SELECT_THEME: 'Sélectionner le thème',\n  LBL_SEARCH_TOOLTOP: 'Recherche d\\'un système de fichier ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Recherche des systèmes de fichiers...',\n  LBL_SEARCH_WAIT: 'Recherche...',\n  LBL_SEARCH_RESULT: 'Affichage des résultats {0}',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'En Haut',\n  LBL_LEFT: 'À Gauche',\n  LBL_RIGHT: 'À Droite',\n  LBL_BOTTOM: 'En Bas',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Erreur',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Attention',\n  LBL_SUCCESS: 'Succés',\n  LBL_FAILURE: 'Échec',\n  LBL_WINDOW: 'Fenêtre',\n  LBL_WINDOWS: 'Fenêtres',\n  LBL_NOTIFICATION: 'Notification',\n  LBL_NOTIFICATIONS: 'Notifications',\n  LBL_TRAY: 'Accès au plateau',\n  LBL_NAME: 'Nom',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Taille',\n  LBL_FILE: 'Fichier',\n  LBL_NEW: 'Nouveau',\n  LBL_OPEN: 'Ouvrir',\n  LBL_SAVE: 'Sauvegarder',\n  LBL_SAVEAS: 'Sauvegarder comme',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abandonner',\n  LBL_CANCEL: 'Annuler',\n  LBL_CLOSE: 'Fermer',\n  LBL_QUIT: 'Quitter',\n  LBL_YES: 'Oui',\n  LBL_NO: 'Non',\n  LBL_GO: 'C\\'est parti !',\n  LBL_MKDIR: 'Créer nouveau dossier',\n  LBL_MKFILE: 'Créer nouveau fichier',\n  LBL_COPY: 'Copier',\n  LBL_PASTE: 'Coller',\n  LBL_CUT: 'Couper',\n  LBL_MOVE: 'Déplacer',\n  LBL_RENAME: 'Renommer',\n  LBL_DELETE: 'Supprimer',\n  LBL_DOWNLOAD: 'Télécharger',\n  LBL_REFRESH: 'Rafraichir',\n  LBL_RELOAD: 'Recharger',\n  LBL_HOME: 'Accueil',\n  LBL_VIEW: 'Aperçu',\n  LBL_HELP: 'Aide',\n  LBL_ABOUT: 'À propos',\n  LBL_APPLICATION: 'Application',\n  LBL_APPLICATIONS: 'Applications',\n  LBL_KILL: 'Tuer',\n  LBL_KILL_ALL: 'Tuer tout'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport * from './en_EN';\nexport * from './fr_FR';\nexport * from './nb_NO';\nexport * from './sl_SI';\nexport * from './vi_VN';\nexport * from './de_DE';\nexport * from './zh_CN';\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const nb_NO = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Kan ikke gjøre spørringer i standalone modus.',\n  ERR_REQUEST_NOT_OK: 'En feil oppstod under spørring: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filsystem \\'{0}\\' ikke funnet',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filsystem ikke funnet for \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filsystem \\'{0}\\' ikke montert',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' allerede montert',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Angitt sti \\'{0}\\' tilfredstiller ikke format \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Pakke Metadata \\'{0}\\' ikke funnet',\n  ERR_PACKAGE_LOAD: 'Pakke Lasting \\'{0}\\' feilet: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Pakke Runtime \\'{0}\\' ikke funnet',\n  ERR_PACKAGE_NO_METADATA: 'Metadata ikke funnet for \\'{0}\\'. Er den i manifestet?',\n  ERR_PACKAGE_EXCEPTION: 'En unntaksfeil oppstod i \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Vindu med ID \\'{0}\\' eksisterer allerede',\n  ERR_INVALID_LOCALE: 'Ugyldig lokalisering \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Tilkobling tapt',\n  LBL_CONNECTION_LOST_MESSAGE: 'Tilkobling til OS.js var tapt. Kobler til på nytt....',\n  LBL_CONNECTION_RESTORED: 'Tilkobling gjenopprettet',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Tilkobling til OS.js var gjenopprettet.',\n  LBL_CONNECTION_FAILED: 'Tilkobling feilet',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Tilkobling til OS.js var ikke vellykket. Noen egenskaper er utilgjenglig.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Utvikling',\n  LBL_APP_CAT_SCIENCE: 'Vitenskap',\n  LBL_APP_CAT_GAMES: 'Spill',\n  LBL_APP_CAT_GRAPHICS: 'Grafikk',\n  LBL_APP_CAT_NETWORK: 'Nettverk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Kontor',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Verktøy',\n  LBL_APP_CAT_OTHER: 'Andre',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Velg applikasjon',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Velg applikasjon for \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Velg bakgrunnsbilde',\n  LBL_DESKTOP_SELECT_THEME: 'Velg tema',\n  LBL_SEARCH_TOOLTOP: 'Søk i filsystemer ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Søker filsystemer...',\n  LBL_SEARCH_WAIT: 'Søker...',\n  LBL_SEARCH_RESULT: 'Viser {0} resultater',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Topp',\n  LBL_LEFT: 'Venstre',\n  LBL_RIGHT: 'Høyre',\n  LBL_BOTTOM: 'Bunn',\n  LBL_MENU: 'Meny',\n  LBL_ERROR: 'Feil',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Melding',\n  LBL_WARNINIG: 'Advarsel',\n  LBL_SUCCESS: 'Velykket',\n  LBL_FAILURE: 'Svikt',\n  LBL_WINDOW: 'Vindu',\n  LBL_WINDOWS: 'Vinduer',\n  LBL_NOTIFICATION: 'Notifikasjon',\n  LBL_NOTIFICATIONS: 'Notifikasjoner',\n  LBL_TRAY: 'Tray Oppføring',\n  LBL_NAME: 'Navn',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Størrelse',\n  LBL_FILE: 'Fil',\n  LBL_NEW: 'Ny',\n  LBL_OPEN: 'Åpne',\n  LBL_SAVE: 'Lagre',\n  LBL_SAVEAS: 'Lagre Som',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abort',\n  LBL_CANCEL: 'Avbryt',\n  LBL_CLOSE: 'Lukk',\n  LBL_QUIT: 'Slutt',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nei',\n  LBL_GO: 'Gå',\n  LBL_MKDIR: 'Lag ny mappe',\n  LBL_MKFILE: 'Lag ny fil',\n  LBL_COPY: 'Kopier',\n  LBL_PASTE: 'Lim inn',\n  LBL_CUT: 'Kutt',\n  LBL_MOVE: 'Flytt',\n  LBL_RENAME: 'Navngi',\n  LBL_DELETE: 'Slett',\n  LBL_DOWNLOAD: 'Last ned',\n  LBL_REFRESH: 'Gjenoppfrisk',\n  LBL_RELOAD: 'Last på nytt',\n  LBL_HOME: 'Hjem',\n  LBL_VIEW: 'Visning',\n  LBL_HELP: 'Hjelp',\n  LBL_ABOUT: 'Om',\n  LBL_APPLICATION: 'Applikasjon',\n  LBL_APPLICATIONS: 'Applikasjoner',\n  LBL_KILL: 'Drep',\n  LBL_KILL_ALL: 'Drep alle',\n  LBL_MINIMIZE: 'Minimisèr',\n  LBL_MAXIMIZE: 'Maksimisèr',\n  LBL_RESTORE: 'Gjenopprett',\n  LBL_RAISE: 'Løft',\n  LBL_SHADE: 'Rull opp',\n  LBL_UNSHADE: 'Rull ned',\n  LBL_ONTOP: 'Alltid øverst',\n  LBL_RESIZE: 'Endre størrelse',\n  LBL_BACK: 'Tilbake',\n  LBL_FORWARD: 'Frem',\n  LBL_UPLOAD: 'Last opp',\n  LBL_IMAGE: 'Bilde'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Filip Š <projects@filips.com>\n * @licence Simplified BSD License\n */\n\nexport const sl_SI = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Zahteve v samostojnem načinu niso mogoče.',\n  ERR_REQUEST_NOT_OK: 'Pri zahtevi je prišlo do napake: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Datotečni sistem \\'{0}\\' ni najden',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Datotečni sistem ni najden \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Datotečni sistem \\'{0}\\' ni nameščen',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Datotečni sistem \\'{0}\\' že nameščen',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Podana pot \\'{0}\\' se ne ujema z \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Metapodatki paketa \\'{0}\\' niso najdeni',\n  ERR_PACKAGE_LOAD: 'Pri nalaganju pageta \\'{0}\\' je prišlo do napake: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Koda paketa \\'{0}\\' ni najdena',\n  ERR_PACKAGE_NO_METADATA: 'Metapodatki \\'{0}\\' niso najdeni. Ali so v datoteki manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Sprožena je bila izjema v \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Okno z ID-jem \\'{0}\\' že obstaja',\n  ERR_INVALID_LOCALE: 'Neveljaven prevod \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Izguba povezave',\n  LBL_CONNECTION_LOST_MESSAGE: 'Povezava do strežnika je bila izgubljena. Ponovno povezovanje ...',\n  LBL_CONNECTION_RESTORED: 'Vzpostavitev povezave',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Povezava do strežnika je bila ponovno vzpostavljena.',\n  LBL_CONNECTION_FAILED: 'Povezava ni uspela',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Povezave z OS.js ni bilo mogoče vzpostaviti. Nekatere funkcije morda ne bodo delovale pravilno.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Razvoj',\n  LBL_APP_CAT_SCIENCE: 'Znanost',\n  LBL_APP_CAT_GAMES: 'Igre',\n  LBL_APP_CAT_GRAPHICS: 'Grafika',\n  LBL_APP_CAT_NETWORK: 'Omrežje',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedija',\n  LBL_APP_CAT_OFFICE: 'Pisarna',\n  LBL_APP_CAT_SYSTEM: 'Sistem',\n  LBL_APP_CAT_UTILITIES: 'Orodja',\n  LBL_APP_CAT_OTHER: 'Drugo',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Izberite aplikacijo',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Izberite aplikacijo za \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Izberite ozadje',\n  LBL_DESKTOP_SELECT_THEME: 'Izberite temo',\n  LBL_SEARCH_TOOLTOP: 'Išči datotečni sistem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Iskanje po datotečnih sistemih ...',\n  LBL_SEARCH_WAIT: 'Iskanje ...',\n  LBL_SEARCH_RESULT: 'Prikaz {0} rezultatov',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Zgoraj',\n  LBL_LEFT: 'Levo',\n  LBL_RIGHT: 'Desno',\n  LBL_BOTTOM: 'Spodaj',\n  LBL_MENU: 'Meni',\n  LBL_ERROR: 'Napaka',\n  LBL_INFO: 'Informacije',\n  LBL_MESSAGE: 'Sporočilo',\n  LBL_WARNINIG: 'Opozorilo',\n  LBL_SUCCESS: 'Uspeh',\n  LBL_FAILURE: 'Neuspeh',\n  LBL_WINDOW: 'Okno',\n  LBL_WINDOWS: 'Okna',\n  LBL_NOTIFICATION: 'Obvestilo',\n  LBL_NOTIFICATIONS: 'Obvestila',\n  LBL_TRAY: 'Element vrstice',\n  LBL_NAME: 'Ime',\n  LBL_TYPE: 'Vrsta',\n  LBL_SIZE: 'Velikost',\n  LBL_FILE: 'Datoteka',\n  LBL_NEW: 'Novo',\n  LBL_OPEN: 'Odpri',\n  LBL_SAVE: 'Shrani',\n  LBL_SAVEAS: 'Shrani kot',\n  LBL_OK: 'V redu',\n  LBL_ABORT: 'Prekini',\n  LBL_CANCEL: 'Prekliči',\n  LBL_CLOSE: 'Zapri',\n  LBL_QUIT: 'Izklopi',\n  LBL_YES: 'Da',\n  LBL_NO: 'Ne',\n  LBL_GO: 'Pojdi',\n  LBL_MKDIR: 'Ustvari novo mapo',\n  LBL_MKFILE: 'Ustvari novo datoteko',\n  LBL_COPY: 'Kopiraj',\n  LBL_PASTE: 'Prilepi',\n  LBL_CUT: 'Izreži',\n  LBL_MOVE: 'Premakni',\n  LBL_RENAME: 'Preimenuj',\n  LBL_DELETE: 'Izbriši',\n  LBL_DOWNLOAD: 'Prenesi',\n  LBL_REFRESH: 'Osveži',\n  LBL_RELOAD: 'Osveži',\n  LBL_HOME: 'Domov',\n  LBL_VIEW: 'Pogled',\n  LBL_HELP: 'Pomoč',\n  LBL_ABOUT: 'O programu',\n  LBL_APPLICATION: 'Aplikacija',\n  LBL_APPLICATIONS: 'Aplikacije',\n  LBL_KILL: 'Končaj',\n  LBL_KILL_ALL: 'Končaj vse',\n  LBL_MINIMIZE: 'Pomanjšaj',\n  LBL_MAXIMIZE: 'Povečaj',\n  LBL_RESTORE: 'Obnovi',\n  LBL_RAISE: 'Dvigni',\n  LBL_SHADE: 'Zasenči',\n  LBL_UNSHADE: 'Odsenči',\n  LBL_ONTOP: 'Na vrhu',\n  LBL_RESIZE: 'Spremeni velikost',\n  LBL_BACK: 'Nazaj',\n  LBL_FORWARD: 'Naprej',\n  LBL_UPLOAD: 'Naloži',\n  LBL_IMAGE: 'Slika'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Nguyễn Anh Khoa <khoaakt@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const vi_VN = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Không thể gửi yêu cầu ở chế độ độc lập.',\n  ERR_REQUEST_NOT_OK: 'Đã xảy ra lỗi khi thực hiện yêu cầu: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Không tìm thấy hệ thống tập tin \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Không tìm thấy hệ thống tập tin cho \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Hệ thống tập tin \\'{0}\\' không được gắn kết',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Hệ thống tập tin \\'{0}\\' đã được gắn kết',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Định dạng đường dẫn \\'{0}\\' không khớp với \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Không tìm thấy siêu dữ liệu của gói \\'{0}\\'',\n  ERR_PACKAGE_LOAD: 'Tải gói \\'{0}\\' thất bại: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Không tìm thấy Runtime của gói \\'{0}\\'',\n  ERR_PACKAGE_NO_METADATA: 'Không tìm thấy siêu dữ liệu cho \\'{0}\\'. Bạn có chắc nó đã được báo cáo trong manifest không?',\n  ERR_PACKAGE_EXCEPTION: 'Đã xảy ra lỗi trong \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Cửa sổ với ID \\'{0}\\' đã tồn tại',\n  ERR_INVALID_LOCALE: 'Ngôn ngữ không hợp lệ \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Mất kết nối',\n  LBL_CONNECTION_LOST_MESSAGE: 'Kết nối với OS.js đã bị mất. Đang kết nối lại....',\n  LBL_CONNECTION_RESTORED: 'Đã khôi phục kết nối',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Kết nối với máy chủ OS.js đã được khôi phục.',\n  LBL_CONNECTION_FAILED: 'Kết nối thất bại',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Không thể kết nối đến máy chủ OS.js. Một số tính năng có thể không hoạt động ổn định.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Phát triển',\n  LBL_APP_CAT_SCIENCE: 'Khoa học',\n  LBL_APP_CAT_GAMES: 'Trò chơi',\n  LBL_APP_CAT_GRAPHICS: 'Đồ họa',\n  LBL_APP_CAT_NETWORK: 'Mạng',\n  LBL_APP_CAT_MULTIMEDIA: 'Đa phương tiện',\n  LBL_APP_CAT_OFFICE: 'Văn phòng',\n  LBL_APP_CAT_SYSTEM: 'Hệ thống',\n  LBL_APP_CAT_UTILITIES: 'Tiện ích',\n  LBL_APP_CAT_OTHER: 'Ứng dụng khác',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Chọn ứng dụng',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Chọn ứng dụng để mở tập tin \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Thay đổi hình nền',\n  LBL_DESKTOP_SELECT_THEME: 'Thay đổi chủ đề',\n  LBL_SEARCH_TOOLTOP: 'Tìm kiếm dữ liệu ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Tìm kiếm...',\n  LBL_SEARCH_WAIT: 'Đang tìm kiếm...',\n  LBL_SEARCH_RESULT: 'Đang hiển thị {0} kết quả',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Phía trên',\n  LBL_LEFT: 'Trái',\n  LBL_RIGHT: 'Phải',\n  LBL_BOTTOM: 'Phía dưới',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Lỗi',\n  LBL_INFO: 'Thông tin',\n  LBL_MESSAGE: 'Thông báo',\n  LBL_WARNINIG: 'Cảnh báo',\n  LBL_SUCCESS: 'Thành công',\n  LBL_FAILURE: 'Thất bại',\n  LBL_WINDOW: 'Cửa sổ',\n  LBL_WINDOWS: 'Các cửa sổ',\n  LBL_NOTIFICATION: 'Thông báo',\n  LBL_NOTIFICATIONS: 'Các thông báo',\n  LBL_TRAY: 'Mục khay hệ thống',\n  LBL_NAME: 'Tên',\n  LBL_TYPE: 'Kiểu',\n  LBL_SIZE: 'Kích thước',\n  LBL_FILE: 'Tập tin',\n  LBL_NEW: 'Mới',\n  LBL_OPEN: 'Mở',\n  LBL_SAVE: 'Lưu',\n  LBL_SAVEAS: 'Lưu như',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Hủy thao tác',\n  LBL_CANCEL: 'Hủy bỏ',\n  LBL_CLOSE: 'Đóng',\n  LBL_QUIT: 'Thoát',\n  LBL_YES: 'Có',\n  LBL_NO: 'Không',\n  LBL_GO: 'Đi',\n  LBL_MKDIR: 'Tạo thư mục mới',\n  LBL_MKFILE: 'Tạo tệp mới',\n  LBL_COPY: 'Sao chép',\n  LBL_PASTE: 'Dán',\n  LBL_CUT: 'Cắt',\n  LBL_MOVE: 'Di chuyển',\n  LBL_RENAME: 'Đổi tên',\n  LBL_DELETE: 'Xóa',\n  LBL_DOWNLOAD: 'Tải về',\n  LBL_REFRESH: 'Làm mới',\n  LBL_RELOAD: 'Tải lại',\n  LBL_HOME: 'Trang chủ',\n  LBL_VIEW: 'Xem',\n  LBL_HELP: 'Hướng dẫn',\n  LBL_ABOUT: 'Thông tin',\n  LBL_APPLICATION: 'Ứng dụng',\n  LBL_APPLICATIONS: 'Các ứng dụng',\n  LBL_KILL: 'Đóng',\n  LBL_KILL_ALL: 'Đóng tất cả',\n  LBL_MINIMIZE: 'Thu nhỏ',\n  LBL_MAXIMIZE: 'Tối đa',\n  LBL_RESTORE: 'Phục hồi',\n  LBL_RAISE: 'Nâng lên',\n  LBL_SHADE: 'Làm mở',\n  LBL_UNSHADE: 'Bỏ làm mờ',\n  LBL_ONTOP: 'Ở trên cùng',\n  LBL_RESIZE: 'Thay đổi kích thước',\n  LBL_BACK: 'Lùi',\n  LBL_FORWARD: 'Tiến',\n  LBL_UPLOAD: 'Tải lên',\n  LBL_IMAGE: 'Ảnh'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  lijun <lijun_ay@126.com>\n * @licence Simplified BSD License\n */\n\nexport const zh_CN = {\n  // Core\n  ERR_REQUEST_STANDALONE: '无法在独立模式下发出请求。',\n  ERR_REQUEST_NOT_OK: '执行请求时发生错误：{0}',\n  ERR_VFS_MOUNT_NOT_FOUND: '找不到文件系统 \\'{0}\\' ',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: '找不到\\'{0}\\'的文件系统',\n  ERR_VFS_MOUNT_NOT_MOUNTED: '文件系统 \\'{0}\\' 未挂载',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: '文件系统 \\'{0}\\' 已挂载',\n  ERR_VFS_PATH_FORMAT_INVALID: '给定路径\\'{0}\\'与\\'name:/path\\'不匹配',\n  ERR_PACKAGE_NOT_FOUND: '未找到包的元数据\\'{0}\\'',\n  ERR_PACKAGE_LOAD: '加载包 \\'{0}\\' 失败： {1}',\n  ERR_PACKAGE_NO_RUNTIME: '未找到运行包 \\'{0}\\' ',\n  ERR_PACKAGE_NO_METADATA: '找不到 \\'{0}\\' 的元数据。它在清单（manifest）中吗？',\n  ERR_PACKAGE_EXCEPTION: '\\'{0}\\'发生异常',\n  ERR_WINDOW_ID_EXISTS: 'ID为\\'{0}\\'的窗口已存在',\n  ERR_INVALID_LOCALE: '无效的区域设置 \\'{0}\\'',\n  LBL_CONNECTION_LOST: '连接丢失',\n  LBL_CONNECTION_LOST_MESSAGE: '与OS.js的连接丢失了。重新连接....',\n  LBL_CONNECTION_RESTORED: '连接已恢复',\n  LBL_CONNECTION_RESTORED_MESSAGE: '已恢复与OS.js服务器的连接。',\n  LBL_CONNECTION_FAILED: '连接失败',\n  LBL_CONNECTION_FAILED_MESSAGE: '无法建立与OS.js的连接。 某些功能可能无法正常工作。',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: '开发',\n  LBL_APP_CAT_SCIENCE: '科学',\n  LBL_APP_CAT_GAMES: '游戏',\n  LBL_APP_CAT_GRAPHICS: '图像',\n  LBL_APP_CAT_NETWORK: '网络',\n  LBL_APP_CAT_MULTIMEDIA: '媒体',\n  LBL_APP_CAT_OFFICE: '办公',\n  LBL_APP_CAT_SYSTEM: '系统',\n  LBL_APP_CAT_UTILITIES: '工具',\n  LBL_APP_CAT_OTHER: '其他',\n\n  // UI\n  LBL_LAUNCH_SELECT: '选择应用程序',\n  LBL_LAUNCH_SELECT_MESSAGE: '选择\\'{0}\\'的应用程序',\n  LBL_DESKTOP_SELECT_WALLPAPER: '选择壁纸',\n  LBL_DESKTOP_SELECT_THEME: '选择主题',\n  LBL_SEARCH_TOOLTOP: '搜索文件系统 ({0})',\n  LBL_SEARCH_PLACEHOLDER: '搜索文件系统...',\n  LBL_SEARCH_WAIT: '搜索...',\n  LBL_SEARCH_RESULT: '显示{0}个结果',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KB',\n  LBL_FS_MIB: 'MB',\n  LBL_FS_GIB: 'GB',\n\n  // Generic\n  LBL_TOP: '上',\n  LBL_LEFT: '左',\n  LBL_RIGHT: '右',\n  LBL_BOTTOM: '下',\n  LBL_MENU: '菜单',\n  LBL_ERROR: '错误',\n  LBL_INFO: '信息',\n  LBL_MESSAGE: '消息',\n  LBL_WARNINIG: '警告',\n  LBL_SUCCESS: '成功',\n  LBL_FAILURE: '失败',\n  LBL_WINDOW: '窗口',\n  LBL_WINDOWS: '窗口',\n  LBL_NOTIFICATION: '通知',\n  LBL_NOTIFICATIONS: '通知',\n  LBL_TRAY: '托盘',\n  LBL_NAME: '名称',\n  LBL_TYPE: '类型',\n  LBL_SIZE: '大小',\n  LBL_FILE: '文件',\n  LBL_NEW: '新建',\n  LBL_OPEN: '打开',\n  LBL_SAVE: '保存',\n  LBL_SAVEAS: '另存为',\n  LBL_OK: '确定',\n  LBL_ABORT: '中止',\n  LBL_CANCEL: '取消',\n  LBL_CLOSE: '关闭',\n  LBL_QUIT: '退出',\n  LBL_YES: '是',\n  LBL_NO: '否',\n  LBL_GO: '进行',\n  LBL_MKDIR: '创建新目录',\n  LBL_MKFILE: '创建新文件',\n  LBL_COPY: '复制',\n  LBL_PASTE: '粘贴',\n  LBL_CUT: '剪切',\n  LBL_MOVE: '移动',\n  LBL_RENAME: '重命名',\n  LBL_DELETE: '删除',\n  LBL_DOWNLOAD: '下载',\n  LBL_REFRESH: '刷新',\n  LBL_RELOAD: '刷新',\n  LBL_HOME: '主页',\n  LBL_VIEW: '视图',\n  LBL_HELP: '帮助',\n  LBL_ABOUT: '关于',\n  LBL_APPLICATION: '应用程序',\n  LBL_APPLICATIONS: '应用程序',\n  LBL_KILL: '杀死',\n  LBL_KILL_ALL: '全部杀死',\n  LBL_MINIMIZE: '最小化',\n  LBL_MAXIMIZE: '最大化',\n  LBL_RESTORE: '恢复',\n  LBL_RAISE: '上浮',\n  LBL_SHADE: '置后',\n  LBL_UNSHADE: '置前',\n  LBL_ONTOP: '顶端',\n  LBL_RESIZE: '调整',\n  LBL_BACK: '后退',\n  LBL_FORWARD: '前进',\n  LBL_UPLOAD: '上传',\n  LBL_IMAGE: '图像'\n};\n","import {h, app} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst createAttributes = (props, field, disabled) => {\n  disabled = disabled ? 'disabled' : undefined;\n  if (field.tagName === 'input') {\n    if (field.attributes.type !== 'submit') {\n      return Object.assign({}, {\n        autocapitalize: 'off',\n        autocomplete: 'new-' + field.attributes.name,\n        disabled,\n        oncreate: el => (el.value = props[field.attributes.name] || field.value || '')\n      }, field.attributes);\n    }\n  }\n\n  return Object.assign({disabled}, field.attributes);\n};\n\nconst createFields = (props, fields, disabled) => {\n  const children = f => {\n    if (f.tagName === 'select' && f.choices) {\n      return f.choices.map(c => h('option', {\n        current: c.current ? 'current' : undefined,\n        value: c.value\n      }, c.label));\n    }\n\n    return [];\n  };\n\n  return fields.map(f => h('div', {\n    class: 'osjs-login-field osjs-login-field-' + f.tagName\n  }, h(f.tagName, createAttributes(props, f, disabled), children(f))));\n};\n\nconst createView = (options) => {\n  const {src, position} = options.logo;\n\n  const logo = () =>\n    h('div', {\n      class: 'osjs-login-logo',\n      'data-position': position,\n      style: {\n        backgroundImage: `url('${src}')`\n      }\n    });\n\n  const fields = state => {\n    const result = createFields(state, options.fields, state.loading);\n\n    if (src && position === 'bottom') {\n      result.push(logo());\n    }\n\n    if (options.stamp) {\n      result.push(h('div', {\n        class: 'osjs-login-stamp'\n      }, options.stamp));\n    }\n\n    return result;\n  };\n\n  return (state, actions) => {\n    const header = [];\n\n    if (options.title) {\n      header.push(h('div', {\n        class: 'osjs-login-header'\n      }, h('span', {}, options.title)));\n    }\n\n    if (src && ['top', 'middle'].indexOf(position) !== -1) {\n      const m = position === 'top'\n        ? 'unshift'\n        : 'push';\n\n      header[m](logo());\n    }\n\n    const createSide = side => position === side\n      ? h('div', {'data-position': position}, logo())\n      : null;\n\n    const left = () => createSide('left');\n    const right = () => createSide('right');\n    const middle = () => h('div', {class: 'osjs-login-content'}, children);\n\n    const formFields = fields(state);\n\n    const children = [\n      ...header,\n\n      h('div', {\n        class: 'osjs-login-error',\n        style: {display: state.error ? 'block' : 'none'}\n      }, h('span', {}, state.error)),\n      h('form', {\n        loading: false,\n        method: 'post',\n        action: '#',\n        autocomplete: 'off',\n        onsubmit: actions.submit\n      }, formFields)\n    ];\n\n    return h('div', {\n      class: 'osjs-login',\n      id: options.id,\n      style: {display: state.hidden ? 'none' : undefined}\n    }, [left(), middle(), right()].filter(el => !!el));\n  };\n};\n\nconst create = (options, login, startHidden, $container) => {\n  const ee = new EventEmitter('LoginUI');\n  const view = createView(options);\n  const a = app(Object.assign({\n    hidden: startHidden\n  }, login), {\n    setLoading: loading => ({loading}),\n    setError: error => ({error, hidden: false}),\n    submit: ev => state => {\n      ev.preventDefault();\n\n      if (state.loading) {\n        return;\n      }\n\n      const values = Array.from(ev.target.elements)\n        .filter(el => el.type !== 'submit')\n        .reduce((o, el) => Object.assign(o, {[el.name] : el.value}), {});\n\n      ee.emit('login:post', values);\n    }\n  }, view, $container);\n\n  ee.on('login:start', () => a.setLoading(true));\n  ee.on('login:stop', () => a.setLoading(false));\n  ee.on('login:error', err => a.setError(err));\n\n  return ee;\n};\n\nexport default create;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport createUI from './login-ui';\n\n\n/**\n * OS.js Login UI\n *\n * @desc Handles the Login UI and its events\n */\nexport default class Login extends EventEmitter {\n\n  /**\n   * Create authentication handler\n   *\n   * @param {Core} core Core reference\n   * @param {Object} [options] Options\n   * @param {String} [options.title] Title\n   * @param {Array} [options.fields] Fields\n   */\n  constructor(core, options) {\n    super('Login');\n\n    this.$container = null;\n    this.core = core;\n    this.options = Object.assign({\n      id: 'osjs-login',\n      title: 'Welcome to OS.js',\n      stamp: core.config('version'),\n      logo: {\n        position: 'top',\n        src: null\n      },\n      fields: [{\n        tagName: 'input',\n        attributes: {\n          name: 'username',\n          type: 'text',\n          placeholder: 'Username'\n        }\n      }, {\n        tagName: 'input',\n        attributes: {\n          name: 'password',\n          type: 'password',\n          placeholder: 'Password'\n        }\n      }, {\n        tagName: 'input',\n        attributes: {\n          type: 'submit',\n          value: 'Login'\n        }\n      }]\n    }, options);\n  }\n\n  /**\n   * Initializes the UI\n   */\n  init(startHidden) {\n    this.$container = document.createElement('div');\n    this.$container.id = this.options.id;\n    this.$container.className = 'osjs-login-base';\n    this.core.$root.classList.add('login');\n    this.core.$root.appendChild(this.$container);\n\n    this.render(startHidden);\n  }\n\n  /**\n   * Destroys the UI\n   */\n  destroy() {\n    this.core.$root.classList.remove('login');\n\n    if (this.$container) {\n      this.$container.remove();\n    }\n  }\n\n  /**\n   * Renders the UI\n   */\n  render(startHidden) {\n    const login = this.core.config('auth.login', {});\n    const ui = createUI(this.options, login, startHidden, this.$container);\n\n    ui.on('login:post', values => this.emit('login:post', values));\n    this.on('login:start', () => ui.emit('login:start'));\n    this.on('login:stop', () => ui.emit('login:stop'));\n    this.on('login:error', err => ui.emit('login:error', err));\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {createNativeNotification} from './utils/dom';\n\n/**\n * Notification\n *\n * @desc Class that creates a notification\n */\nexport default class Notification {\n\n  /**\n   * Create notification\n   *\n   * @param {Core} core Core reference\n   * @param {Node} root Root DOM element\n   * @param {object} options Options\n   * @param {string} options.title Title\n   * @param {string} options.message Message\n   * @param {string} [options.sound=message] Sound to play\n   * @param {string} [options.icon] Icon source\n   * @param {number} [options.timeout=5000] Timeout value (0=infinite)\n   */\n  constructor(core, root, options = {}) {\n    const defaultLabel = core.make('osjs/locale')\n      .translate('LBL_NOTIFICATION');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * Root node reference\n     * @type {Node}\n     */\n    this.$root = root;\n\n    /**\n     * Notification DOM node\n     * @type {Node}\n     */\n    this.$element = document.createElement('div');\n\n    /**\n     * The notification destruction state\n     * @type {Boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Options\n     * @type {Object}\n     */\n    this.options = Object.assign({\n      icon: null,\n      title: defaultLabel,\n      message: defaultLabel,\n      timeout: 5000,\n      native: core.config('notifications.native', false),\n      sound: 'message'\n    }, options);\n\n    this.core.emit('osjs/notification:create', this);\n  }\n\n  /**\n   * Destroy notification\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.destroyed = true;\n    this.core.emit('osjs/notification:destroy', this);\n\n    this.$element.remove();\n    this.$element = null;\n    this.$root = null;\n  }\n\n  /**\n   * Render notification\n   */\n  render() {\n    const onclick = () => this.destroy();\n\n    const renderCustom = () => {\n      const view = state => h('div', {\n        class: 'osjs-notification-wrapper',\n        'data-has-icon': !!state.icon,\n        style: {\n          backgroundImage: state.icon ? `url(${state.icon})` : undefined\n        }\n      }, [\n        h('div', {class: 'osjs-notification-title'}, state.title),\n        h('div', {class: 'osjs-notification-message'}, state.message),\n      ]);\n\n      this.$element.classList.add('osjs-notification');\n\n      if (this.options.timeout) {\n        setTimeout(() => this.destroy(), this.options.timeout);\n      }\n\n      this.$element.addEventListener('click', onclick);\n\n      this.$root.appendChild(this.$element);\n\n      app(this.options, {}, view, this.$element);\n    };\n\n    if (this.options.native) {\n      createNativeNotification(this.options, onclick)\n        .catch(err => {\n          console.warn('Error on native notification', err);\n          renderCustom();\n        });\n    } else {\n      renderCustom();\n\n      if (this.options.sound) {\n        this.core.make('osjs/sounds')\n          .play(this.options.sound);\n      }\n    }\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Notification from './notification';\n\n/**\n * Handles Notifications\n */\nexport default class Notifications {\n\n  /**\n   * @param {Core} core OS.js Core instance reference\n   */\n  constructor(core) {\n    this.core = core;\n  }\n\n  /**\n   * Destroy notification handler\n   */\n  destroy() {\n    this.$element.remove();\n    this.$element = null;\n  }\n\n  /**\n   * Initialize notification handler\n   */\n  init() {\n    this.$element = document.createElement('div');\n    this.$element.classList.add('osjs-notifications');\n    this.core.$root.appendChild(this.$element);\n  }\n\n  /**\n   * Create a new notification\n   * @param {Object} options See notification class for options\n   * @return {Notification}\n   */\n  create(options) {\n    if (!options) {\n      throw new Error('Notification options not given');\n    }\n\n    const notification = new Notification(this.core, this.$element, options);\n    notification.render();\n    return notification;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from './application';\nimport Preloader from './utils/preloader';\n\n/**\n * A registered package reference\n * @property {Object} metadata Package metadata\n * @property {Function} callback Callback to instanciate\n * @typedef PackageReference\n */\n\n/**\n * A package metadata\n * @property {String} name The package name\n * @property {String} [category] Package category\n * @property {String} [icon] Package icon\n * @property {Boolean} [singleton] If only one instance allowed\n * @property {Boolean} [autostart] Autostart on boot\n * @property {Boolean} [hidden] Hide from launch menus etc.\n * @property {String} [server] Server script filename\n * @property {String[]} [groups] Only available for users in this group\n * @property {String[]} [files] Files to preload\n * @property {Map<String, String>} title A map of locales and titles\n * @property {Map<String, String>} description A map of locales and titles\n * @typedef PackageMetadata\n */\n\n/**\n * Package Manager\n *\n * @desc Handles indexing, loading and launching of OS.js packages\n */\nexport default class Packages {\n\n  /**\n   * Create package manage\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * A list of registered packages\n     * @type {PackageReference[]}\n     */\n    this.packages = [];\n\n    /**\n     * The lost of loaded package metadata\n     * @type {PackageMetadata[]}\n     */\n    this.metadata = [];\n\n    /**\n     * A list of running application names\n     * @desc Mainly used for singleton awareness\n     * @type {String[]}\n     */\n    this.running = [];\n\n    /**\n     * Preloader\n     * @type {Preloader}\n     */\n    this.preloader = new Preloader(core.$resourceRoot);\n\n    /**\n     * If inited\n     * @type {boolean}\n     */\n    this.inited = false;\n  }\n\n  /**\n   * Destroy package manager\n   */\n  destroy() {\n    this.packages = [];\n    this.metadata = [];\n\n    this.preloader.destroy();\n  }\n\n  /**\n   * Initializes package manager\n   * @return {Promise<boolean, Error>}\n   */\n  init() {\n    console.debug('Packages::init()');\n\n    if (!this.inited) {\n      this.core.on('osjs/core:started', () => this._autostart());\n    }\n\n    this.inited = true;\n\n    const manifest = this.core.config('packages.manifest');\n\n    return manifest\n      ? this.core.request(manifest, {}, 'json')\n        .then(metadata => this.addPackages(metadata))\n        .then(() => true)\n        .catch(error => console.error(error))\n      : Promise.resolve(true);\n  }\n\n  /**\n   * Launches a (application) package\n   *\n   * @param {String} name Package name\n   * @param {Object} [args] Launch arguments\n   * @param {Object} [options] Launch options\n   * @param {Boolean} [options.forcePreload=false] Force preload reloading\n   * @see PackageServiceProvider\n   * @throws {Error}\n   * @return {Promise<Application, Error>}\n   */\n  launch(name, args = {}, options = {}) {\n    console.debug('Packages::launch()', name, args, options);\n\n    const _ = this.core.make('osjs/locale').translate;\n    const metadata = this.metadata.find(pkg => pkg.name === name);\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NOT_FOUND', name));\n    }\n\n    if (['theme', 'icons', 'sounds'].indexOf(metadata.type) !== -1) {\n      return this._launchTheme(name, metadata.type);\n    }\n\n    return this._launchApplication(name, metadata, args, options);\n  }\n\n  /**\n   * Launches an application package\n   *\n   * @param {String} name Application package name\n   * @param {Metadata} metadata Application metadata\n   * @param {Array} args Launch arguments\n   * @param {Object} options Launch options\n   */\n  _launchApplication(name, metadata, args, options) {\n    let signaled = false;\n\n    if (metadata.singleton) {\n      const foundApp = Application.getApplications()\n        .find(app => app.metadata.name === metadata.name);\n\n      if (foundApp) {\n        foundApp.emit('attention', args, options);\n        signaled = true;\n\n        return Promise.resolve(foundApp);\n      }\n\n      const found = this.running.filter(n => n === name);\n\n      if (found.length > 0) {\n        return new Promise((resolve, reject) => {\n          this.core.once(`osjs/application:${name}:launched`, a => {\n            if (signaled) {\n              resolve(a);\n            } else {\n              a.emit('attention', args, options);\n              resolve(a);\n            }\n          });\n        });\n      }\n    }\n\n    this.core.emit('osjs/application:launch', name, args, options);\n\n    this.running.push(name);\n\n    return this._launch(name, metadata, args, options);\n  }\n\n  /**\n   * Launches a (theme) package\n   *\n   * @param {String} name Package name\n   * @param {String} type Package type\n   * @throws {Error}\n   * @return {Promise<Object, Error>}\n   */\n  _launchTheme(name, type) {\n    const _ = this.core.make('osjs/locale').translate;\n\n    const metadata = this\n      .getPackages(iter => ['theme', 'icons', 'sounds'].indexOf(iter.type) !== -1)\n      .find(pkg => pkg.name === name);\n\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NOT_FOUND', name));\n    }\n\n    const preloads = (metadata.files || [])\n      .map(f => this.core.url(f, {}, Object.assign({type}, metadata)));\n\n    return this.preloader.load(preloads)\n      .then(result => {\n        return Object.assign(\n          {elements: {}},\n          result,\n          this.packages.find(pkg => pkg.metadata.name === name) || {}\n        );\n      });\n  }\n\n  /**\n   * Wrapper for launching a (application) package\n   *\n   * @param {String} name Package name\n   * @param {Object} args Launch arguments\n   * @param {Object} options Launch options\n   * @return {Application}\n   */\n  _launch(name, metadata, args, options) {\n    const _ = this.core.make('osjs/locale').translate;\n\n    const dialog = e => {\n      if (this.core.has('osjs/dialog')) {\n        this.core.make('osjs/dialog', 'alert', {\n          type: 'error',\n          title: _('ERR_PACKAGE_EXCEPTION', name),\n          message: _('ERR_PACKAGE_EXCEPTION', name),\n          error: e\n        }, () => { /* noop */});\n      } else {\n        alert(`${_('ERR_PACKAGE_EXCEPTION', name)}: ${e.stack || e}`);\n      }\n    };\n\n    const fail = err => {\n      this.core.emit('osjs/application:launched', name, false);\n      this.core.emit(`osjs/application:${name}:launched`, false);\n\n      dialog(err);\n\n      throw new Error(err);\n    };\n\n    const preloads = metadata.files\n      .map(f => this.core.url(f, {}, Object.assign({type: 'apps'}, metadata)));\n\n    const create = found => {\n      let app;\n\n      try {\n        console.group('Packages::_launch()');\n        app = found.callback(this.core, args, options, found.metadata);\n\n        if (app instanceof Application) {\n          app.on('destroy', () => {\n            const foundIndex = this.running.findIndex(n => n === name);\n            if (foundIndex !== -1) {\n              this.running.splice(foundIndex, 1);\n            }\n          });\n        } else {\n          console.warn('The application', name, 'did not return an Application instance from registration');\n        }\n      } catch (e) {\n        dialog(e);\n\n        console.warn('Exception when launching', name, e);\n      } finally {\n        this.core.emit('osjs/application:launched', name, app);\n        this.core.emit(`osjs/application:${name}:launched`, app);\n        console.groupEnd();\n      }\n\n      return app;\n    };\n\n    return this.preloader.load(preloads, options.forcePreload === true)\n      .then(({errors}) => {\n        if (errors.length) {\n          fail(_('ERR_PACKAGE_LOAD', name, errors.join(', ')));\n        }\n\n        const found = this.packages.find(pkg => pkg.metadata.name === name);\n        if (!found) {\n          fail(_('ERR_PACKAGE_NO_RUNTIME', name));\n        }\n\n        return create(found);\n      });\n  }\n\n  /**\n   * Autostarts tagged packages\n   */\n  _autostart() {\n    this.metadata\n      .filter(pkg => pkg.autostart === true)\n      .forEach(pkg => this.launch(pkg.name));\n  }\n\n  /**\n   * Registers a package\n   *\n   * @param {String} name Package name\n   * @param {Function} callback Callback function to construct application instance\n   * @throws {Error}\n   */\n  register(name, callback) {\n    console.debug('Packages::register()', name);\n\n    const _ = this.core.make('osjs/locale').translate;\n    const metadata = this.metadata.find(pkg => pkg.name === name);\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NO_METADATA', name));\n    }\n\n    const foundIndex = this.packages.findIndex(pkg => pkg.metadata.name === name);\n    if (foundIndex !== -1) {\n      this.packages.splice(foundIndex, 1);\n    }\n\n    this.packages.push({\n      metadata,\n      callback\n    });\n  }\n\n  /**\n   * Adds a set of packages\n   * @param {PackageMetadata[]} list Package list\n   * @return {PackageMetadata[]} Current list of packages\n   */\n  addPackages(list) {\n    if (list instanceof Array) {\n      const append = list\n        .map(iter => Object.assign({\n          type: 'application',\n          files: []\n        }, iter));\n\n      this.metadata = [...this.metadata, ...append];\n    }\n\n    return this.getPackages();\n  }\n\n  /**\n   * Gets a list of packages (metadata)\n   * @param {Function} [filter] A filter function\n   * @return {PackageMetadata[]}\n   */\n  getPackages(filter) {\n    filter = filter || (() => true);\n\n    const user = this.core.getUser();\n    const metadata = this.metadata.map(m => Object.assign({}, m));\n\n    const filterGroups = iter => iter.groups instanceof Array\n      ? iter.groups.every(g => user.groups.indexOf(g) !== -1)\n      : true;\n\n    const filterBlacklist = iter => user.blacklist instanceof Array\n      ? user.blacklist.indexOf(iter.name) === -1\n      : true;\n\n    return metadata\n      .filter(filterGroups)\n      .filter(filterBlacklist)\n      .filter(filter);\n  }\n\n  /**\n   * Gets a list of packages compatible with the given mime type\n   * @param {string} mimeType MIME Type\n   * @see PackageManager#getPackages\n   * @return {PackageMetadata[]}\n   */\n  getCompatiblePackages(mimeType) {\n    return this.getPackages(meta => {\n      if (meta.mimes) {\n        return !!meta.mimes.find(mime => {\n          try {\n            const re = new RegExp(mime);\n            return re.test(mimeType);\n          } catch (e) {\n            console.warn('Compability check failed', e);\n          }\n\n          return mime === mimeType;\n        });\n      }\n\n      return false;\n    });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Auth from '../auth';\n\n/**\n * OS.js Auth Service Provider\n *\n * @desc Creates the login prompt and handles authentication flow\n */\nexport default class AuthServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Object} core OS.js Core\n   * @param {Object} [args] Arguments\n   * @see Auth\n   */\n  constructor(core, args = {}) {\n    super(core);\n\n    this.auth = new Auth(core, args);\n  }\n\n  /**\n   * Initializes authentication\n   */\n  init() {\n    this.core.singleton('osjs/auth', () => ({\n      show: (cb) => this.auth.show(cb),\n      login: (values) => this.auth.login(values),\n      logout: (reload) => this.auth.logout(reload),\n      user: () => this.core.getUser()\n    }));\n\n    return this.auth.init();\n  }\n\n  /**\n   * Destroys authentication\n   */\n  destroy() {\n    this.auth.destroy();\n\n    return super.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/auth'\n    ];\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from '../application';\nimport Window from '../window';\nimport WindowBehavior from '../window-behavior';\nimport Session from '../session';\nimport Packages from '../packages';\nimport Tray from '../tray';\nimport Websocket from '../websocket';\nimport Clipboard from '../clipboard';\nimport * as translations from '../locale';\nimport {format, translatable, translatableFlat, getLocale} from '../utils/locale';\nimport {style, script, supportedMedia, playSound} from '../utils/dom';\nimport * as dnd from '../utils/dnd';\nimport {BasicApplication} from '../basic-application.js';\nimport {ServiceProvider} from '@osjs/common';\nimport {EventEmitter} from '@osjs/event-emitter';\n\n/*\n * Gets the public facting API object\n */\nconst getPublicApi = core => {\n  const globalBlacklist = core.config('providers.globalBlacklist', []);\n  const globalWhitelist = core.config('providers.globalWhitelist', []);\n  const register = (...args) => core.make('osjs/packages').register(...args);\n\n  const make = (...args) => {\n    const [name] = args;\n\n    if (core.has(name)) {\n      const blacklisted = globalBlacklist.length > 0 && globalBlacklist.indexOf(name) !== -1;\n      const notWhitelisted = globalWhitelist.length > 0 && globalWhitelist.indexOf(name) === -1;\n\n      if (blacklisted || notWhitelisted) {\n        throw new Error(`The provider '${name}' cannot be used via global scope`);\n      }\n    }\n\n    return core.make(...args);\n  };\n\n  return Object.freeze({\n    make,\n    register,\n    url: (...args) => core.url(...args),\n    run: (...args) => core.run(...args),\n    open: (...args) => core.open(...args),\n    request: (...args) => core.request(...args)\n  });\n};\n\n/*\n * Resolves various resources\n */\nconst resourceResolver = (core) => {\n  const media = supportedMedia();\n\n  const themeResource = path => {\n    const defaultTheme = core.config('desktop.settings.theme');\n    const theme = core.make('osjs/settings').get('osjs/desktop', 'theme', defaultTheme);\n\n    return core.url(`themes/${theme}/${path}`); // FIXME: Use metadata ?\n  };\n\n  const getSoundThemeName = () => {\n    const defaultTheme = core.config('desktop.settings.sounds');\n    return core.make('osjs/settings').get('osjs/desktop', 'sounds', defaultTheme);\n  };\n\n  const soundResource = path => {\n    if (!path.match(/\\.([a-z]+)$/)) {\n      const defaultExtension = 'mp3';\n      const checkExtensions = ['oga', 'mp3'];\n      const found = checkExtensions.find(str => media.audio[str] === true);\n      const use = found || defaultExtension;\n\n      path += '.' + use;\n    }\n\n    const theme = getSoundThemeName();\n\n    return theme ? core.url(`sounds/${theme}/${path}`) : null; // FIXME: Use metadata ?\n  };\n\n  const soundsEnabled = () => !!getSoundThemeName();\n\n  const icon = path => {\n    const defaultTheme = core.config('desktop.settings.icons');\n    const theme = core.make('osjs/settings').get('osjs/desktop', 'icons', defaultTheme);\n    return core.url(`icons/${theme}/icons/${path}`); // FIXME: Use metadata ?\n  };\n\n  return {themeResource, soundResource, soundsEnabled, icon};\n};\n\n/**\n * OS.js Core Service Provider\n *\n * @desc Provides base services\n */\nexport default class CoreServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Object} core OS.js Core\n   * @param {Object} [args] Arguments\n   * @param {Function} [args.windowBehavior] Custom Window Behavior\n   */\n  constructor(core, args = {}) {\n    super(core);\n\n    window.OSjs = getPublicApi(core);\n\n    this.session = new Session(core);\n    this.tray = new Tray(core);\n    this.pm = new Packages(core);\n    this.clipboard = new Clipboard();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/application',\n      'osjs/basic-application',\n      'osjs/window',\n      'osjs/windows',\n      'osjs/event-handler',\n      'osjs/window-behaviour',\n      'osjs/dnd',\n      'osjs/dom',\n      'osjs/clipboard',\n      'osjs/tray',\n      'osjs/locale',\n      'osjs/packages',\n      'osjs/websocket',\n      'osjs/session',\n      'osjs/theme',\n      'osjs/sounds'\n    ];\n  }\n\n  destroy() {\n    this.tray.destroy();\n    this.pm.destroy();\n    this.clipboard.destroy();\n\n    super.destroy();\n  }\n\n  init() {\n    const {themeResource, soundResource, soundsEnabled, icon} = resourceResolver(this.core);\n\n    const createWindow = (options = {}) => {\n      return new Window(this.core, options);\n    };\n\n    this.core.instance('osjs/websocket', (...args) => {\n      return new Websocket(...args);\n    });\n\n    this.core.instance('osjs/application', (data = {}) => {\n      return new Application(this.core, data);\n    });\n\n    this.core.instance('osjs/basic-application', (proc, win, options = {}) => {\n      return new BasicApplication(this.core, proc, win, options);\n    });\n\n    this.core.instance('osjs/window', createWindow);\n\n    this.core.singleton('osjs/windows', () => ({\n      create: createWindow,\n      list: () => Window.getWindows(),\n      last: () => Window.lastWindow()\n    }));\n\n    this.core.instance('osjs/event-handler', (...args) => {\n      console.warn('osjs/event-handler is deprecated, use osjs/event-emitter');\n      return new EventEmitter(...args);\n    });\n\n    this.core.instance('osjs/event-emitter', (...args) => {\n      return new EventEmitter(...args);\n    });\n\n    this.core.singleton('osjs/window-behavior', () => {\n      if (typeof this.options.windowBehavior === 'function') {\n        return this.options.windowBehavior(this.core);\n      }\n\n      return new WindowBehavior(this.core);\n    });\n\n    this.core.singleton('osjs/session', () => ({\n      save: () => this.session.save(),\n      load: (fresh = true) => this.session.load(fresh)\n    }));\n\n    this.core.singleton('osjs/dnd', () => dnd);\n\n    this.core.singleton('osjs/dom', () => ({\n      script,\n      style\n    }));\n\n    const trayApi = {\n      create: (options, handler) => this.tray.create(options, handler),\n      list: () => this.tray.entries.map(e => Object.assign({}, e))\n    };\n\n    this.core.instance('osjs/tray', (options) => {\n      if (typeof options !== 'undefined') {\n        return trayApi.create(options);\n      }\n\n      return trayApi;\n    });\n\n    const localeApi = {\n      format: format(this.core),\n      translate: translatable(this.core)(translations),\n      translatable: translatable(this.core),\n      translatableFlat: translatableFlat(this.core),\n      getLocale: (key = 'language') => {\n        const ref = getLocale(this.core, key);\n        return ref.userLocale || ref.defaultLocale;\n      },\n      setLocale: name => name in translations\n        ? this.core.make('osjs/settings')\n          .set('osjs/locale', 'language', name)\n          .save()\n          .then(() => this.core.emit('osjs/locale:change', name))\n        : Promise.reject(localeApi.translate('ERR_INVALID_LOCALE', name))\n    };\n\n    this.core.singleton('osjs/locale', () => localeApi);\n\n    this.core.singleton('osjs/packages', () => ({\n      getCompatiblePackages: (...args) => this.pm.getCompatiblePackages(...args),\n      getPackages: (...args) => this.pm.getPackages(...args),\n      register: (...args) => this.pm.register(...args),\n      launch: (...args) => this.pm.launch(...args),\n      preload: (...args) => this.pm.preload(...args),\n      running: () => this.pm.running\n    }));\n\n    this.core.instance('osjs/clipboard', () => ({\n      set: v => this.clipboard.set(v),\n      get: clear => this.clipboard.get(clear),\n      clear: () => this.clipboard.clear()\n    }));\n\n    this.core.on('osjs/core:started', () => {\n      this.session.load();\n    });\n\n    this.core.singleton('osjs/theme', () => ({\n      resource: themeResource,\n      icon: name => icon(name.replace(/(\\.png)?$/, '.png'))\n    }));\n\n    this.core.singleton('osjs/sounds', () => ({\n      resource: soundResource,\n      play: (src, options = {}) => {\n        if (soundsEnabled()) {\n          const absoluteSrc = src.match(/^(\\/|https?:)/)\n            ? src\n            : soundResource(src);\n\n          if (absoluteSrc) {\n            return playSound(absoluteSrc, options);\n          }\n        }\n\n        return false;\n      }\n    }));\n\n    return this.pm.init();\n  }\n\n  start() {\n    if (this.core.config('development')) {\n      this.core.on('osjs/dist:changed', filename => {\n        const url = this.core.url(filename).replace(/^\\//, '');\n        const found = this.core.$resourceRoot.querySelectorAll('link[rel=stylesheet]');\n        const map = Array.from(found).reduce((result, item) => {\n          const src = item.getAttribute('href').split('?')[0].replace(/^\\//, '');\n          return Object.assign({\n            [src]: item\n          }, result);\n        }, {});\n\n        if (map[url]) {\n          console.debug('Hot-reloading', url);\n\n          setTimeout(() => {\n            map[url].setAttribute('href', url);\n          }, 100);\n        }\n      });\n\n      this.core.on('osjs/packages:package:changed', name => {\n        // TODO: Reload themes as well\n        Application.getApplications()\n          .filter(proc => proc.metadata.name === name)\n          .forEach(proc => proc.relaunch());\n      });\n    }\n\n    this.core.on('osjs/packages:metadata:changed', () => {\n      this.pm.init();\n    });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Desktop from '../desktop';\n\n/**\n * OS.js Desktop Service Provider\n *\n * @desc Provides desktop features\n */\nexport default class DesktopServiceProvider extends ServiceProvider {\n\n  constructor(core, options = {}) {\n    super(core, options || {});\n\n    this.desktop = null;\n  }\n\n  destroy() {\n    this.desktop = this.desktop.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/desktop'\n    ];\n  }\n\n  init() {\n    this.desktop = new Desktop(this.core, this.options);\n    this.desktop.init();\n\n    this.core.singleton('osjs/desktop', () => ({\n      addContextMenuEntries: entries => this.desktop.addContextMenu(entries),\n      applySettings: settings => this.desktop.applySettings(settings),\n      getRect: () => this.desktop.getRect()\n    }));\n\n    this.core.on('osjs/core:started', () => {\n      this.desktop.applySettings();\n    });\n  }\n\n  start() {\n    this.desktop.start();\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Notifications from '../notifications';\nimport {ServiceProvider} from '@osjs/common';\n\n/**\n * OS.js Notification Service Provider\n *\n * @desc Provides methods to create notifications\n */\nexport default class NotificationServiceProvider extends ServiceProvider {\n\n  constructor(core) {\n    super(core);\n\n    this.notifications = new Notifications(core);\n  }\n\n  destroy() {\n    this.notifications.destroy();\n  }\n\n  provides() {\n    return [\n      'osjs/notification'\n    ];\n  }\n\n  init() {\n    this.notifications.init();\n\n    this.core.instance('osjs/notification', (options) => {\n      return this.notifications.create(options);\n    });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Settings from '../settings';\n\n/**\n * OS.js Settings Service Provider\n *\n * @desc Provides services for settings\n */\nexport default class SettingsServiceProvider extends ServiceProvider {\n\n  constructor(core, args = {}) {\n    super(core);\n\n    this.settings = new Settings(core, Object.assign({\n      config: {}\n    }, args));\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/settings'\n    ];\n  }\n\n  init() {\n    this.core.singleton('osjs/settings', () => ({\n      save: () => this.settings.save(),\n      load: () => this.settings.load(),\n      clear: (...args) => this.settings.clear(...args),\n      get: (...args) => this.settings.get(...args),\n      set: (...args) => this.settings.set(...args)\n    }));\n\n    return this.settings.init();\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Filesystem from '../filesystem';\nimport * as utils from '../utils/vfs';\n\n/**\n * OS.js Virtual Filesystem Service Provider\n *\n * @desc Provides methods to interact with filesystems\n */\nexport default class VFSServiceProvider extends ServiceProvider {\n  constructor(core, args = {}) {\n    super(core);\n\n    this.fs = new Filesystem(core, {\n      adapters: args.adapters || {},\n      mounts: args.mounts || []\n    });\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/vfs',\n      'osjs/fs'\n    ];\n  }\n\n  init() {\n    this.core.singleton('osjs/vfs', () => this.fs.request());\n\n    const iconMap = this.core.config('vfs.icons', {});\n    const icon = utils.getFileIcon(iconMap);\n\n    this.core.singleton('osjs/fs', () => ({\n      pathJoin: (...args) => utils.pathJoin(...args),\n      icon: icon,\n      mountpoints: (...args) => this.fs.getMounts(...args),\n      mount: (...args) => this.fs.mount(...args),\n      unmount: (...args) => this.fs.unmount(...args),\n      register: (...args) => this.fs.register(...args)\n    }));\n\n    return this.fs.mountAll(false);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst createView = (core, fs, icon, _) => {\n  const resultView = ({results, index}, actions) => results.map((r, i) => h('li', {\n    onclick: () => actions.open(i),\n    onupdate: el => {\n      if (i === index) {\n        el.scrollIntoView();\n      }\n    },\n    class: [\n      'osjs-search-result',\n      index === i ? 'osjs__active' : ''\n    ].join(' ')\n  }, [\n    h('img', {src: icon(fs.icon(r).name + '.png')}),\n    h('span', {}, `${r.path} (${r.mime})`)\n  ]));\n\n  return (state, actions) => h('div', {\n    class: 'osjs-search-container osjs-notification',\n    style: {\n      display: state.visible ? undefined : 'none'\n    }\n  }, [\n    h('input', {\n      type: 'text',\n      placeholder: _('LBL_SEARCH_PLACEHOLDER'),\n      class: 'osjs-search-input',\n      value: state.query,\n      onblur: () => {\n        if (!state.value) {\n          setTimeout(() => actions.toggle(false), 300);\n        }\n      },\n      oninput: ev => actions.setQuery(ev.target.value),\n      onkeydown: ev => {\n        if (ev.keyCode === 38) { // Up\n          actions.setPreviousIndex();\n        } else if (ev.keyCode === 40) { // Down\n          actions.setNextIndex();\n        } else if (ev.keyCode === 27) { // Escape\n          actions.resetIndex();\n\n          if (state.index === -1) {\n            actions.hide();\n          }\n        }\n      },\n      onkeypress: ev => {\n        if (ev.keyCode === 13) {\n          if (state.index >= 0) {\n            actions.open(state.index);\n          } else {\n            actions.search(state.query.replace(/\\*?$/, '*').replace(/^\\*?/, '*'));\n          }\n        }\n      }\n    }),\n    h('div', {\n      'data-error': !!state.error,\n      class: 'osjs-search-message',\n      style: {\n        display: (state.error || state.status) ? 'block' : 'none'\n      }\n    }, state.error || state.status),\n    h('ol', {\n      class: 'osjs-search-results',\n      style: {\n        display: state.results.length ? undefined : 'none'\n      }\n    }, resultView(state, actions))\n  ]);\n};\n\nconst create = (core, $element) => {\n  const _ = core.make('osjs/locale').translate;\n  const fs = core.make('osjs/fs');\n  const {icon} = core.make('osjs/theme');\n  const view = createView(core, fs, icon, _);\n  const ee = new EventEmitter('SearchUI');\n\n  const hyperapp = app({\n    query: '',\n    index: -1,\n    status: undefined,\n    error: null,\n    visible: false,\n    results: []\n  }, {\n    search: query => {\n      ee.emit('search', query);\n\n      return {status: _('LBL_SEARCH_WAIT')};\n    },\n    open: index => (state, actions) => {\n      const iter = state.results[index];\n      if (iter) {\n        ee.emit('open', iter);\n      }\n\n      actions.toggle(false);\n    },\n    resetIndex: () => () => ({\n      index: -1\n    }),\n    setNextIndex: () => state => ({\n      index: (state.index + 1) % state.results.length\n    }),\n    setPreviousIndex: () => state => ({\n      index: state.index <= 0 ? state.results.length - 1 : state.index - 1\n    }),\n    setError: error => () => ({\n      error,\n      status: undefined,\n      index: -1\n    }),\n    setResults: results => () => ({\n      results,\n      index: -1,\n      status: _('LBL_SEARCH_RESULT', results.length),\n    }),\n    setQuery: query => () => ({\n      query\n    }),\n    hide: () => {\n      ee.emit('hide');\n    },\n    toggle: visible => state => ({\n      query: '',\n      results: [],\n      index: -1,\n      status: undefined,\n      error: null,\n      visible: typeof visible === 'boolean' ? visible : !state.visible\n    })\n  }, view, $element);\n\n  ee.on('error', error => hyperapp.setError(error));\n  ee.on('success', results => hyperapp.setResults(results));\n  ee.on('toggle', toggle => hyperapp.toggle(toggle));\n  ee.on('focus', () => {\n    const el = $element.querySelector('.osjs-search-input');\n    if (el) {\n      el.focus();\n    }\n  });\n\n  return ee;\n};\n\nexport default create;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport Window from './window';\nimport createUI from './search-ui';\n\n/**\n * Search Service\n */\nexport default class Search {\n  constructor(core) {\n    this.core = core;\n    this.ui = null;\n    this.focusLastWindow = null;\n    this.$element = document.createElement('div');\n  }\n\n  destroy() {\n    if (this.ui) {\n      this.ui.destroy();\n    }\n  }\n\n  /**\n   * Initializes Search Service\n   */\n  init() {\n    const {icon} = this.core.make('osjs/theme');\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.$element.className = 'osjs-search';\n    this.core.$root.appendChild(this.$element);\n\n    this.core.make('osjs/tray').create({\n      title: _('LBL_SEARCH_TOOLTOP', 'F3'),\n      icon: icon('system-search.png')\n    }, () => this.show());\n\n    this.ui = createUI(this.core, this.$element);\n    this.ui.on('hide', () => this.hide());\n    this.ui.on('open', iter => this.core.open(iter));\n    this.ui.on('search', query => {\n      this.search(query)\n        .then(results => this.ui.emit('success', results))\n        .catch(error => this.ui.emit('error', error));\n    });\n  }\n\n  /**\n   * Performs a search across all mounts\n   * @param {string} pattern Search query\n   * @return {Promise<FileMetadata[], Error>}\n   */\n  search(pattern) {\n    const vfs = this.core.make('osjs/vfs');\n    const promises = this.core.make('osjs/fs')\n      .mountpoints()\n      .map(mount => `${mount.name}:/`)\n      .map(path => {\n        return vfs.search({path}, pattern)\n          .catch(error => {\n            console.warn('Error while searching', error);\n            return [];\n          });\n      });\n\n    return Promise.all(promises)\n      .then(lists => [].concat(...lists));\n  }\n\n  /**\n   * Focuses UI\n   */\n  focus() {\n    if (this.ui) {\n      this.ui.emit('focus');\n    }\n  }\n\n  /**\n   * Hides UI\n   */\n  hide() {\n    if (this.ui) {\n      this.ui.emit('toggle', false);\n\n      const win = Window.lastWindow();\n      if (this.focusLastWindow && win) {\n        win.focus();\n      }\n    }\n  }\n\n  /**\n   * Shows UI\n   */\n  show() {\n    if (this.ui) {\n      const win = Window.lastWindow();\n\n      this.focusLastWindow = win && win.blur();\n\n      this.ui.emit('toggle', true);\n      setTimeout(() => this.focus(), 1);\n    }\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from './application';\n\n/**\n * Session Handler\n *\n * @desc Handles Sessions\n */\nexport default class Session {\n\n  /**\n   * Creates the Session Handler\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n  }\n\n  /**\n   * Saves session\n   */\n  save() {\n    const apps = Application.getApplications()\n      .filter(a => a.options.sessionable !== false);\n\n    const session = apps.map(app => app.getSession());\n\n    return this.core.make('osjs/settings')\n      .set('osjs/session', null, session)\n      .save();\n  }\n\n  /**\n   * Loads session\n   * @param {Boolean} [fresh=false] Kill all current applications first\n   */\n  load(fresh = false) {\n    if (fresh) {\n      Application.destroyAll();\n    }\n\n    let session = this.core.make('osjs/settings')\n      .get('osjs/session');\n\n    if (session && !(session instanceof Array)) {\n      session = Object.values(session);\n    }\n\n    if (session) {\n      console.group('Session::load()');\n\n      session.forEach(app => {\n        try {\n          this.core.run(app.name, app.args, {\n            restore: {\n              windows: app.windows\n            }\n          });\n        } catch (e) {\n          console.warn('Error while loading session entry', e);\n        }\n      });\n\n      console.groupEnd();\n    }\n\n    return Promise.resolve(true);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport merge from 'deepmerge';\nimport simplejsonconf from 'simplejsonconf';\n\nconst serverSettings = core => ({\n  save: settings => core.request(core.url('/settings'), {\n    method: 'post',\n    body: settings\n  }, 'json'),\n\n  load: () => core.request(core.url('/settings'), {\n    method: 'get'\n  }, 'json')\n});\n\nconst localStorageSettings = core => ({\n  clear: ns => {\n    localStorage.removeItem(ns);\n\n    return Promise.resolve(true);\n  },\n\n  save: settings => {\n    Object.keys(settings).forEach((k) => {\n      localStorage.setItem(k, JSON.stringify(settings[k]));\n    });\n\n    return Promise.resolve(true);\n  },\n\n  load: () => Promise.resolve(Object.keys(localStorage).reduce((o, v) => {\n    let value = localStorage.getItem(v);\n    try {\n      value = JSON.parse(value);\n    } catch (e) {\n      console.warn('localStorageAdapter parse error', e);\n    }\n\n    return Object.assign(o, {[v]: value});\n  }, {}))\n});\n\nconst defaultAdapters = {\n  server: serverSettings,\n  localStorage: localStorageSettings\n};\n\n/**\n * OS.js Settings Manager\n */\nexport default class Settings {\n\n  constructor(core, args) {\n    const adapter = core.config('standalone')\n      ? localStorageSettings\n      : typeof args.adapter === 'function'\n        ? args.adapter\n        : defaultAdapters[args.adapter || 'localStorage'];\n\n    this.adapter = Object.assign({\n      load: () => Promise.reject(new Error('Not implemented')),\n      save: () => Promise.reject(new Error('Not implemented')),\n      init: () => Promise.resolve(true),\n      clear: () => Promise.resolve(true),\n      destroy: () => {}\n    }, adapter(core, args.config));\n\n    /**\n     * Internal timeout reference used for debouncing\n     * @type {Object}\n     */\n    this.debounce = null;\n\n    /**\n     * The settings tree\n     * @type {Object}\n     */\n    this.settings = {};\n\n    this.core = core;\n  }\n\n  init() {\n    return this.adapter.init();\n  }\n\n  /**\n   * Saves settings\n   * @return {Promise<boolean,  Error>}\n   */\n  save() {\n    return new Promise((resolve, reject) => {\n      if (this.debounce) {\n        const [promise, timer] = this.debounce;\n        promise.resolve(false);\n        this.debounce = clearTimeout(timer);\n      }\n\n      this.debounce = [\n        {resolve, reject},\n        setTimeout(() => {\n          this.adapter.save(this.settings)\n            .then((...args) => {\n              this.core.emit('osjs/settings:save');\n\n              resolve(...args);\n            }).catch(reject);\n        }, 100)\n      ];\n    });\n  }\n\n  /**\n   * Loads settings\n   * @return {Promise<boolean,  Error>}\n   */\n  load() {\n    this.core.emit('osjs/settings:load');\n\n    const defaults = this.core.config('settings.defaults', {});\n\n    return this.adapter.load()\n      .then(settings => {\n        this.settings = merge(defaults, settings, {\n          arrayMerge: (dest, source) => source\n        });\n\n        return true;\n      }).catch(e => {\n        console.warn('Failed to set settings', e);\n        this.settings = defaults;\n\n        return false;\n      });\n  }\n\n  /**\n   * Gets a settings entry by key\n   *\n   * @desc Gets a setting (from cache)\n   * @param {String} [ns] The namespace\n   * @param {String} [key] The key to get the value from\n   * @param {*} [defaultValue] If result is undefined, return this instead\n   * @return {*}\n   */\n  get(ns, key, defaultValue) {\n    if (typeof ns === 'undefined') {\n      return Object.assign({}, this.settings);\n    } else if (typeof this.settings[ns] === 'undefined') {\n      return key ? defaultValue : {};\n    }\n\n    const tree = simplejsonconf(this.settings[ns]);\n\n    return key\n      ? tree.get(key, defaultValue)\n      : tree.get() || defaultValue;\n  }\n\n  /**\n   * Sets a settings entry by root key.\n   * @desc Sets a setting, but does not save.\n   * @param {String} ns The namespace\n   * @param {String} [key] The key to set\n   * @param {*} value The value to set\n   * @return {Settings} This\n   */\n  set(ns, key, value) {\n    const lock = this.core.config('settings.lock', []);\n    if (lock.indexOf(ns) !== -1) {\n      return this;\n    }\n\n    if (typeof this.settings[ns] === 'undefined') {\n      this.settings[ns] = {};\n    }\n\n    if (key) {\n      try {\n        const sjc = simplejsonconf(this.settings[ns]);\n        sjc.set(key, value);\n        this.settings[ns] = sjc.get();\n      } catch (e) {\n        console.warn('Error while setting settings for', key, e);\n      }\n    } else {\n      this.settings[ns] = Object.assign({}, value);\n    }\n\n    return this;\n  }\n\n  /**\n   * Clears a namespace by root key\n   * @param {String} ns The namespace\n   * @return {Promise<boolean, Error>}\n   */\n  clear(ns) {\n    return this.adapter.clear(ns)\n      .then(result => {\n        if (result && this.settings[ns]) {\n          delete this.settings[ns];\n        }\n\n        return result;\n      });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport default class Splash {\n  constructor(core) {\n    this.core = core;\n    this.$loading = document.createElement('div');\n    this.$loading.className = 'osjs-boot-splash';\n    this.$loading.appendChild(document.createTextNode('Loading...'));\n\n    core.on('osjs/core:boot', () => this.show());\n    core.on('osjs/core:booted', () => this.destroy());\n    core.on('osjs/core:logged-in', () => this.show());\n    core.on('osjs/core:started', () => this.destroy());\n  }\n\n  show() {\n    if (!this.$loading.parentNode) {\n      this.core.$root.appendChild(this.$loading);\n    }\n  }\n\n  destroy() {\n    if (this.$loading.parentNode) {\n      this.$loading.remove();\n    }\n  }\n}\n","module.exports = __webpack_public_path__ + \"881c86876af63b732063d7bdd51bb226.png\";","module.exports = __webpack_public_path__ + \"944151751b7adab74d8bc588ac2f57c1.png\";","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * A Tray Icon (\"Entry\")\n * @property {Object} entry The given entry data\n * @property {Function} update Updates entry with given data\n * @property {Function} destroy Destroy the entry\n * @typedef TrayEntry\n */\n\n/**\n * Tray Handler\n *\n * @desc Handles OS.js Tray Icons\n */\nexport default class Tray {\n\n  /**\n   * Creates the Tray Handler\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * All Tray entries\n     * @type {TrayEntry[]}\n     */\n    this.entries = [];\n  }\n\n  destroy() {\n    this.entries = [];\n  }\n\n  /**\n   * Creates a new Tray entry\n   * @param {Object} options Options\n   * @param {String} [options.icon] Icon source\n   * @param {String} [options.title] The title and tooltip\n   * @param {Function} [options.onclick] The callback function for clicks\n   * @param {Function} [options.oncontextmenu] The callback function for contextmenu\n   * @param {Function} [handler] The callback function for all events\n   * @return {TrayEntry}\n   */\n  create(options, handler) {\n    const defaultTitle = this.core.make('osjs/locale')\n      .translate('LBL_TRAY');\n\n    handler = handler || (() => {});\n\n    const entry = Object.assign({}, {\n      icon: require('./styles/logo-blue-32x32.png'),\n      title: defaultTitle,\n      onclick: handler,\n      oncontextmenu: handler,\n      handler\n    }, options);\n\n    console.debug('Created new tray entry', entry);\n\n    this.entries.push(entry);\n\n    this.core.emit('osjs/tray:create', entry);\n    this.core.emit('osjs/tray:update', this.entries);\n\n    const obj = {\n      entry,\n      update: u => {\n        Object.keys(u).forEach(k => (entry[k] = u[k]));\n\n        this.core.emit('osjs/tray:update', this.entries);\n      },\n      destroy: () => this.remove(entry)\n    };\n\n    return obj;\n  }\n\n  /**\n   * Removes a Tray entry\n   * @param {TrayEntry} entry The tray entry\n   */\n  remove(entry) {\n    const foundIndex = this.entries.findIndex(e => e === entry);\n    if (foundIndex !== -1) {\n      this.entries.splice(foundIndex, 1);\n\n      this.core.emit('osjs/tray:remove', entry);\n      this.core.emit('osjs/tray:update', this.entries);\n    }\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n/**\n * Creates a \"draggable\" element\n * @param {Element} el The DOM element to apply to\n * @param {string} [options.type=application/json] Content Type\n * @param {string} [options.effect=move] DnD effect (cursor)\n * @param {Function} [options.ondragstart] Callback to event (ev) => {}\n * @param {Function} [options.ondragend] Callback to event (ev) => {}\n * @param {Function} [options.setDragImage] Set custom drag image (browser dependent)\n * @return {Object} An object with a destructor\n */\nexport const draggable = (el, options = {}) => {\n  const {type, effect, data, ondragstart, ondragend, setDragImage} = Object.assign({}, {\n    type: 'application/json',\n    effect: 'move',\n    ondragstart: () => true,\n    ondragend: () => true,\n    setDragImage: null\n  }, options);\n\n  const hasDragImage = typeof setDragImage === 'function';\n  const transferData = type === 'application/json'\n    ? JSON.stringify(data)\n    : data;\n\n  const dragstart = ev => {\n    el.setAttribute('aria-grabbed', 'true');\n\n    if (ev.dataTransfer) {\n      if (ev.dataTransfer.setDragImage && hasDragImage) {\n        try {\n          setDragImage(ev, el, options);\n        } catch (e) {\n          console.warn('draggable dragstart setDragImage error', e);\n        }\n      }\n\n      try {\n        ev.dataTransfer.effectAllowed = effect;\n        ev.dataTransfer.setData(type, transferData);\n      } catch (e) {\n        console.warn('draggable dragstart dataTransfer error', e);\n      }\n    }\n\n    return ondragstart(ev);\n  };\n\n  const dragend = ev => {\n    el.setAttribute('aria-grabbed', 'false');\n\n    return ondragend(ev);\n  };\n\n  const destroy = () => {\n    el.removeAttribute('draggable');\n    el.removeAttribute('aria-grabbed');\n    el.removeEventListener('dragstart', dragstart);\n    el.removeEventListener('dragend', dragend);\n    el.classList.remove('osjs__draggable');\n  };\n\n  el.setAttribute('draggable', 'true');\n  el.setAttribute('aria-grabbed', 'false');\n  el.addEventListener('dragstart', dragstart);\n  el.addEventListener('dragend', dragend);\n  el.classList.add('osjs__draggable');\n\n  return {destroy};\n};\n\n/**\n * Creates a \"droppable\" element\n * @param {Element} el The DOM element to apply to\n * @param {string} [options.type=application/json] Content Type\n * @param {string} [options.effect=move] DnD effect (cursor)\n * @param {Function} [options.ondragenter] Callback to event (ev) => {}\n * @param {Function} [options.ondragover] Callback to event (ev) => {}\n * @param {Function} [options.ondragleave] Callback to event (ev) => {}\n * @param {Function} [options.ondrop] Callback to event (ev, data, files) => {}\n * @return {Object} An object with a destructor\n */\nexport const droppable = (el, options = {}) => {\n  const {type, effect, ondragenter, ondragover, ondragleave, ondrop} = Object.assign({}, {\n    type: 'application/json',\n    effect: 'move',\n    ondragenter: () => true,\n    ondragover: () => true,\n    ondragleave: () => true,\n    ondrop: () => true\n  }, options);\n\n  const retval = (fn, ...args) => {\n    try {\n      const result = fn(...args);\n      if (typeof result === 'boolean') {\n        return result;\n      }\n    } catch (e) {\n      console.warn('droppable value parsing error', e);\n    }\n\n    return true;\n  };\n\n  const dragenter = ev => ondragenter(ev);\n\n  const dragleave = ev => {\n    el.classList.remove('osjs__drop');\n\n    return retval(ondragleave, ev);\n  };\n\n  const dragover = ev => {\n    ev.preventDefault();\n\n    const inside = el.contains(ev.target);\n\n    if (!inside) {\n      el.classList.remove('osjs__drop');\n      return false;\n    }\n\n    ev.stopPropagation();\n    ev.dataTransfer.dropEffect = effect;\n    el.classList.add('osjs__drop');\n\n    return retval(ondragover, ev);\n  };\n\n  const drop = ev => {\n    let data;\n    let files = [];\n\n    if (ev.dataTransfer) {\n      files = ev.dataTransfer.files\n        ? Array.from(ev.dataTransfer.files)\n        : [];\n\n      try {\n        const transfer = ev.dataTransfer.getData(type);\n\n        try {\n          if (type === 'application/json') {\n            data = typeof transfer === 'undefined' ? transfer : JSON.parse(transfer);\n          } else {\n            data = transfer;\n          }\n        } catch (e) {\n          data = transfer;\n          console.warn('droppable dataTransfer parsing error', e);\n        }\n      } catch (e) {\n        console.warn('droppable dataTransfer parsing error', e);\n      }\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n    el.classList.remove('osjs__drop');\n\n    return retval(ondrop, ev, data, files);\n  };\n\n  const destroy = () => {\n    el.removeAttribute('aria-dropeffect', effect);\n    el.removeEventListener('dragenter', dragenter);\n    el.removeEventListener('dragover', dragover);\n    el.removeEventListener('dragleave', dragleave);\n    el.removeEventListener('drop', drop);\n    el.classList.remove('osjs__droppable');\n  };\n\n  el.setAttribute('aria-dropeffect', effect);\n  el.addEventListener('dragenter', dragenter);\n  el.addEventListener('dragover', dragover);\n  el.addEventListener('dragleave', dragleave);\n  el.addEventListener('drop', drop);\n  el.classList.add('osjs__droppable');\n\n  return {destroy};\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst supportsNativeNotification = 'Notification' in window;\n\n/**\n * Creates a new CSS DOM element\n * @param {Element} root Root node\n * @param {String} src Source\n * @return {Promise<ScriptElement, Error>}\n */\nexport const style = (root, src) => new Promise((resolve, reject) => {\n  const el = document.createElement('link');\n  el.setAttribute('rel', 'stylesheet');\n  el.setAttribute('type', 'text/css');\n  el.onload = () => resolve(el);\n  el.onerror = (err) => reject(err);\n  el.setAttribute('href', src);\n\n  root.appendChild(el);\n\n  return el;\n});\n\n/**\n * Creates a new Script DOM element\n * @param {Element} root Root node\n * @param {String} src Source\n * @return {Promise<StyleElement>, Error>}\n */\nexport const script = (root, src) => new Promise((resolve, reject) => {\n  const el = document.createElement('script');\n  el.onreadystatechange = function() {\n    if ((this.readyState === 'complete' || this.readyState === 'loaded')) {\n      resolve(el);\n    }\n  };\n  el.onerror = (err) => reject(err);\n  el.onload = () => resolve(el);\n  el.src = src;\n\n  root.appendChild(el);\n\n  return el;\n});\n\n\n/**\n * Escape text so it is \"safe\" for HTML usage\n * @param {String} text Input text\n * @return {String}\n */\nexport const escapeHtml = (text) => {\n  const div = document.createElement('div');\n  div.innerHTML = text;\n  return div.textContent;\n};\n\n/**\n * Serialize an object to CSS\n * @param {Object} obj Object\n * @return {String} CSS text\n */\nexport const createCssText = (obj) => Object.keys(obj)\n  .map(k => [k, k.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()])\n  .map(k => `${k[1]}: ${obj[k[0]]}`)\n  .join(';');\n\n/**\n * Inserts a tab in the given event target\n * @param {Event} ev DOM Event\n */\nexport const handleTabOnTextarea = ev => {\n  const input = ev.target;\n  let {selectionStart, selectionEnd, value} = input;\n\n  input.value = value.substring(0, selectionStart)\n    + '\\t'\n    + value.substring(selectionEnd, value.length);\n\n  selectionStart++;\n\n  input.selectionStart = selectionStart;\n  input.selectionEnd = selectionStart;\n};\n\n/*\n * Get active element if belonging to root\n * @param {Element} root DOM Element\n * @return {Element|null}\n */\nexport const getActiveElement = (root) => {\n  if (root) {\n    const ae = document.activeElement;\n\n    return root.contains(ae) ? ae : null;\n  }\n\n  return null;\n};\n\n/**\n * Checks if passive events is supported\n * @link https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n * @return {boolean}\n */\nexport const supportsPassive = (function() {\n  let supportsPassive = false;\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      get: () => (supportsPassive = true)\n    });\n\n    window.addEventListener('testPassive', null, opts);\n    window.removeEventListener('testPassive', null, opts);\n  } catch (e) {/* noop */}\n\n  return () => supportsPassive;\n})();\n\n/**\n * Plays a sound\n * @param {string} src Sound source\n * @param {Object} [options] Options\n * @return {Promise<HTMLAudioElement>}\n */\nexport const playSound = (src, options = {}) => {\n  const opts = Object.assign({\n    volume: 1.0\n  }, options);\n\n  const audio = new Audio();\n  audio.voule = opts.volume;\n  audio.src = src;\n\n  try {\n    const p = audio.play();\n    if (p instanceof Promise) {\n      return p.then(() => audio)\n        .catch(err => console.warn('Failed to play sound', src, err));\n    }\n  } catch (e) {\n    console.warn('Failed to play sound', src, e);\n  }\n\n  return Promise.resolve(audio);\n};\n\n/**\n * Gets supported media types\n * @return {object}\n */\nexport const supportedMedia = () => {\n  const videoFormats = {\n    mp4: 'video/mp4',\n    ogv: 'video/ogg'\n  };\n\n  const audioFormats = {\n    mp3: 'audio/mpeg',\n    mp4: 'audio/mp4',\n    oga: 'audio/ogg'\n  };\n\n  const reduce = (list, elem) => Object.keys(list)\n    .reduce((result, format) => {\n      return Object.assign({\n        [format]: elem.canPlayType(list[format]) === 'probably'\n      }, result);\n    }, {});\n\n  return {\n    audio: reduce(audioFormats, document.createElement('audio')),\n    video: reduce(videoFormats, document.createElement('video'))\n  };\n};\n\n/**\n * Creates a native notification\n * @param {object} options Notification options\n * @param {Function} [onclick] Callback on click\n * @return {Promise<window.Notification>}\n */\nexport const createNativeNotification = (options, onclick) => {\n  const Notif = window.Notification;\n\n  const create = () => {\n    const notification = new Notif(\n      options.title,\n      {\n        body: options.message,\n        icon: options.icon\n      }\n    );\n\n    notification.onclick = onclick;\n\n    return notification;\n  };\n\n  if (supportsNativeNotification) {\n    if (Notif.permission === 'granted') {\n      return Promise.resolve(create());\n    } else if (Notif.permission !== 'denied') {\n      return new Promise((resolve, reject) => {\n        Notif.requestPermission(permission => {\n          return permission === 'granted' ? resolve(true) : reject(permission);\n        });\n      }).then(create);\n    }\n  }\n\n  return Promise.reject('Unsupported');\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Creates URL request path\n */\nconst encodeQueryData = data => Object.keys(data)\n  .filter(k => typeof data[k] !== 'object')\n  .map(k => encodeURIComponent(k) + '=' + encodeURIComponent(data[k]))\n  .join('&');\n\nconst bodyTypes = [\n  window.ArrayBuffer,\n  window.ArrayBufferView,\n  window.Blob,\n  window.File,\n  window.URLSearchParams,\n  window.FormData\n].filter(t => !!t);\n\n/*\n * Creates fetch() options\n */\nconst createFetchOptions = (url, options, type) => {\n  const fetchOptions = Object.assign({}, {\n    credentials: 'same-origin',\n    method: 'get',\n    headers: {}\n  }, options);\n\n  if (type === 'json') {\n    fetchOptions.headers = Object.assign(fetchOptions.headers, {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    });\n  }\n\n  if (fetchOptions.body && fetchOptions.method.toLowerCase() === 'get') {\n    url += '?' + encodeQueryData(fetchOptions.body);\n    delete fetchOptions.body;\n  }\n\n  const hasBody = typeof fetchOptions.body !== 'undefined';\n  const stringBody = typeof fetchOptions.body === 'string';\n\n  if (type === 'json' && (hasBody && !stringBody)) {\n    if (!(fetchOptions.body instanceof FormData)) {\n      const found = bodyTypes.find(t => (fetchOptions.body instanceof t));\n      if (!found) {\n        fetchOptions.body = JSON.stringify(fetchOptions.body);\n      }\n    }\n  }\n\n  return [url, fetchOptions];\n};\n\n/**\n * Make a HTTP request\n *\n * @param {String} url The endpoint\n * @param {Options} [options] fetch options\n * @param {String} [type] Request / Response type\n * @return {*}\n */\nexport const fetch = (url, options = {}, type = null) => {\n  const [target, fetchOptions] = createFetchOptions(url, options, type);\n\n  const createErrorRejection = (response, error) =>\n    Promise.reject(new Error(error\n      ? error\n      : `${response.status} (${response.statusText})`));\n\n  return window.fetch(target, fetchOptions)\n    .then(response => {\n      if (!response.ok) {\n        const contentType = response.headers.get('content-type');\n        const method = contentType && contentType.indexOf('application/json') !== -1\n          ? 'json'\n          : 'text';\n\n        return response[method]()\n          .then(data => createErrorRejection(response, data.error));\n      }\n\n      return type === 'json'\n        ? response.json()\n        : response;\n    });\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport dateformat from 'dateformat';\n\nconst FALLBACK_LOCALE = 'en_EN';\n\n// TODO\nconst prefixMap = {\n  nb: 'nb_NO'\n};\n\nconst sprintfRegex = /\\{(\\d+)\\}/g;\n\nconst sprintfMatcher = args => (m, n) =>\n  n in args ? args[n] : m;\n\nconst getDefaultLocale = (core, key) => core.config('locale.' + key);\n\nconst getUserLocale = (core, key, defaultLocale) => core.make('osjs/settings')\n  .get('osjs/locale', key, defaultLocale);\n\n/**\n * Gest the set localization\n * @param {Core} core OS.js Core IoC\n * @param {string} key Settings key (locales.*)\n * @return {Object} An object with defaultLocale and userLocale\n */\nexport const getLocale = (core, key) => {\n  const defaultLocale = getDefaultLocale(core, key);\n  const userLocale = getUserLocale(core, key, defaultLocale);\n  return {defaultLocale, userLocale};\n};\n\n/**\n * Gets a raw string from a tree of translations based on key\n *\n * Note that this function will fall back to a pre-configured locale\n * if the given locale names were not found.\n *\n * @private\n * @param {Object}  list      The tree of translations\n * @param {string}  ul        User locale name\n * @param {string}  dl        Default locale name\n * @param {string}  k         The key to translate from tree\n * @return {string}           The raw string\n */\nconst getFromList = (list, ul, dl, k) => {\n  const localizedList = list[ul] || list[dl] || list[FALLBACK_LOCALE] || {};\n  return localizedList[k] || k;\n};\n\n/**\n * Translates a key + arguments from a tree of translations\n *\n * @example\n *  translate({en_EN: {foo: 'Hello {0}'}}, 'nb_NO', 'en_EN', 'foo', 'World') => 'Hello World'\n *\n * @private\n * @param {Object}  list      The tree of translations\n * @param {string}  ul        User locale name\n * @param {string}  dl        Default locale name\n * @param {string}  k         The key to translate from tree\n * @param {...*}    args      A list of arguments that are defined in the translation string\n * @return {string}           The translated string\n */\nconst translate = (list, ul, dl, k, ...args) => {\n  const fmt = getFromList(list, ul, dl, k);\n  return fmt.replace(sprintfRegex, sprintfMatcher(args));\n};\n\n/**\n * Translates a given flat tree of locales\n *\n * Will automatically detect the current locale from the user.\n *\n * Returns a function that takes a key and returns the correct string.\n *\n * @example\n *  translatableFlat({en_EN: 'Hello World'}); // => 'Hello World'\n *\n * @param {Object} list The tree of translations\n * @param {string} defaultValue Default value if none found\n * @return {string} The translated string\n */\nexport const translatableFlat = core => (list, defaultValue) => {\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\n\n  return list[userLocale] || list[defaultLocale] || list[FALLBACK_LOCALE] || defaultValue;\n};\n\n/**\n * Translates a given tree of locales.\n *\n * Will automatically detect the current locale from the user.\n *\n * Returns a `translate` function that takes a key and list of arguments.\n *\n * @see translate\n * @example\n *  translatable({en_EN: {foo: 'Hello {0}'}})\n *    ('foo', 'World'); // => 'Hello World'\n * @param {string} k List key\n * @param {...args} Format arguments\n * @return {Function} A translation function\n */\nexport const translatable = core => list => {\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\n\n  return (k, ...args) => translate(\n    list,\n    userLocale,\n    defaultLocale,\n    k,\n    ...args\n  );\n};\n\n/**\n * Formats a given Date to a specified format\n *\n * Will automatically detect the current locale from the user.\n *\n * Formats are 'shortDate', 'mediumDate', 'longDate', 'fullDate',\n *       'shortTime' and 'longTime'\n *\n * @param {Date} date Date object\n * @param {string} fmt Format\n * @return {string}\n */\nexport const format = core => (date, fmt) => {\n  const {defaultLocale, userLocale} = getLocale(core, 'format.' + fmt);\n  const useFormat = userLocale || defaultLocale || fmt;\n\n  return dateformat(date, useFormat);\n};\n\n/**\n * Figures out what locale the browser is running as\n *\n * @param {string} [defaultLocale=en_EN] Default locale if none found\n * @return {string} The browser locale\n */\nexport const clientLocale = (function() {\n  const nav = window.navigator || {};\n  const browserLanguage = nav.userLanguage || nav.language || '';\n  const get = l => prefixMap[l] ? prefixMap[l] : (l.match(/_/)\n    ? l\n    : (l ? `${l}_${l.toUpperCase()}` : ''));\n\n  const langs = (nav.languages || [browserLanguage])\n    .map(l => get(l.replace('-', '_')));\n\n  const lang = langs[langs.length - 1];\n\n  return (defaultLocale = 'en_EN') => (lang || defaultLocale);\n})();\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {style, script} from './dom';\n\n/**\n * The Preloader loads styles and scripts\n */\nexport default class Preloader {\n\n  constructor(root) {\n    /**\n     * A list of cached preloads\n     * @type {String[]}\n     */\n    this.loaded = [];\n\n    this.$root = root;\n  }\n\n  destroy() {\n    this.loaded = [];\n  }\n\n  /**\n   * Loads all resources required for a package\n   * @param {Array} list A list of resources\n   * @param {Boolean} [force=false] Force loading even though previously cached\n   * @return {String[]} A list of failed resources\n   */\n  load(list, force = false) {\n    const cached = entry => force\n      ? false\n      : this.loaded.find(src => src === entry);\n\n    const promises = list\n      .filter(entry => !cached(entry))\n      .map(entry => {\n        console.debug('Packages::preload()', entry);\n\n        const p = entry.match(/\\.js$/)\n          ? script(this.$root, entry)\n          : style(this.$root, entry);\n\n        return p\n          .then(el => ({success: true, entry, el}))\n          .catch(error => ({success: false, entry, error}));\n      });\n\n    return Promise.all(promises)\n      .then(results => this._load(results, cached));\n  }\n\n  /**\n   * Checks the loaded list\n   * @param {Object[]} results Preload results\n   * @param {string[]} cached Already cached preloads\n   */\n  _load(results, cached) {\n    const successes = results.filter(res => res.success);\n    successes.forEach(entry => {\n      if (!cached(entry)) {\n        this.loaded.push(entry);\n      }\n    });\n\n    const failed = results.filter(res => !res.success);\n    failed.forEach(failed => console.warn('Failed loading', failed.entry, failed.error));\n\n    return {\n      errors: failed.map(failed => failed.entry),\n      elements: successes.reduce((result, iter) => {\n        return Object.assign({}, result, {[iter.entry]: iter.el});\n      }, {})\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const urlResolver = configuration => {\n  const {http, ws} = configuration;\n\n  return (endpoint = '/', options = {}, metadata = {}) => {\n    if (typeof endpoint !== 'string') {\n      return http.public;\n    } else if (endpoint.match(/^(http|ws|ftp)s?:/i)) {\n      return endpoint;\n    }\n\n    const {type, prefix} = Object.assign({}, {\n      type: null,\n      prefix: options.type === 'websocket'\n    }, options);\n\n    const str = type === 'websocket' ? ws.uri : http.uri;\n\n    let url = endpoint.replace(/^\\/+/, '');\n    if (metadata.type) {\n      const path = endpoint.replace(/^\\/?/, '/');\n      const type = metadata.type === 'theme' ? 'themes' : (\n        metadata.type === 'icons' ? 'icons' : 'apps'\n      );\n\n      url = `${type}/${metadata.name}${path}`;\n    }\n\n    return prefix\n      ? str.replace(/\\/$/, '') + url.replace(/^\\/?/, '/')\n      : http.public.replace(/^\\/?/, '/') + url;\n  };\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Get parent directory\n * @param {String} path Directory\n * @return {String} Parent directory\n */\nexport const parentDirectory = path => path\n  .replace(/\\/$/, '')\n  .split('/')\n  .filter((item, index, arr) => index < (arr.length - 1))\n  .join('/')\n  .replace(/(\\/+)?$/, '/');\n\n/**\n * Joins paths\n * @param {String[]} args paths\n * @return {String}\n */\nexport const pathJoin = (...args) => args\n  .reduce((o, a, i) => o.concat([i > 0 ? a.replace(/\\/$/, '') : a]), [])\n  .join('/');\n\n/*\n * Sorts an array of files\n */\nconst sortFn = t => (k, d) => (a, b) => {\n  if (t === 'string') {\n    return d === 'asc'\n      ? String(a[k]).localeCompare(b[k])\n      : String(b[k]).localeCompare(a[k]);\n  } else if (t === 'date') {\n    return d === 'asc'\n      ? (new Date(a[k])) > (new Date(b[k]))\n      : (new Date(b[k])) > (new Date(a[k]));\n  }\n\n  return (\n    (a[k] < b[k])\n      ? -1\n      : ((a[k] > b[k])\n        ? (d === 'asc' ? 1 : 0)\n        : (d === 'asc' ? 0 : 1)));\n};\n\n/*\n * Map of sorters from readdir attributes\n */\nconst sortMap = {\n  size: sortFn('number'),\n  mtime: sortFn('date'),\n  ctime: sortFn('date'),\n  atime: sortFn('date')\n};\n\n/**\n * Creates \"special\" directory entries\n * @param {String} path The path to the readdir root\n * @return {Object[]}\n */\nconst createSpecials = path => {\n  const specials = [];\n\n  const stripped = path.replace(/\\/+/g, '/')\n    .replace(/^(\\w+):/, '') || '/';\n\n  if (stripped !== '/') {\n    specials.push({\n      isDirectory: true,\n      isFile: false,\n      mime: null,\n      size: 0,\n      stat: {},\n      filename: '..',\n      path: parentDirectory(path) || '/'\n    });\n  }\n\n  return specials;\n};\n\n/**\n * Creates a FileReader (promisified)\n * @param {String} method The method to call\n * @param {ArrayBuffer} ab The ArrayBuffer\n * @param {String} mime The MIME type\n * @return {Promise}\n */\nconst createFileReader = (method, ab, mime) => new Promise((resolve, reject) => {\n  const b = new Blob([ab], {type: mime});\n  const r = new FileReader();\n  r.onerror = e => reject(e);\n  r.onloadend = () => resolve(r.result);\n  r[method](b);\n});\n\n/**\n * Converts a number (bytez) into human-readable string\n * @param {Number} bytes Input\n * @param {Boolean} [si=false] Use SI units\n * @return {String}\n */\nexport const humanFileSize = (bytes, si = false) => {\n  if (isNaN(bytes) || typeof bytes !== 'number') {\n    bytes = 0;\n  }\n\n  const thresh = si ? 1000 : 1024;\n  const units = si\n    ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n    : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\n\n  if (bytes < thresh) {\n    return bytes + ' B';\n  }\n\n  let u = -1;\n  do {\n    bytes /= thresh;\n    ++u;\n  } while (bytes >= thresh);\n\n  return `${bytes.toFixed(1)} ${units[u]}`;\n};\n\n/**\n * Transforms a readdir result\n * @param {Object} root The path to the readdir root\n * @param Object[] files An array of readdir results\n * @param {Object} options Options\n * @param {Boolean} [options.showHiddenFiles=true] Show hidden files\n * @param {Function} [options.filter] A filter\n * @param {String} [options.sortBy='filename'] Sort by this attribute\n * @param {String} [options.sortDir='asc'] Sort in this direction\n * @return {Object[]}\n */\nexport const transformReaddir = ({path}, files, options = {}) => {\n  options = Object.assign({}, {\n    showHiddenFiles: false,\n    sortBy: 'filename',\n    sortDir: 'asc'\n  }, options);\n\n  let {sortDir, sortBy, filter} = options;\n  if (typeof filter !== 'function') {\n    filter = () => true;\n  }\n\n  if (['asc', 'desc'].indexOf(sortDir) === -1) {\n    sortDir = 'asc';\n  }\n\n  const filterHidden = options.showHiddenFiles\n    ? () => true\n    : file => file.filename.substr(0, 1) !== '.';\n\n  const sorter = sortMap[sortBy]\n    ? sortMap[sortBy]()\n    : sortFn('string');\n\n  const modify = (file) => Object.assign(file, {\n    humanSize: humanFileSize(file.size)\n  });\n\n  const sortedSpecial = createSpecials(path)\n    .sort(sorter(sortBy, sortDir))\n    .map(modify);\n\n  const sortedDirectories = files.filter(file => file.isDirectory)\n    .sort(sorter(sortBy, sortDir))\n    .filter(filterHidden)\n    .filter(filter)\n    .map(modify);\n\n  const sortedFiles = files.filter(file => !file.isDirectory)\n    .sort(sorter(sortBy, sortDir))\n    .filter(filterHidden)\n    .filter(filter)\n    .map(modify);\n\n  return [\n    ...sortedSpecial,\n    ...sortedDirectories,\n    ...sortedFiles\n  ];\n};\n\n/**\n * Transform an ArrayBuffer\n * @param {ArrayBuffer} ab The ArrayBuffer\n * @param {String} mime The MIME type\n * @param {String} type Transform to this type\n * @return {DOMString|String|Blob|ArrayBuffer}\n */\nexport const transformArrayBuffer = (ab, mime, type) => {\n  if (type === 'string') {\n    return createFileReader('readAsText', ab, mime);\n  } else if (type === 'uri') {\n    return createFileReader('readAsDataURL', ab, mime);\n  } else if (type === 'blob') {\n    return Promise.resolve(new Blob([ab], {type: mime}));\n  }\n\n  return Promise.resolve(ab);\n};\n\n/**\n * Gets an icon from file stat\n * @param {Object} file The file stat object\n * @return {String|Object}\n */\nexport const getFileIcon = map => {\n  const find = file => {\n    const found = Object.keys(map).find(re => {\n      const regexp = new RegExp(re);\n      return regexp.test(file.mime);\n    });\n\n    return found\n      ? map[found]\n      : {name: 'application-x-executable'};\n  };\n\n  return file => file.isDirectory\n    ? {name: 'folder'}\n    : find(file);\n};\n\n/**\n * Creates a file iter for scandir\n * @param {Object} stat file stat\n * @return {Object}\n */\nexport const createFileIter = stat => Object.assign({\n  isDirectory: false,\n  isFile: true,\n  mime: 'application/octet-stream',\n  icon: null,\n  size: -1,\n  path: null,\n  filename: null,\n  label: null,\n  stat: {},\n  id: null,\n  parent_id: null\n}, stat);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {\n  transformReaddir,\n  transformArrayBuffer,\n  createFileIter\n} from './utils/vfs';\n\n// Makes sure our input paths are object(s)\nconst pathToObject = path => Object.assign({\n  id: null,\n}, typeof path === 'string' ? {path} : path);\n\n// Handles directory listing result(s)\nconst handleDirectoryList = (path, options) => result =>\n  Promise.resolve(result.map(stat => createFileIter(stat)))\n    .then(result => transformReaddir(pathToObject(path), result, {\n      showHiddenFiles: options.showHiddenFiles !== false,\n      filter: options.filter\n    }));\n\n/**\n * Read a directory\n *\n * @param {Object|String} path The path to read\n * @param {Object} [options] Options\n * @return {Promise<Object[], Error>} A list of files\n */\nexport const readdir = (adapter, mount) => (path, options = {}) =>\n  adapter.readdir(pathToObject(path), options, mount)\n    .then(handleDirectoryList(path, options));\n\n/**\n * Reads a file\n *\n * Available types are 'arraybuffer', 'blob', 'uri' and 'string'\n *\n * @param {Object|String} path The path to read\n * @param {String} [type=string] Return this content type\n * @param {Object} [options] Options\n * @return {Promise<ArrayBuffer, Error>}\n */\nexport const readfile = (adapter, mount) => (path, type = 'string', options = {}) =>\n  adapter.readfile(pathToObject(path), type, options, mount)\n    .then(response => transformArrayBuffer(response.body, response.mime, type));\n\n/**\n * Writes a file\n * @param {Object|String} path The path to write\n * @param {ArrayBuffer|Blob|String} data The data\n * @param {Object} [options] Options\n * @return {Promise<number, Error>} File size\n */\nexport const writefile = (adapter, mount) => (path, data, options = {}) => {\n  const binary = (data instanceof ArrayBuffer || data instanceof Blob)\n    ? data\n    : new Blob([data], {type: 'application/octet-stream'});\n\n  return adapter.writefile(pathToObject(path), binary, options, mount);\n};\n\n/**\n * Copies a file or directory (move)\n * @param {Object|String} from The source (from)\n * @param {Object|String} to The destination (to)\n * @param {Object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const copy = (adapter, mount) => (from, to, options = {}) =>\n  adapter.copy(pathToObject(from), pathToObject(to), options, mount);\n\n/**\n * Renames a file or directory (move)\n * @param {Object|String} from The source (from)\n * @param {Object|String} to The destination (to)\n * @param {Object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const rename = (adapter, mount) => (from, to, options = {}) =>\n  adapter.rename(pathToObject(from), pathToObject(to), options, mount);\n\n/**\n * Alias of 'readme'\n * @param {Object|String} from The source (from)\n * @param {Object|String} to The destination (to)\n * @param {Object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const move = rename;\n\n/**\n * Creates a directory\n * @param {Object|String} path The path to new directory\n * @param {Object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const mkdir = (adapter, mount) => (path, options = {}) =>\n  adapter.mkdir(pathToObject(path), options, mount);\n\n/**\n * Removes a file or directory\n * @param {Object|String} path The path to remove\n * @param {Object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const unlink = (adapter, mount) => (path, options = {}) =>\n  adapter.unlink(pathToObject(path), options, mount);\n\n/**\n * Checks if path exists\n * @param {Object|String} path The path to check\n * @param {Object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const exists = (adapter, mount) => (path, options = {}) =>\n  adapter.exists(pathToObject(path), options, mount);\n\n/**\n * Gets the stats of the file or directory\n * @param {Object|String} path The path to check\n * @param {Object} [options] Options\n * @return {Promise<Object, Error>}\n */\nexport const stat = (adapter, mount) => (path, options = {}) =>\n  adapter.stat(pathToObject(path), options, mount)\n    .then(stat => createFileIter(stat));\n\n/**\n * Gets an URL to a resource defined by file\n * @param {Object|String} path The file\n * @param {Object} [options] Options\n * @return {Promise<string, Error>}\n */\nexport const url = (adapter, mount) => (path, options = {}) =>\n  adapter.url(pathToObject(path), options, mount);\n\n/**\n * Initiates a native browser download of the file\n * @param {Object|String} path The file\n * @param {Object} [options] Options\n * @return {Promise}\n */\nexport const download = (adapter, mount) => (path, options = {}) =>\n  typeof adapter.download === 'function' && options.readfile !== true\n    ? adapter.download(pathToObject(path), options, mount)\n    : readfile(adapter)(path, 'blob')\n      .then(body => {\n        const filename = pathToObject(path).path.split('/').splice(-1)[0];\n        const url = window.URL.createObjectURL(body);\n\n        const a = document.createElement('a');\n        a.style.display = 'none';\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n\n        a.click();\n\n        setTimeout(() => {\n          window.URL.revokeObjectURL(url);\n          a.remove();\n        }, 1);\n      });\n\n/**\n * Searches for files and folders\n * @param {Object|String} root The root\n * @param {String} pattern Search pattern\n * @param {Object} [options] Options\n * @return {Promise<Object[], Error>} A list of files\n */\nexport const search = (adapter, mount) => (root, pattern, options = {}) => {\n  if (mount.attributes && mount.attributes.searchable === false) {\n    return Promise.resolve([]);\n  }\n\n  return adapter.search(pathToObject(root), pattern, options, mount)\n    .then(handleDirectoryList(root, options));\n};\n\n/**\n * Touches a file\n * @param {Object|String} path File path\n * @return {Promise<boolean, Error>}\n */\nexport const touch = (adapter, mount) => (path, options = {}) =>\n  adapter.touch(pathToObject(path), options, mount);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst eventNames = ['open', 'close', 'message', 'error'];\n\n/**\n * Application Socket\n *\n * @desc This is just an abstraction above the standard browser provided `WebSocket` class.\n * Since this class implements the EventHandler, use the `.on('event')` pattern instead of `.onevent`.\n *\n */\nexport default class Websocket extends EventEmitter {\n\n  /**\n   * Create a new Websocket\n   * @param {String} uri Connection URI\n   * @param {Object} options Websocket options\n   */\n  constructor(name, uri, options = {}) {\n    console.debug('Websocket::constructor()', name, uri);\n\n    super('Websocket@' + name);\n\n    this.uri = uri;\n    this.connected = false;\n    this.connecting = false;\n    this.reconnecting = false;\n    this.connectfailed = false;\n    this.options = Object.assign({\n      interval: 1000,\n      open: true\n    }, options);\n\n    /**\n     * The Websocket\n     * @type {WebSocket}\n     */\n    this.connection = null;\n\n    this._attachEvents();\n\n    if (this.options.open) {\n      this.open();\n    }\n  }\n\n  /**\n   * Destroys the current connection\n   */\n  _destroyConnection() {\n    if (!this.connection) {\n      return;\n    }\n\n    eventNames.forEach(name => {\n      this.connection[`on${name}`] = () => {};\n    });\n\n    this.reconnecting = clearInterval(this.reconnecting);\n    this.connection = null;\n  }\n\n  /**\n   * Attaches internal events\n   */\n  _attachEvents() {\n    this.on('open', ev => {\n      const reconnected = !!this.reconnecting;\n\n      this.connected = true;\n      this.reconnecting = false;\n      this.connectfailed = false;\n      this.reconnecting = clearInterval(this.reconnecting);\n\n      this.emit('connected', ev, reconnected);\n    });\n\n    this.on('close', ev => {\n      if (!this.connected && !this.connectfailed) {\n        this.emit('failed', ev);\n\n        this.connectfailed = true;\n      }\n\n      clearInterval(this.reconnecting);\n\n      this._destroyConnection();\n\n      this.connected = false;\n      this.reconnecting = setInterval(() => {\n        this.open();\n      }, this.options.interval);\n\n      this.emit('disconnected', ev);\n    });\n  }\n\n  /**\n   * Opens the connection\n   * @param {boolean} [reconnect=false] Force reconnection\n   */\n  open(reconnect = false) {\n    if (this.connection && !reconnect) {\n      return;\n    }\n\n    this._destroyConnection();\n\n    this.reconnecting = clearInterval(this.reconnecting);\n    this.connection = new WebSocket(this.uri);\n\n    eventNames.forEach(name => {\n      this.connection[`on${name}`] = (...args) => this.emit(name, ...args);\n    });\n  }\n\n  /**\n   * Wrapper for sending data\n   */\n  send(...args) {\n    return this.connection.send(...args);\n  }\n\n  /**\n   * Wrapper for closing\n   */\n  close(...args) {\n    return this.connection.close(...args);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {supportsPassive} from './utils/dom.js';\nimport * as mediaQuery from 'css-mediaquery';\n\nconst CASCADE_DISTANCE = 10;\n\nconst isPassive = supportsPassive();\nconst touchArg = isPassive ? {passive: true} : false;\n\n/*\n * Map of available \"actions\"\n */\nconst actionMap = {\n  maximize: (win) => win.maximize() ? null : win.restore(),\n  minimize: (win) => win.minimize(),\n  close: (win) => win.close()\n};\n\n/*\n * Creates a clamper for resize/move\n */\nconst clamper = win => {\n  const {maxDimension, minDimension} = win.attributes;\n  const {position, dimension} = win.state;\n\n  const maxPosition = {\n    left: position.left + dimension.width - minDimension.width,\n    top: position.top + dimension.height - minDimension.height\n  };\n\n  const clamp = (min, max, current) => {\n    const value = min === -1 ? current : Math.max(min, current);\n    return max === -1 ? value : Math.min(max, value);\n  };\n\n  return (width, height, top, left) => ({\n    width: clamp(minDimension.width, maxDimension.width, width),\n    height: clamp(minDimension.height, maxDimension.height, height),\n    top: clamp(-1, maxPosition.top, top),\n    left: clamp(-1, maxPosition.left, left)\n  });\n};\n\n/*\n * Creates a resize handler\n */\nconst resizer = (win, handle) => {\n  const clamp = clamper(win);\n  const {position, dimension} = win.state;\n  const directions = handle.getAttribute('data-direction').split('');\n  const going = dir => directions.indexOf(dir) !== -1;\n  const xDir = going('e') ? 1 : (going('w') ? -1 : 0);\n  const yDir = going('s') ? 1 : (going('n') ? -1 : 0);\n\n  return (diffX, diffY) => {\n    const width = dimension.width + (diffX * xDir);\n    const height = dimension.height + (diffY * yDir);\n    const top = yDir === -1 ? position.top + diffY : position.top;\n    const left = xDir === -1 ? position.left + diffX : position.left;\n\n    return clamp(width, height, top, left);\n  };\n};\n\n/*\n * Creates a movement handler\n */\nconst mover = (win, rect) => {\n  const {position} = win.state;\n\n  return (diffX, diffY) => {\n    const top = Math.max(position.top + diffY, rect.top);\n    const left = position.left + diffX;\n\n    return {top, left};\n  };\n};\n\n/*\n * Calculates a new initial position for window\n */\nconst getCascadePosition = (win, rect, pos) => {\n  const startX = CASCADE_DISTANCE + rect.left;\n  const startY = CASCADE_DISTANCE + rect.top;\n  const distance = CASCADE_DISTANCE;\n  const wrap = CASCADE_DISTANCE * 2;\n\n  const newX = startX + ((win.wid % wrap) * distance);\n  const newY = startY + ((win.wid % wrap) * distance);\n\n  const top = typeof pos.top === 'number' && Number.isInteger(pos.top)\n    ? Math.max(rect.top, pos.top)\n    : newY;\n\n  const left = typeof pos.left === 'number' && Number.isInteger(pos.left)\n    ? Math.max(rect.left, pos.left)\n    : newX;\n\n  return {top, left};\n};\n\n/*\n * Normalizes event input (position)\n */\nconst getEvent = (ev) => {\n  let {clientX, clientY, target} = ev;\n  const touch = ev.touches || ev.changedTouches || [];\n\n  if (touch.length) {\n    clientX = touch[0].clientX;\n    clientY = touch[0].clientY;\n  }\n\n  return {clientX, clientY, touch: touch.length > 0, target};\n};\n\nconst getScreenOrientation = screen => screen && screen.orientation\n  ? screen.orientation.type\n  : window.matchMedia('(orientation: portrait)') ? 'portrait' : 'landscape';\n\n/*\n * Gets a media query name from a map\n */\nconst getMediaQueryName = (win) => Object.keys(win.attributes.mediaQueries)\n  .filter(name => mediaQuery.match(win.attributes.mediaQueries[name], {\n    type: 'screen',\n    orientation: getScreenOrientation(window.screen),\n    width: win.$element.offsetWidth || win.state.dimension.width,\n    height: win.$element.offsetHeight || win.state.dimension.height\n  }))\n  .pop();\n\n/**\n * Default Window Behavior\n *\n * @desc Controls certain events and their interaction with a window\n */\nexport default class WindowBehavior {\n  /**\n   * Create window behavior\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    this.core = core;\n\n    this.lastAction = null;\n    this.$lofi = document.createElement('div');\n    this.$lofi.className = 'osjs-window-behavior-lofi';\n  }\n\n  /**\n   * Initializes window behavior\n   * @param {Window} win Window reference\n   */\n  init(win) {\n    const ontouchstart = ev => this.mousedown(ev, win);\n    const onmousedown = ev => this.mousedown(ev, win);\n    const onclick = ev => this.click(ev, win);\n    const ondblclick = ev => this.dblclick(ev, win);\n\n    const onicondblclick = ev => {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this.iconDblclick(ev, win);\n    };\n\n    const oniconclick = ev => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      this.iconClick(ev, win);\n    };\n\n    const ontrasitionend = ev => {\n      if (win) {\n        win.emit('transitionend');\n      }\n\n      this.core.emit('osjs/window:transitionend', ev, win);\n    };\n\n    win.$element.addEventListener('touchstart', ontouchstart, touchArg);\n    win.$element.addEventListener('mousedown', onmousedown);\n    win.$element.addEventListener('click', onclick);\n    win.$element.addEventListener('dblclick', ondblclick);\n    win.$element.addEventListener('transitionend', ontrasitionend);\n\n    if (win.$icon) {\n      win.$icon.addEventListener('dblclick', onicondblclick);\n      win.$icon.addEventListener('click', oniconclick);\n    }\n\n    win.on('resized,rendered', () => {\n      win.setState('media', getMediaQueryName(win));\n    });\n\n    win.on('destroy', () => {\n      if (win.$element) {\n        win.$element.removeEventListener('touchstart', ontouchstart, touchArg);\n        win.$element.removeEventListener('mousedown', onmousedown);\n        win.$element.removeEventListener('click', onclick);\n        win.$element.removeEventListener('dblclick', ondblclick);\n        win.$element.removeEventListener('transitionend', ontrasitionend);\n      }\n\n      if (win.$icon) {\n        win.$icon.removeEventListener('dblclick', onicondblclick);\n        win.$icon.removeEventListener('click', oniconclick);\n      }\n    });\n\n    const rect = this.core.has('osjs/desktop')\n      ? this.core.make('osjs/desktop').getRect()\n      : {top: 0, left: 0};\n\n    const {top, left} = getCascadePosition(win, rect, win.state.position);\n    win.state.position.top = top;\n    win.state.position.left = left;\n    win.state.media = getMediaQueryName(win);\n  }\n\n  /**\n   * Handles Mouse Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  click(ev, win) {\n    if (this.lastAction) {\n      return;\n    }\n\n    const target = ev.target;\n    const hitButton = target.classList.contains('osjs-window-button');\n\n    if (hitButton) {\n      const action =  ev.target.getAttribute('data-action');\n      actionMap[action](win);\n    }\n  }\n\n  /**\n   * Handles Mouse Double Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  dblclick(ev, win) {\n    if (this.lastAction) {\n      return;\n    }\n\n    const target = ev.target;\n    const hitTitle = target.classList.contains('osjs-window-header');\n\n    if (hitTitle) {\n      if (win.state.maximized) {\n        win.restore();\n      } else if (win.state.minimized) {\n        win.raise();\n      } else {\n        win.maximize();\n      }\n    }\n  }\n\n  /**\n   * Handles Mouse Down Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  mousedown(ev, win) {\n    let attributeSet = false;\n\n    const {moveable, resizable} = win.attributes;\n    const {lofi} = this.core.config('windows');\n    const {clientX, clientY, touch, target} = getEvent(ev);\n\n    const checkMove = ev.ctrlKey\n      ? win.$element.contains(target)\n      : target.classList.contains('osjs-window-header');\n\n    const rect = this.core.has('osjs/desktop')\n      ? this.core.make('osjs/desktop').getRect()\n      : {top: 0, left: 0};\n\n    const resize = target.classList.contains('osjs-window-resize')\n      ? resizer(win, target)\n      : null;\n\n    const move = checkMove\n      ? mover(win, rect)\n      : null;\n\n    let actionCallback;\n\n    const mousemove = (ev) => {\n      if (!isPassive) {\n        ev.preventDefault();\n      }\n\n      if ((!moveable && move) || (!resizable && resize)) {\n        return;\n      }\n\n      const transformedEvent = getEvent(ev);\n      const posX = resize ? Math.max(rect.left, transformedEvent.clientX) : transformedEvent.clientX;\n      const posY = resize ? Math.max(rect.top, transformedEvent.clientY) : transformedEvent.clientY;\n      const diffX = posX - clientX;\n      const diffY = posY - clientY;\n\n      if (resize) {\n        const {width, height, top, left} = resize(diffX, diffY);\n\n        actionCallback = () => {\n          win._setState('dimension', {width, height}, false);\n          win._setState('position', {top, left}, false);\n        };\n\n        if (lofi) {\n          this.$lofi.style.top = `${top}px`;\n          this.$lofi.style.left = `${left}px`;\n          this.$lofi.style.width = `${width}px`;\n          this.$lofi.style.height = `${height}px`;\n        } else {\n          actionCallback();\n        }\n\n        this.lastAction = 'resize';\n      } else if (move) {\n        const position = move(diffX, diffY);\n\n        actionCallback = () => {\n          win._setState('position', position, false);\n        };\n\n        if (lofi) {\n          this.$lofi.style.top = `${position.top}px`;\n          this.$lofi.style.left = `${position.left}px`;\n        } else {\n          actionCallback();\n        }\n\n        this.lastAction = 'move';\n      }\n\n      if (this.lastAction) {\n        win._setState(this.lastAction === 'move' ? 'moving' : 'resizing', true); // NOTE: This also updates DOM!\n\n        if (!attributeSet) {\n          this.core.$root.setAttribute('data-window-action', String(true));\n          attributeSet = true;\n        }\n      }\n    };\n\n    const mouseup = () => {\n      if (touch) {\n        document.removeEventListener('touchmove', mousemove, touchArg);\n        document.removeEventListener('touchend', mouseup, touchArg);\n      } else {\n        document.removeEventListener('mousemove', mousemove);\n        document.removeEventListener('mouseup', mouseup);\n      }\n\n      if (lofi) {\n        this.$lofi.remove();\n\n        if (actionCallback) {\n          actionCallback();\n        }\n\n        actionCallback = undefined;\n      }\n\n      if (this.lastAction === 'move') {\n        win.emit('moved', Object.assign({}, win.state.position), win);\n        win._setState('moving', false);\n      } else if (this.lastAction === 'resize') {\n        win.emit('resized', Object.assign({}, win.state.dimension), win);\n        win._setState('resizing', false);\n      }\n\n      this.core.$root.setAttribute('data-window-action', String(false));\n    };\n\n\n    if (!win.focus()) {\n      win.setNextZindex();\n    }\n\n    if (move || resize) {\n      if (touch) {\n        document.addEventListener('touchmove', mousemove, touchArg);\n        document.addEventListener('touchend', mouseup, touchArg);\n      } else {\n        document.addEventListener('mousemove', mousemove);\n        document.addEventListener('mouseup', mouseup);\n      }\n    }\n\n    this.lastAction = null;\n\n    if (this.core.has('osjs/contextmenu')) {\n      this.core.make('osjs/contextmenu').hide();\n    }\n\n    if (lofi) {\n      this.$lofi.style.zIndex = win.state.zIndex + 1;\n      this.$lofi.style.top = `${win.state.position.top}px`;\n      this.$lofi.style.left = `${win.state.position.left}px`;\n      this.$lofi.style.width = `${win.state.dimension.width}px`;\n      this.$lofi.style.height = `${win.state.dimension.height}px`;\n\n      if (!this.$lofi.parentNode) {\n        document.body.appendChild(this.$lofi);\n      }\n    }\n  }\n\n  /**\n   * Handles Icon Double Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  iconDblclick(ev, win) {\n    win.close();\n  }\n\n  /**\n   * Handles Icon Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  iconClick(ev, win) {\n    const {minimized, maximized} = win.state;\n    const {minimizable, maximizable, closeable} = win.attributes;\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu: [{\n        label: minimized ? _('LBL_RAISE') : _('LBL_MINIMIZE'),\n        disabled: !minimizable,\n        onclick: () => minimized ? win.raise() : win.minimize()\n      }, {\n        label: maximized ? _('LBL_RESTORE') : _('LBL_MAXIMIZE'),\n        disabled: !maximizable,\n        onclick: () => maximized ? win.restore() : win.maximize()\n      }, {\n        label: _('LBL_CLOSE'),\n        disabled: !closeable,\n        onclick: () => win.close()\n      }]\n    });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {droppable} from './utils/dnd';\nimport {escapeHtml, createCssText, getActiveElement} from './utils/dom';\n\n/**\n * Window dimension definition\n * @property {number} width Width in pixels\n * @property {number} height Height in pixels\n * @typedef WindowDimension\n */\n\n/**\n * Window position definition\n * @property {number} left Left in pixels\n * @property {number} top Top in pixels\n * @typedef WindowPosition\n */\n\n/**\n * Window attributes definition\n *\n * @desc Contains attributes for a window.\n * Media queries will add a given name as a `data-media` attribute to the window\n * root DOM element.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Testing_media_queries\n *\n * @property {String[]} [classNames=[]] A list of class names\n * @property {Boolean} [ontop=false] If always on top\n * @property {String} [gravity] Gravity (center/top/left/right/bottom or any combination)\n * @property {Boolean} [resizable=true] If resizable\n * @property {Boolean} [focusable=true] If focusable\n * @property {Boolean} [maximizable=true] If window if maximizable\n * @property {Boolean} [minimizable=true] If minimizable\n * @property {Boolean} [moveable=true] If moveable\n * @property {Boolean} [closeable=true] If closeable\n * @property {Boolean} [header=true] Show header\n * @property {Boolean} [controls=true] Show controls\n * @property {String} [visibility=global] Global visibility, 'restricted' to hide from window lists etc.\n * @property {boolean} [clamp=true] Clamp the window position upon creation\n * @property {WindowDimension} [minDimension] Minimum dimension\n * @property {WindowDimension} [maxDimension] Maximum dimension\n * @property {Map<String,String>} [mediaQueries] A map of matchMedia to name\n * @typedef WindowAttributes\n */\n\n/**\n * Window state definition\n * @property {String} title Title\n * @property {String} icon Icon\n * @property {Boolean} [moving=false] If moving\n * @property {Boolean} [resizing=false] If resizing\n * @property {Boolean} [loading=false] If loading\n * @property {Boolean} [focused=false] If focused\n * @property {Boolean} [maximized=false] If maximized\n * @property {Boolean} [mimimized=false] If mimimized\n * @property {Boolean} [modal=false] If modal to the parent\n * @property {number} [zIndex=1] The z-index (auto calculated)\n * @property {WindowPosition} [position] Position\n * @property {WindowDimension} [dimension] Dimension\n * @typedef WindowState\n */\n\nconst MINIMUM_WIDTH = 100;\nconst MINIMUM_HEIGHT = 100;\nconst ONTOP_ZINDEX = 8388635;\n\nlet windows = [];\nlet windowCount = 0;\nlet nextZindex = 1;\nlet lastWindow = null;\n\n/*\n * Creates window attributes from an object\n */\nconst createAttributes = (attrs) => Object.assign({\n  classNames: [],\n  modal: false,\n  ontop: false,\n  gravity: false,\n  moveable: true,\n  resizable: true,\n  focusable: true,\n  maximizable: true,\n  minimizable: true,\n  sessionable: true,\n  closeable: true,\n  header: true,\n  controls: true,\n  visibility: 'global',\n  shadowDOM: false,\n  clamp: true,\n  mediaQueries: {\n    small: 'screen and (max-width: 640px)',\n    medium: 'screen and (min-width: 640px) and (max-width: 1024px)',\n    big: 'screen and (min-width: 1024px)'\n  },\n  minDimension: {\n    width: MINIMUM_WIDTH,\n    height: MINIMUM_HEIGHT\n  },\n  maxDimension: {\n    width: -1,\n    height: -1\n  }\n}, attrs);\n\n/*\n * Creates window state from an object\n */\nconst createState = (state, options, attrs) => Object.assign({\n  title: options.title || options.id,\n  icon: options.icon || require('./styles/logo-blue-32x32.png'),\n  media: null,\n  moving: false,\n  resizing: false,\n  loading: false,\n  focused: false,\n  maximized: false,\n  minimized: false,\n  zIndex: 1,\n  styles: {},\n  position: Object.assign({}, {\n    left: null,\n    top: null\n  }, options.position),\n  dimension: Object.assign({}, {\n    width: Math.max(attrs.minDimension.width, MINIMUM_WIDTH),\n    height: Math.max(attrs.minDimension.height, MINIMUM_HEIGHT)\n  }, options.dimension)\n}, state);\n\n/*\n * Creates a window id\n */\nconst createWindowId = (win) => {\n  const id = windowCount;\n  windowCount++;\n  windows.push(win);\n  return id;\n};\n\n/*\n * Check if we have to set next zindex\n */\nconst checkNextZindex = ({wid, attributes, state}) => {\n  const {ontop} = attributes;\n  const {zIndex} = state;\n\n  const windexes = windows\n    .filter(w => w.attributes.ontop === ontop)\n    .filter(w => w.wid !== wid)\n    .map(w => w.state.zIndex);\n\n  const max = windexes.length > 0\n    ? Math.max.apply(null, windexes)\n    : 0;\n\n  return zIndex < max;\n};\n\n/*\n * Clamps position to viewport\n */\nconst clampPosition = (rect, {dimension, position}) => {\n  const maxLeft = rect.width - dimension.width;\n  const maxTop = rect.height - dimension.height + rect.top;\n\n  return {\n    left: Math.min(maxLeft, position.left),\n    top: Math.max(rect.top, Math.min(maxTop, position.top))\n  };\n};\n\n/*\n * Window rendering callback function\n */\nconst renderCallback = (win, callback) => {\n  if (typeof callback === 'function') {\n    if (win.attributes.shadowDOM) {\n      try {\n        const mode = typeof win.attributes.shadowDOM === 'string'\n          ? win.attributes.shadowDOM\n          : 'open';\n\n        const shadow = win.$content.attachShadow({mode});\n\n        callback(shadow, win);\n\n        return;\n      } catch (e) {\n        console.warn('Shadow DOM not supported?', e);\n      }\n    }\n\n    callback(win.$content, win);\n  }\n};\n\n/*\n * Adds a list of classnames to window element\n */\nconst addClassNames = (win, names) => names\n  .filter(val => !!val)\n  .forEach((val) => win.$element.classList.add(val));\n\nconst transformVectors = (rect, {width, height}, {top, left}) => {\n  const transform = (val, attr) => {\n    if (!isNaN(val)) {\n      return Number.isInteger(val)\n        ? val\n        : Math.round(rect[attr] * parseFloat(val));\n    }\n\n    return val;\n  };\n\n  return {\n    dimension: {\n      width: transform(width, 'width'),\n      height: transform(height, 'height')\n    },\n    position: {\n      top: transform(top, 'height'),\n      left: transform(left, 'width')\n    }\n  };\n};\n\n/*\n * Default window template\n */\nconst TEMPLATE = `<div class=\"osjs-window-inner\">\n  <div class=\"osjs-window-header\">\n    <div class=\"osjs-window-icon\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-title\"></div>\n    <div class=\"osjs-window-button\" data-action=\"minimize\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-button\" data-action=\"maximize\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-button\" data-action=\"close\">\n      <div></div>\n    </div>\n  </div>\n  <div class=\"osjs-window-content\">\n  </div>\n  <div class=\"osjs-window-resize\" data-direction=\"n\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"nw\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"w\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"sw\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"s\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"se\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"e\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"ne\"></div>\n</div>`.replace(/\\n\\s+/g, '').trim();\n\n/**\n * Window\n *\n * @desc Class for a OS.js Window\n */\nexport default class Window extends EventEmitter {\n\n  /**\n   * Create window\n   *\n   * @param {Core} core Core reference\n   * @param {Object} options Options\n   * @param {String} options.id Window Id (not globaly unique)\n   * @param {String} [options.title] Window Title\n   * @param {String} [options.icon] Window Icon\n   * @param {Window} [options.parent] The parent Window reference\n   * @param {String|Function} [options.template] The Window HTML template (or function with signature (el, win) for programatic construction)\n   * @param {WindowPosition|String} [options.position] Window position\n   * @param {WindowDimension} [options.dimension] Window dimension\n   * @param {WindowAttributes} [options.attributes] Apply Window attributes\n   * @param {WindowState} [options.state] Apply Window state\n   */\n  constructor(core, options = {}) {\n    options = Object.assign({\n      id: null,\n      title: null,\n      parent: null,\n      template: null,\n      attributes: {},\n      position: {},\n      dimension: {},\n      state: {}\n    }, options);\n\n    console.debug('Window::constructor()', options);\n\n    super('Window@' + options.id);\n\n    if (typeof options.position === 'string') {\n      options.attributes.gravity = options.position;\n      options.position = {};\n    }\n\n    /**\n     * The Window ID\n     * @type {String}\n     */\n    this.id = options.id;\n\n    /**\n     * The Window ID\n     * @type {Number}\n     */\n    this.wid = createWindowId(this);\n\n    /**\n     * Parent Window reference\n     * @type {Window}\n     */\n    this.parent = options.parent;\n\n    /**\n     * Child windows (via 'parent')\n     * @type {Window[]}\n     */\n    this.children = [];\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * The window destruction state\n     * @type {Boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * The window rendered state\n     * @type {Boolean}\n     */\n    this.rendered = false;\n\n    /**\n     * The window attributes\n     * @type {WindowAttributes}\n     */\n    this.attributes = createAttributes(options.attributes);\n\n    /**\n     * The window state\n     * @type {WindowState}\n     */\n    this.state = createState(options.state, options, this.attributes);\n\n    /**\n     * The window container\n     * @type {Node}\n     */\n    this.$element = document.createElement('div');\n\n    /**\n     * The content container\n     * @type {Node}\n     */\n    this.$content = null;\n\n    /**\n     * The header container\n     * @type {Node}\n     */\n    this.$header = null;\n\n    /**\n     * The icon container\n     * @type {Node}\n     */\n    this.$icon = null;\n\n    /**\n     * The title container\n     * @type {Node}\n     */\n    this.$title = null;\n\n    /**\n     * Internal variable to signal not to use default position\n     * given by user (used for restore)\n     * @type {Boolean}\n     */\n    this._preventDefaultPosition = false;\n\n    /**\n     * Internal timeout reference used for triggering the loading\n     * overlay.\n     * @type {Boolean}\n     */\n    this._loadingDebounce = null;\n\n    /**\n     * The window template\n     * @type {String|Function}\n     */\n    this._template = options.template;\n  }\n\n  /**\n   * Destroy window\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n    this.destroyed = true;\n\n    console.debug('Window::destroy()');\n\n    this.emit('destroy', this);\n    this.core.emit('osjs/window:destroy', this);\n\n    this.children.forEach(w => w.destroy());\n\n    if (this.$element) {\n      this.$element.remove();\n    }\n\n    if (lastWindow === this) {\n      lastWindow = null;\n    }\n\n    const foundIndex = windows.findIndex(w => w === this);\n    if (foundIndex !== -1) {\n      windows.splice(foundIndex, 1);\n    }\n\n    this.children = [];\n    this.parent = null;\n    this.$element = null;\n    this.$content = null;\n    this.$header = null;\n    this.$icon = null;\n    this.$title = null;\n  }\n\n  /**\n   * Initialize window\n   */\n  init() {\n    if (this.inited) {\n      return this;\n    }\n\n    // Assign the window if it is a child\n    if (this.parent) {\n      this.on('destroy', () => {\n        const foundIndex = this.parent.children.findIndex(w => w === this);\n        if (foundIndex !== -1) {\n          this.parent.children.splice(foundIndex, 1);\n        }\n      });\n\n      this.parent.children.push(this);\n    }\n\n    // Insert template\n    const tpl = this.core.config('windows.template') || TEMPLATE;\n    if (this._template) {\n      this.$element.innerHTML = typeof this._template === 'function'\n        ? this._template(this, tpl)\n        : this._template;\n    } else {\n      this.$element.innerHTML = tpl;\n    }\n\n    this.$content = this.$element.querySelector('.osjs-window-content');\n    this.$header = this.$element.querySelector('.osjs-window-header');\n    this.$icon = this.$element.querySelector('.osjs-window-icon > div');\n    this.$title = this.$element.querySelector('.osjs-window-title');\n\n    // Transform percentages in dimension to pixels etc\n    if (this.core.has('osjs/desktop')) {\n      const rect = this.core.make('osjs/desktop').getRect();\n      const {dimension, position} = transformVectors(rect, this.state.dimension, this.state.position);\n      this.state.dimension = dimension;\n      this.state.position = position;\n    }\n\n    // Behavior\n    const behavior = this.core.make('osjs/window-behavior');\n    if (behavior) {\n      behavior.init(this);\n    }\n\n    // DnD functionality\n    const d = droppable(this.$element, {\n      ondragenter: (...args) => this.emit('dragenter', ...args, this),\n      ondragover: (...args) => this.emit('dragover', ...args, this),\n      ondragleave: (...args) => this.emit('dragleave', ...args, this),\n      ondrop: (...args) => this.emit('drop', ...args, this)\n    });\n\n    this.on('destroy', () => d.destroy());\n\n    this.inited = true;\n    this.emit('init', this);\n    this.core.emit('osjs/window:create', this);\n\n    return this;\n  }\n\n  /**\n   * Updates the window buttons\n   */\n  _updateButtons() {\n    const hideButton = action =>\n      this.$header.querySelector(`.osjs-window-button[data-action=${action}]`)\n        .style.display = 'none';\n\n    if (this.attributes.controls) {\n      if (!this.attributes.maximizable) {\n        hideButton('maximize');\n      }\n\n      if (!this.attributes.minimizable) {\n        hideButton('minimize');\n      }\n\n      if (!this.attributes.closeable) {\n        hideButton('close');\n      }\n    } else {\n      Array.from(this.$header.querySelectorAll('.osjs-window-button'))\n        .forEach(el => el.style.display = 'none');\n    }\n  }\n\n  /**\n   * Render window\n   * @param {Function} [callback] Callback when window DOM has been constructed\n   * @return {Window} this instance\n   */\n  render(callback = function() {}) {\n    if (this.rendered) {\n      return this;\n    } else if (!this.inited) {\n      this.init();\n    }\n\n    const classNames = ['osjs-window', ...this.attributes.classNames];\n    if (this.id) {\n      classNames.push(`Window_${this.id}`);\n    }\n\n    addClassNames(this, classNames);\n\n    this._updateButtons();\n    this._updateDOM();\n\n    if (!this._preventDefaultPosition) {\n      this.gravitate(this.attributes.gravity);\n    }\n\n    if (!this.attributes.header) {\n      this.$header.style.display = 'none';\n    }\n\n    // Clamp the initial window position to viewport\n    if (this.attributes.clamp) {\n      this.clampToViewport(false);\n    }\n\n    this.core.$root.appendChild(this.$element);\n\n    if (this.attributes.modal) {\n      if (this.parent) {\n        this.on('render', () => this.parent.setState('loading', true));\n\n        this.on('destroy', () => {\n          this.parent.setState('loading', false);\n          this.parent.focus();\n        });\n      }\n\n      // TODO: Global modal\n    }\n\n    renderCallback(this, callback);\n\n    this.rendered = true;\n    this.setNextZindex(true);\n\n    setTimeout(() => {\n      this.emit('render', this);\n      this.core.emit('osjs/window:render', this);\n    }, 1);\n\n    return this;\n  }\n\n  /**\n   * Close the window\n   */\n  close() {\n    if (this.destroyed) {\n      return false;\n    }\n\n    this.emit('close', this);\n\n    this.destroy();\n\n    return true;\n  }\n\n  /**\n   * Focus the window\n   * @return {Boolean}\n   */\n  focus() {\n    if (!this.state.minimized) {\n      if (this._toggleState('focused', true, 'focus')) {\n        if (lastWindow && lastWindow !== this) {\n          lastWindow.blur();\n        }\n\n        this.setNextZindex();\n\n        lastWindow = this;\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Blur (un-focus) the window\n   * @return {Boolean}\n   */\n  blur() {\n    // Forces blur-ing of browser input element belonging to this window\n    const activeElement = getActiveElement(this.$element);\n    if (activeElement) {\n      activeElement.blur();\n    }\n\n    return this._toggleState('focused', false, 'blur');\n  }\n\n  /**\n   * Minimize (hide) the window\n   * @return {Boolean}\n   */\n  minimize() {\n    if (this.attributes.minimizable) {\n      if (this._toggleState('minimized', true, 'minimize')) {\n        this.blur();\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Raise (un-minimize) the window\n   * @return {Boolean}\n   */\n  raise() {\n    return this._toggleState('minimized', false, 'raise');\n  }\n\n  /**\n   * Maximize the window\n   * @return {Boolean}\n   */\n  maximize() {\n    if (this.attributes.maximizable) {\n      if (this._toggleState('maximized', true, 'maximize')) {\n        this.once('transitionend', () => this.emit('resized'));\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Restore (un-maximize) the window\n   * @return {Boolean}\n   */\n  restore() {\n    if (this._toggleState('maximized', false, 'restore')) {\n      this.once('transitionend', () => this.emit('resized'));\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Resize to fit to current container\n   * @param {Element} [container] The DOM element to use\n   */\n  resizeFit(container) {\n    container = container || this.$content.firstChild;\n\n    if (!container) {\n      return;\n    }\n\n    const innerBox = (container.parentNode.classList.contains('osjs-gui')\n      ? container.parentNode\n      : container).getBoundingClientRect();\n\n    const outerBox = this.$content.getBoundingClientRect();\n    const diffY = Math.ceil(outerBox.height - innerBox.height);\n    const diffX = Math.ceil(outerBox.width - innerBox.width);\n    const topHeight = this.$header.offsetHeight;\n\n    const {left, top} = this.state.position;\n    const min = this.attributes.minDimension;\n    const max = this.attributes.maxDimension;\n\n    let width = Math.max(container.offsetWidth + diffX, min.width);\n    let height = Math.max(container.offsetHeight + diffY + topHeight, min.height);\n\n    if (max.width > 0) {\n      width = Math.min(width, max.width);\n    }\n\n    if (max.height > 0) {\n      height = Math.min(height, max.height);\n    }\n\n    width = Math.max(width, container.offsetWidth);\n    height = Math.max(height, container.offsetHeight);\n\n    if (this.core.has('osjs/desktop')) {\n      const rect = this.core.make('osjs/desktop').getRect();\n      width = Math.min(width, rect.width - left);\n      height = Math.min(height, rect.height - top);\n    }\n\n    if (!isNaN(width) && !isNaN(height)) {\n      this.setDimension({width, height});\n    }\n  }\n\n  /**\n   * Clamps the position to viewport\n   * @param {boolean} [update=true] Update DOM\n   */\n  clampToViewport(update = true) {\n    if (!this.core.has('osjs/desktop')) {\n      return;\n    }\n\n    const rect = this.core.make('osjs/desktop').getRect();\n\n    this.state.position = Object.assign(\n      {},\n      this.state.position,\n      clampPosition(rect, this.state)\n    );\n\n    if (update) {\n      this._updateDOM();\n    }\n  }\n\n  /**\n   * Set the Window icon\n   * @param {String} uri Icon URI\n   */\n  setIcon(uri) {\n    this.state.icon = uri;\n\n    this._updateDOM();\n  }\n\n  /**\n   * Set the Window title\n   * @param {String} title Title\n   */\n  setTitle(title) {\n    this.state.title = title || '';\n\n    this._updateDOM();\n\n    this.core.emit('osjs/window:change', this, 'title', title);\n  }\n\n  /**\n   * Set the Window dimension\n   * @param {WindowDimension} dimension The dimension\n   */\n  setDimension(dimension) {\n    const {width, height} = Object.assign({}, this.state.dimension, dimension || {});\n\n    this.state.dimension.width = width;\n    this.state.dimension.height = height;\n\n    this._updateDOM();\n  }\n\n  /**\n   * Set the Window position\n   * @param {WindowPosition} position The position\n   * @param {Boolean} [preventDefault=false] Prevents any future position setting in init procedure\n   */\n  setPosition(position, preventDefault = false) {\n    const {left, top} = Object.assign({}, this.state.position, position || {});\n\n    this.state.position.top = top;\n    this.state.position.left = left;\n\n    if (preventDefault) {\n      this._preventDefaultPosition = true;\n    }\n\n    this._updateDOM();\n  }\n\n  /**\n   * Set the Window z index\n   * @param {Number} zIndex the index\n   */\n  setZindex(zIndex) {\n    this.state.zIndex = zIndex;\n    console.debug('Window::setZindex()', zIndex);\n\n    this._updateDOM();\n  }\n\n  /**\n   * Sets the Window to next z index\n   * @param {boolean} [force] Force next index\n   */\n  setNextZindex(force) {\n    const setNext = force || checkNextZindex(this);\n\n    if (setNext) {\n      this.setZindex(nextZindex);\n      nextZindex++;\n    }\n  }\n\n  /**\n   * Set a state by value\n   * @param {String} name State name\n   * @param {*} value State value\n   * @param {Boolean} [update=true] Update the DOM\n   * @see {WindowState}\n   */\n  setState(name, value, update = true) {\n    const set = () => this._setState(name, value, update);\n\n    // Allows for some \"grace time\" so the overlay does not\n    // \"blink\"\n    if (name === 'loading' && update) {\n      clearTimeout(this._loadingDebounce);\n\n      if (value === true) {\n        this._loadingDebounce = setTimeout(() => set(), 250);\n        return;\n      }\n    }\n\n    set();\n  }\n\n  /**\n   * Gravitates window towards a certain area\n   * @param {String} gravity Gravity\n   */\n  gravitate(gravity) {\n    if (!this.core.has('osjs/desktop')) {\n      return;\n    }\n\n    const rect = this.core.make('osjs/desktop').getRect();\n    let {left, top} = this.state.position;\n\n    if (gravity === 'center') {\n      left = (rect.width / 2) - (this.state.dimension.width / 2);\n      top = (rect.height / 2) - (this.state.dimension.height / 2);\n    } else if (gravity) {\n      let hasVertical =  gravity.match(/top|bottom/);\n      let hasHorizontal = gravity.match(/left|rigth/);\n\n      if (gravity.match(/top/)) {\n        top = rect.top;\n      } else if (gravity.match(/bottom/)) {\n        top = rect.height - (this.state.dimension.height) + rect.top;\n      }\n\n      if (gravity.match(/left/)) {\n        left = rect.left;\n      } else if (gravity.match(/right/)) {\n        left = rect.width - (this.state.dimension.width);\n      }\n\n      if (!hasVertical && gravity.match(/center/)) {\n        top = (rect.height / 2) - (this.state.dimension.height / 2);\n      } else if (!hasHorizontal && gravity.match(/center/)) {\n        left = (rect.width / 2) - (this.state.dimension.width / 2);\n      }\n    }\n\n    this.setPosition({left, top});\n  }\n\n  /**\n   * Gets a astate\n   * @return {*}\n   */\n  getState(n) {\n    const value = this.state[n];\n\n    return ['position', 'dimension', 'styles'].indexOf(n) !== -1\n      ? Object.assign({}, value)\n      : value;\n  }\n\n  /**\n   * Get a snapshot of the Window session\n   * @return {Object}\n   */\n  getSession() {\n    return this.attributes.sessionable === false ? null : {\n      id: this.id,\n      position: Object.assign({}, this.state.position),\n      dimension: Object.assign({}, this.state.dimension)\n    };\n  }\n\n  /**\n   * Get a list of all windows\n   *\n   * @return {Window[]}\n   */\n  static getWindows() {\n    return windows;\n  }\n\n  /**\n   * Gets the lastly focused Window\n   * @return {Window}\n   */\n  static lastWindow() {\n    return lastWindow;\n  }\n\n  /**\n   * Internal method for setting state\n   * @param {String} name State name\n   * @param {*} value State value\n   * @param {Boolean} [update=true] Update the DOM\n   */\n  _setState(name, value, update = true) {\n    const oldValue = this.state[name];\n    this.state[name] = value;\n\n    if (update) {\n      if (oldValue !== value) {\n        console.debug('Window::_setState()', name, value);\n      }\n\n      this._updateDOM();\n    }\n  }\n\n  /**\n   * Internal method for toggling state\n   * @param {String} name State name\n   * @param {*} value State value\n   * @param {String} eventName Name of event to emit\n   * @param {Boolean} [update=true] Update the DOM\n   */\n  _toggleState(name, value, eventName, update = true) {\n    if (this.state[name] === value) {\n      return false;\n    }\n\n    console.debug('Window::_toggleState()', name, value, eventName, update);\n\n    this.state[name] = value;\n    this.emit(eventName, this);\n    this.core.emit('osjs/window:change', this, name, value);\n\n    if (update) {\n      this._updateDOM();\n    }\n\n    return true;\n  }\n\n  /**\n   * Updated the Window DOM\n   */\n  _updateDOM() {\n    if (!this.inited) {\n      return;\n    }\n\n    const {$element, $title, $icon, id, state, attributes} = this;\n    const {width, height} = state.dimension;\n    const {top, left} = state.position;\n    const {title, icon, zIndex, styles} = state;\n\n    const attrs = {\n      id: id,\n      media: state.media,\n      moving: state.moving,\n      resizing: state.resizing,\n      loading: state.loading,\n      focused: state.focused,\n      maximized: state.maximized,\n      minimized: state.minimized,\n      modal: attributes.modal,\n      ontop: attributes.ontop,\n      resizable: attributes.resizable,\n      moveable: attributes.moveable,\n      maximizable: attributes.maximizable,\n      minimizable: attributes.minimizable\n    };\n\n    const cssText = createCssText(Object.assign({\n      top: String(top) + 'px',\n      left: String(left) + 'px',\n      height: String(height) + 'px',\n      width: String(width) + 'px',\n      zIndex: (attrs.ontop ? ONTOP_ZINDEX : 0) + zIndex\n    }, styles));\n\n    if ($title) {\n      $title.innerHTML = escapeHtml(title);\n    }\n\n    if ($icon) {\n      $icon.style.backgroundImage = `url(${icon})`;\n    }\n\n    if ($element) {\n      Object.keys(attrs)\n        .forEach(a => $element.setAttribute(`data-${a}`, String(attrs[a])));\n\n      $element.style.cssText = cssText;\n    }\n  }\n\n}\n"],"sourceRoot":""}